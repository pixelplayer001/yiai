import{N as Ne,_ as Ee}from"./index.vue_vue_type_script_setup_true_lang-83a143dc.js";import{ap as ge,ab as a,aq as Me,ar as $,as as _,at as N,au as we,av as V,aw as qe,d as Q,ax as de,ay as me,az as Ue,aA as He,aB as xe,r as A,e as L,aC as Ve,aD as Xe,aE as J,V as Ge,H as K,aF as We,aG as Ke,aH as Qe,aI as Ze,aJ as Je,aK as Ye,aL as et,aM as tt,aN as nt,aO as Pe,aP as rt,aQ as I,aR as ot,aS as at,aT as lt,aU as it,F as be,aV as st,aW as Re,v as dt,aX as Ce,f as De,o as W,c as oe,a as k,q as h,k as v,_ as Y,C as Oe,b as ut,h as ct,A as le,l as w,I as Z,U as ke,j as ft,t as ue,m as ce,p as ie,s as fe,z as pt,aY as gt,aZ as mt,a_ as ee,S as ht,al as vt,a$ as bt,W as yt,D as wt,E as _e,b0 as xt,ao as Rt}from"./index-768c9aff.js";import{a as Ct,b as kt,c as _t,d as Tt}from"./appStore-41e2c55e.js";import{u as Bt}from"./index-243e82d0.js";import{N as Te}from"./Popconfirm-7a68a3e7.js";import{N as Ft}from"./Select-fc7266b8.js";import{N as It}from"./Switch-e3e07acb.js";import"./NumberAnimation-d2783707.js";import"./LayoutSider-73de740d.js";const Lt=ge("attach",()=>a("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},a("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},a("g",{fill:"currentColor","fill-rule":"nonzero"},a("path",{d:"M3.25735931,8.70710678 L7.85355339,4.1109127 C8.82986412,3.13460197 10.4127766,3.13460197 11.3890873,4.1109127 C12.365398,5.08722343 12.365398,6.67013588 11.3890873,7.64644661 L6.08578644,12.9497475 C5.69526215,13.3402718 5.06209717,13.3402718 4.67157288,12.9497475 C4.28104858,12.5592232 4.28104858,11.9260582 4.67157288,11.5355339 L9.97487373,6.23223305 C10.1701359,6.0369709 10.1701359,5.72038841 9.97487373,5.52512627 C9.77961159,5.32986412 9.4630291,5.32986412 9.26776695,5.52512627 L3.96446609,10.8284271 C3.18341751,11.6094757 3.18341751,12.8758057 3.96446609,13.6568542 C4.74551468,14.4379028 6.01184464,14.4379028 6.79289322,13.6568542 L12.0961941,8.35355339 C13.4630291,6.98671837 13.4630291,4.77064094 12.0961941,3.40380592 C10.7293591,2.0369709 8.51328163,2.0369709 7.14644661,3.40380592 L2.55025253,8 C2.35499039,8.19526215 2.35499039,8.51184464 2.55025253,8.70710678 C2.74551468,8.90236893 3.06209717,8.90236893 3.25735931,8.70710678 Z"}))))),Ut=ge("cancel",()=>a("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},a("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},a("g",{fill:"currentColor","fill-rule":"nonzero"},a("path",{d:"M2.58859116,2.7156945 L2.64644661,2.64644661 C2.82001296,2.47288026 3.08943736,2.45359511 3.2843055,2.58859116 L3.35355339,2.64644661 L8,7.293 L12.6464466,2.64644661 C12.8417088,2.45118446 13.1582912,2.45118446 13.3535534,2.64644661 C13.5488155,2.84170876 13.5488155,3.15829124 13.3535534,3.35355339 L8.707,8 L13.3535534,12.6464466 C13.5271197,12.820013 13.5464049,13.0894374 13.4114088,13.2843055 L13.3535534,13.3535534 C13.179987,13.5271197 12.9105626,13.5464049 12.7156945,13.4114088 L12.6464466,13.3535534 L8,8.707 L3.35355339,13.3535534 C3.15829124,13.5488155 2.84170876,13.5488155 2.64644661,13.3535534 C2.45118446,13.1582912 2.45118446,12.8417088 2.64644661,12.6464466 L7.293,8 L2.64644661,3.35355339 C2.47288026,3.17998704 2.45359511,2.91056264 2.58859116,2.7156945 L2.64644661,2.64644661 L2.58859116,2.7156945 Z"}))))),Pt=ge("retry",()=>a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},a("path",{d:"M320,146s24.36-12-64-12A160,160,0,1,0,416,294",style:"fill: none; stroke: currentcolor; stroke-linecap: round; stroke-miterlimit: 10; stroke-width: 32px;"}),a("polyline",{points:"256 58 336 138 256 218",style:"fill: none; stroke: currentcolor; stroke-linecap: round; stroke-linejoin: round; stroke-width: 32px;"}))),Dt=ge("trash",()=>a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},a("path",{d:"M432,144,403.33,419.74A32,32,0,0,1,371.55,448H140.46a32,32,0,0,1-31.78-28.26L80,144",style:"fill: none; stroke: currentcolor; stroke-linecap: round; stroke-linejoin: round; stroke-width: 32px;"}),a("rect",{x:"32",y:"64",width:"448",height:"80",rx:"16",ry:"16",style:"fill: none; stroke: currentcolor; stroke-linecap: round; stroke-linejoin: round; stroke-width: 32px;"}),a("line",{x1:"312",y1:"240",x2:"200",y2:"352",style:"fill: none; stroke: currentcolor; stroke-linecap: round; stroke-linejoin: round; stroke-width: 32px;"}),a("line",{x1:"312",y1:"352",x2:"200",y2:"240",style:"fill: none; stroke: currentcolor; stroke-linecap: round; stroke-linejoin: round; stroke-width: 32px;"}))),ae=Me("n-upload"),Ot=$([_("upload","width: 100%;",[N("dragger-inside",[_("upload-trigger",`
 display: block;
 `)]),N("drag-over",[_("upload-dragger",`
 border: var(--n-dragger-border-hover);
 `)])]),_("upload-dragger",`
 cursor: pointer;
 box-sizing: border-box;
 width: 100%;
 text-align: center;
 border-radius: var(--n-border-radius);
 padding: 24px;
 opacity: 1;
 transition:
 opacity .3s var(--n-bezier),
 border-color .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 background-color: var(--n-dragger-color);
 border: var(--n-dragger-border);
 `,[$("&:hover",`
 border: var(--n-dragger-border-hover);
 `),N("disabled",`
 cursor: not-allowed;
 `)]),_("upload-trigger",`
 display: inline-block;
 box-sizing: border-box;
 opacity: 1;
 transition: opacity .3s var(--n-bezier);
 `,[$("+",[_("upload-file-list","margin-top: 8px;")]),N("disabled",`
 opacity: var(--n-item-disabled-opacity);
 cursor: not-allowed;
 `),N("image-card",`
 width: 96px;
 height: 96px;
 `,[_("base-icon",`
 font-size: 24px;
 `),_("upload-dragger",`
 padding: 0;
 height: 100%;
 width: 100%;
 display: flex;
 align-items: center;
 justify-content: center;
 `)])]),_("upload-file-list",`
 line-height: var(--n-line-height);
 opacity: 1;
 transition: opacity .3s var(--n-bezier);
 `,[$("a, img","outline: none;"),N("disabled",`
 opacity: var(--n-item-disabled-opacity);
 cursor: not-allowed;
 `,[_("upload-file","cursor: not-allowed;")]),N("grid",`
 display: grid;
 grid-template-columns: repeat(auto-fill, 96px);
 grid-gap: 8px;
 margin-top: 0;
 `),_("upload-file",`
 display: block;
 box-sizing: border-box;
 cursor: default;
 padding: 0px 12px 0 6px;
 transition: background-color .3s var(--n-bezier);
 border-radius: var(--n-border-radius);
 `,[we(),_("progress",[we({foldPadding:!0})]),$("&:hover",`
 background-color: var(--n-item-color-hover);
 `,[_("upload-file-info",[V("action",`
 opacity: 1;
 `)])]),N("image-type",`
 border-radius: var(--n-border-radius);
 text-decoration: underline;
 text-decoration-color: #0000;
 `,[_("upload-file-info",`
 padding-top: 0px;
 padding-bottom: 0px;
 width: 100%;
 height: 100%;
 display: flex;
 justify-content: space-between;
 align-items: center;
 padding: 6px 0;
 `,[_("progress",`
 padding: 2px 0;
 margin-bottom: 0;
 `),V("name",`
 padding: 0 8px;
 `),V("thumbnail",`
 width: 32px;
 height: 32px;
 font-size: 28px;
 display: flex;
 justify-content: center;
 align-items: center;
 `,[$("img",`
 width: 100%;
 `)])])]),N("text-type",[_("progress",`
 box-sizing: border-box;
 padding-bottom: 6px;
 margin-bottom: 6px;
 `)]),N("image-card-type",`
 position: relative;
 width: 96px;
 height: 96px;
 border: var(--n-item-border-image-card);
 border-radius: var(--n-border-radius);
 padding: 0;
 display: flex;
 align-items: center;
 justify-content: center;
 transition: border-color .3s var(--n-bezier), background-color .3s var(--n-bezier);
 border-radius: var(--n-border-radius);
 overflow: hidden;
 `,[_("progress",`
 position: absolute;
 left: 8px;
 bottom: 8px;
 right: 8px;
 width: unset;
 `),_("upload-file-info",`
 padding: 0;
 width: 100%;
 height: 100%;
 `,[V("thumbnail",`
 width: 100%;
 height: 100%;
 display: flex;
 flex-direction: column;
 align-items: center;
 justify-content: center;
 font-size: 36px;
 `,[$("img",`
 width: 100%;
 `)])]),$("&::before",`
 position: absolute;
 z-index: 1;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 border-radius: inherit;
 opacity: 0;
 transition: opacity .2s var(--n-bezier);
 content: "";
 `),$("&:hover",[$("&::before","opacity: 1;"),_("upload-file-info",[V("thumbnail","opacity: .12;")])])]),N("error-status",[$("&:hover",`
 background-color: var(--n-item-color-hover-error);
 `),_("upload-file-info",[V("name","color: var(--n-item-text-color-error);"),V("thumbnail","color: var(--n-item-text-color-error);")]),N("image-card-type",`
 border: var(--n-item-border-image-card-error);
 `)]),N("with-url",`
 cursor: pointer;
 `,[_("upload-file-info",[V("name",`
 color: var(--n-item-text-color-success);
 text-decoration-color: var(--n-item-text-color-success);
 `,[$("a",`
 text-decoration: underline;
 `)])])]),_("upload-file-info",`
 position: relative;
 padding-top: 6px;
 padding-bottom: 6px;
 display: flex;
 flex-wrap: nowrap;
 `,[V("thumbnail",`
 font-size: 18px;
 opacity: 1;
 transition: opacity .2s var(--n-bezier);
 color: var(--n-item-icon-color);
 `,[_("base-icon",`
 margin-right: 2px;
 vertical-align: middle;
 transition: color .3s var(--n-bezier);
 `)]),V("action",`
 padding-top: inherit;
 padding-bottom: inherit;
 position: absolute;
 right: 0;
 top: 0;
 bottom: 0;
 width: 80px;
 display: flex;
 align-items: center;
 transition: opacity .2s var(--n-bezier);
 justify-content: flex-end;
 opacity: 0;
 `,[_("button",[$("&:not(:last-child)",{marginRight:"4px"}),_("base-icon",[$("svg",[qe()])])]),N("image-type",`
 position: relative;
 max-width: 80px;
 width: auto;
 `),N("image-card-type",`
 z-index: 2;
 position: absolute;
 width: 100%;
 height: 100%;
 left: 0;
 right: 0;
 bottom: 0;
 top: 0;
 display: flex;
 justify-content: center;
 align-items: center;
 `)]),V("name",`
 color: var(--n-item-text-color);
 flex: 1;
 display: flex;
 justify-content: center;
 text-overflow: ellipsis;
 overflow: hidden;
 flex-direction: column;
 text-decoration-color: #0000;
 font-size: var(--n-font-size);
 transition:
 color .3s var(--n-bezier),
 text-decoration-color .3s var(--n-bezier); 
 `,[$("a",`
 color: inherit;
 text-decoration: underline;
 `)])])])]),_("upload-file-input",`
 display: none;
 width: 0;
 height: 0;
 opacity: 0;
 `)]),je="__UPLOAD_DRAGGER__",jt=Q({name:"UploadDragger",[je]:!0,setup(e,{slots:t}){const r=de(ae,null);return r||me("upload-dragger","`n-upload-dragger` must be placed inside `n-upload`."),()=>{const{mergedClsPrefixRef:{value:n},mergedDisabledRef:{value:i},maxReachedRef:{value:s}}=r;return a("div",{class:[`${n}-upload-dragger`,(i||s)&&`${n}-upload-dragger--disabled`]},t)}}}),St=a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28"},a("g",{fill:"none"},a("path",{d:"M21.75 3A3.25 3.25 0 0 1 25 6.25v15.5A3.25 3.25 0 0 1 21.75 25H6.25A3.25 3.25 0 0 1 3 21.75V6.25A3.25 3.25 0 0 1 6.25 3h15.5zm.583 20.4l-7.807-7.68a.75.75 0 0 0-.968-.07l-.084.07l-7.808 7.68c.183.065.38.1.584.1h15.5c.204 0 .4-.035.583-.1l-7.807-7.68l7.807 7.68zM21.75 4.5H6.25A1.75 1.75 0 0 0 4.5 6.25v15.5c0 .208.036.408.103.593l7.82-7.692a2.25 2.25 0 0 1 3.026-.117l.129.117l7.82 7.692c.066-.185.102-.385.102-.593V6.25a1.75 1.75 0 0 0-1.75-1.75zm-3.25 3a2.5 2.5 0 1 1 0 5a2.5 2.5 0 0 1 0-5zm0 1.5a1 1 0 1 0 0 2a1 1 0 0 0 0-2z",fill:"currentColor"}))),zt=a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28"},a("g",{fill:"none"},a("path",{d:"M6.4 2A2.4 2.4 0 0 0 4 4.4v19.2A2.4 2.4 0 0 0 6.4 26h15.2a2.4 2.4 0 0 0 2.4-2.4V11.578c0-.729-.29-1.428-.805-1.944l-6.931-6.931A2.4 2.4 0 0 0 14.567 2H6.4zm-.9 2.4a.9.9 0 0 1 .9-.9H14V10a2 2 0 0 0 2 2h6.5v11.6a.9.9 0 0 1-.9.9H6.4a.9.9 0 0 1-.9-.9V4.4zm16.44 6.1H16a.5.5 0 0 1-.5-.5V4.06l6.44 6.44z",fill:"currentColor"}))),At=Q({name:"UploadProgress",props:{show:Boolean,percentage:{type:Number,required:!0},status:{type:String,required:!0}},setup(){return{mergedTheme:de(ae).mergedThemeRef}},render(){return a(Ue,null,{default:()=>this.show?a(Ne,{type:"line",showIndicator:!1,percentage:this.percentage,status:this.status,height:2,theme:this.mergedTheme.peers.Progress,themeOverrides:this.mergedTheme.peerOverrides.Progress}):null})}});var ye=globalThis&&globalThis.__awaiter||function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(f){f(s)})}return new(r||(r=Promise))(function(s,f){function g(l){try{u(n.next(l))}catch(b){f(b)}}function d(l){try{u(n.throw(l))}catch(b){f(b)}}function u(l){l.done?s(l.value):i(l.value).then(g,d)}u((n=n.apply(e,t||[])).next())})};function Se(e){return e.includes("image/")}function Be(e=""){const t=e.split("/"),n=t[t.length-1].split(/#|\?/)[0];return(/\.[^./\\]*$/.exec(n)||[""])[0]}const Fe=/(webp|svg|png|gif|jpg|jpeg|jfif|bmp|dpg|ico)$/i,ze=e=>{if(e.type)return Se(e.type);const t=Be(e.name||"");if(Fe.test(t))return!0;const r=e.thumbnailUrl||e.url||"",n=Be(r);return!!(/^data:image\//.test(r)||Fe.test(n))};function $t(e){return ye(this,void 0,void 0,function*(){return yield new Promise(t=>{if(!e.type||!Se(e.type)){t("");return}t(window.URL.createObjectURL(e))})})}const Nt=He&&window.FileReader&&window.File;function Et(e){return e.isDirectory}function Mt(e){return e.isFile}function qt(e,t){return ye(this,void 0,void 0,function*(){const r=[];function n(i){return ye(this,void 0,void 0,function*(){for(const s of i)if(s){if(t&&Et(s)){const f=s.createReader();let g=[],d;try{do d=yield new Promise((u,l)=>{f.readEntries(u,l)}),g=g.concat(d);while(d.length>0)}catch(u){xe("upload","error happens when handling directory upload",u)}yield n(g)}else if(Mt(s))try{const f=yield new Promise((g,d)=>{s.file(g,d)});r.push({file:f,entry:s,source:"dnd"})}catch(f){xe("upload","error happens when handling file upload",f)}}})}return yield n(e),r})}function se(e){const{id:t,name:r,percentage:n,status:i,url:s,file:f,thumbnailUrl:g,type:d,fullPath:u,batchId:l}=e;return{id:t,name:r,percentage:n??null,status:i,url:s??null,file:f??null,thumbnailUrl:g??null,type:d??null,fullPath:u??null,batchId:l??null}}function Ht(e,t,r){return e=e.toLowerCase(),t=t.toLocaleLowerCase(),r=r.toLocaleLowerCase(),r.split(",").map(i=>i.trim()).filter(Boolean).some(i=>{if(i.startsWith(".")){if(e.endsWith(i))return!0}else if(i.includes("/")){const[s,f]=t.split("/"),[g,d]=i.split("/");if((g==="*"||s&&g&&g===s)&&(d==="*"||f&&d&&d===f))return!0}else return!0;return!1})}var Ie=globalThis&&globalThis.__awaiter||function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(f){f(s)})}return new(r||(r=Promise))(function(s,f){function g(l){try{u(n.next(l))}catch(b){f(b)}}function d(l){try{u(n.throw(l))}catch(b){f(b)}}function u(l){l.done?s(l.value):i(l.value).then(g,d)}u((n=n.apply(e,t||[])).next())})};const pe={paddingMedium:"0 3px",heightMedium:"24px",iconSizeMedium:"18px"},Vt=Q({name:"UploadFile",props:{clsPrefix:{type:String,required:!0},file:{type:Object,required:!0},listType:{type:String,required:!0},index:{type:Number,required:!0}},setup(e){const t=de(ae),r=A(null),n=A(""),i=L(()=>{const{file:m}=e;return m.status==="finished"?"success":m.status==="error"?"error":"info"}),s=L(()=>{const{file:m}=e;if(m.status==="error")return"error"}),f=L(()=>{const{file:m}=e;return m.status==="uploading"}),g=L(()=>{if(!t.showCancelButtonRef.value)return!1;const{file:m}=e;return["uploading","pending","error"].includes(m.status)}),d=L(()=>{if(!t.showRemoveButtonRef.value)return!1;const{file:m}=e;return["finished"].includes(m.status)}),u=L(()=>{if(!t.showDownloadButtonRef.value)return!1;const{file:m}=e;return["finished"].includes(m.status)}),l=L(()=>{if(!t.showRetryButtonRef.value)return!1;const{file:m}=e;return["error"].includes(m.status)}),b=Ve(()=>n.value||e.file.thumbnailUrl||e.file.url),P=L(()=>{if(!t.showPreviewButtonRef.value)return!1;const{file:{status:m},listType:C}=e;return["finished"].includes(m)&&b.value&&C==="image-card"});function X(){return Ie(this,void 0,void 0,function*(){const m=t.onRetryRef.value;m&&(yield m({file:e.file}))===!1||t.submit(e.file.id)})}function R(m){m.preventDefault();const{file:C}=e;["finished","pending","error"].includes(C.status)?D(C):["uploading"].includes(C.status)?O(C):Ze("upload","The button clicked type is unknown.")}function H(m){m.preventDefault(),j(e.file)}function D(m){const{xhrMap:C,doChange:x,onRemoveRef:{value:re},mergedFileListRef:{value:p}}=t;Promise.resolve(re?re({file:Object.assign({},m),fileList:p,index:e.index}):!0).then(T=>{if(T===!1)return;const F=Object.assign({},m,{status:"removed"});C.delete(m.id),x(F,void 0,{remove:!0})})}function j(m){const{onDownloadRef:{value:C}}=t;Promise.resolve(C?C(Object.assign({},m)):!0).then(x=>{x!==!1&&Je(m.url,m.name)})}function O(m){const{xhrMap:C}=t,x=C.get(m.id);x==null||x.abort(),D(Object.assign({},m))}function G(m){const{onPreviewRef:{value:C}}=t;if(C)C(e.file,{event:m});else if(e.listType==="image-card"){const{value:x}=r;if(!x)return;x.click()}}const U=()=>Ie(this,void 0,void 0,function*(){const{listType:m}=e;m!=="image"&&m!=="image-card"||t.shouldUseThumbnailUrlRef.value(e.file)&&(n.value=yield t.getFileThumbnailUrlResolver(e.file))});return Xe(()=>{U()}),{mergedTheme:t.mergedThemeRef,progressStatus:i,buttonType:s,showProgress:f,disabled:t.mergedDisabledRef,showCancelButton:g,showRemoveButton:d,showDownloadButton:u,showRetryButton:l,showPreviewButton:P,mergedThumbnailUrl:b,shouldUseThumbnailUrl:t.shouldUseThumbnailUrlRef,renderIcon:t.renderIconRef,imageRef:r,handleRemoveOrCancelClick:R,handleDownloadClick:H,handleRetryClick:X,handlePreviewClick:G}},render(){const{clsPrefix:e,mergedTheme:t,listType:r,file:n,renderIcon:i}=this;let s;const f=r==="image";f||r==="image-card"?s=!this.shouldUseThumbnailUrl(n)||!this.mergedThumbnailUrl?a("span",{class:`${e}-upload-file-info__thumbnail`},i?i(n):ze(n)?a(J,{clsPrefix:e},{default:St}):a(J,{clsPrefix:e},{default:zt})):a("a",{rel:"noopener noreferer",target:"_blank",href:n.url||void 0,class:`${e}-upload-file-info__thumbnail`,onClick:this.handlePreviewClick},r==="image-card"?a(Ge,{src:this.mergedThumbnailUrl||void 0,previewSrc:n.url||void 0,alt:n.name,ref:"imageRef"}):a("img",{src:this.mergedThumbnailUrl||void 0,alt:n.name})):s=a("span",{class:`${e}-upload-file-info__thumbnail`},i?i(n):a(J,{clsPrefix:e},{default:()=>a(Lt,null)}));const d=a(At,{show:this.showProgress,percentage:n.percentage||0,status:this.progressStatus}),u=r==="text"||r==="image";return a("div",{class:[`${e}-upload-file`,`${e}-upload-file--${this.progressStatus}-status`,n.url&&n.status!=="error"&&r!=="image-card"&&`${e}-upload-file--with-url`,`${e}-upload-file--${r}-type`]},a("div",{class:`${e}-upload-file-info`},s,a("div",{class:`${e}-upload-file-info__name`},u&&(n.url&&n.status!=="error"?a("a",{rel:"noopener noreferer",target:"_blank",href:n.url||void 0,onClick:this.handlePreviewClick},n.name):a("span",{onClick:this.handlePreviewClick},n.name)),f&&d),a("div",{class:[`${e}-upload-file-info__action`,`${e}-upload-file-info__action--${r}-type`]},this.showPreviewButton?a(K,{key:"preview",quaternary:!0,type:this.buttonType,onClick:this.handlePreviewClick,theme:t.peers.Button,themeOverrides:t.peerOverrides.Button,builtinThemeOverrides:pe},{icon:()=>a(J,{clsPrefix:e},{default:()=>a(We,null)})}):null,(this.showRemoveButton||this.showCancelButton)&&!this.disabled&&a(K,{key:"cancelOrTrash",theme:t.peers.Button,themeOverrides:t.peerOverrides.Button,quaternary:!0,builtinThemeOverrides:pe,type:this.buttonType,onClick:this.handleRemoveOrCancelClick},{icon:()=>a(Ke,null,{default:()=>this.showRemoveButton?a(J,{clsPrefix:e,key:"trash"},{default:()=>a(Dt,null)}):a(J,{clsPrefix:e,key:"cancel"},{default:()=>a(Ut,null)})})}),this.showRetryButton&&!this.disabled&&a(K,{key:"retry",quaternary:!0,type:this.buttonType,onClick:this.handleRetryClick,theme:t.peers.Button,themeOverrides:t.peerOverrides.Button,builtinThemeOverrides:pe},{icon:()=>a(J,{clsPrefix:e},{default:()=>a(Pt,null)})}),this.showDownloadButton?a(K,{key:"download",quaternary:!0,type:this.buttonType,onClick:this.handleDownloadClick,theme:t.peers.Button,themeOverrides:t.peerOverrides.Button,builtinThemeOverrides:pe},{icon:()=>a(J,{clsPrefix:e},{default:()=>a(Qe,null)})}):null)),!f&&d)}}),Ae=Q({name:"UploadTrigger",props:{abstract:Boolean},slots:Object,setup(e,{slots:t}){const r=de(ae,null);r||me("upload-trigger","`n-upload-trigger` must be placed inside `n-upload`.");const{mergedClsPrefixRef:n,mergedDisabledRef:i,maxReachedRef:s,listTypeRef:f,dragOverRef:g,openOpenFileDialog:d,draggerInsideRef:u,handleFileAddition:l,mergedDirectoryDndRef:b,triggerClassRef:P,triggerStyleRef:X}=r,R=L(()=>f.value==="image-card");function H(){i.value||s.value||d()}function D(U){U.preventDefault(),g.value=!0}function j(U){U.preventDefault(),g.value=!0}function O(U){U.preventDefault(),g.value=!1}function G(U){var m;if(U.preventDefault(),!u.value||i.value||s.value){g.value=!1;return}const C=(m=U.dataTransfer)===null||m===void 0?void 0:m.items;C!=null&&C.length?qt(Array.from(C).map(x=>x.webkitGetAsEntry()),b.value).then(x=>{l(x)}).finally(()=>{g.value=!1}):g.value=!1}return()=>{var U;const{value:m}=n;return e.abstract?(U=t.default)===null||U===void 0?void 0:U.call(t,{handleClick:H,handleDrop:G,handleDragOver:D,handleDragEnter:j,handleDragLeave:O}):a("div",{class:[`${m}-upload-trigger`,(i.value||s.value)&&`${m}-upload-trigger--disabled`,R.value&&`${m}-upload-trigger--image-card`,P.value],style:X.value,onClick:H,onDrop:G,onDragover:D,onDragenter:j,onDragleave:O},R.value?a(jt,null,{default:()=>Ye(t.default,()=>[a(J,{clsPrefix:m},{default:()=>a(et,null)})])}):t)}}}),Xt=Q({name:"UploadFileList",setup(e,{slots:t}){const r=de(ae,null);r||me("upload-file-list","`n-upload-file-list` must be placed inside `n-upload`.");const{abstractRef:n,mergedClsPrefixRef:i,listTypeRef:s,mergedFileListRef:f,fileListClassRef:g,fileListStyleRef:d,cssVarsRef:u,themeClassRef:l,maxReachedRef:b,showTriggerRef:P,imageGroupPropsRef:X}=r,R=L(()=>s.value==="image-card"),H=()=>f.value.map((j,O)=>a(Vt,{clsPrefix:i.value,key:j.id,file:j,index:O,listType:s.value})),D=()=>R.value?a(tt,Object.assign({},X.value),{default:H}):a(Ue,{group:!0},{default:H});return()=>{const{value:j}=i,{value:O}=n;return a("div",{class:[`${j}-upload-file-list`,R.value&&`${j}-upload-file-list--grid`,O?l==null?void 0:l.value:void 0,g.value],style:[O&&u?u.value:"",d.value]},D(),P.value&&!b.value&&R.value&&a(Ae,null,t))}}});var Le=globalThis&&globalThis.__awaiter||function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(f){f(s)})}return new(r||(r=Promise))(function(s,f){function g(l){try{u(n.next(l))}catch(b){f(b)}}function d(l){try{u(n.throw(l))}catch(b){f(b)}}function u(l){l.done?s(l.value):i(l.value).then(g,d)}u((n=n.apply(e,t||[])).next())})};function Gt(e,t,r){const{doChange:n,xhrMap:i}=e;let s=0;function f(d){var u;let l=Object.assign({},t,{status:"error",percentage:s});i.delete(t.id),l=se(((u=e.onError)===null||u===void 0?void 0:u.call(e,{file:l,event:d}))||l),n(l,d)}function g(d){var u;if(e.isErrorState){if(e.isErrorState(r)){f(d);return}}else if(r.status<200||r.status>=300){f(d);return}let l=Object.assign({},t,{status:"finished",percentage:s});i.delete(t.id),l=se(((u=e.onFinish)===null||u===void 0?void 0:u.call(e,{file:l,event:d}))||l),n(l,d)}return{handleXHRLoad:g,handleXHRError:f,handleXHRAbort(d){const u=Object.assign({},t,{status:"removed",file:null,percentage:s});i.delete(t.id),n(u,d)},handleXHRProgress(d){const u=Object.assign({},t,{status:"uploading"});if(d.lengthComputable){const l=Math.ceil(d.loaded/d.total*100);u.percentage=l,s=l}n(u,d)}}}function Wt(e){const{inst:t,file:r,data:n,headers:i,withCredentials:s,action:f,customRequest:g}=e,{doChange:d}=e.inst;let u=0;g({file:r,data:n,headers:i,withCredentials:s,action:f,onProgress(l){const b=Object.assign({},r,{status:"uploading"}),P=l.percent;b.percentage=P,u=P,d(b)},onFinish(){var l;let b=Object.assign({},r,{status:"finished",percentage:u});b=se(((l=t.onFinish)===null||l===void 0?void 0:l.call(t,{file:b}))||b),d(b)},onError(){var l;let b=Object.assign({},r,{status:"error",percentage:u});b=se(((l=t.onError)===null||l===void 0?void 0:l.call(t,{file:b}))||b),d(b)}})}function Kt(e,t,r){const n=Gt(e,t,r);r.onabort=n.handleXHRAbort,r.onerror=n.handleXHRError,r.onload=n.handleXHRLoad,r.upload&&(r.upload.onprogress=n.handleXHRProgress)}function $e(e,t){return typeof e=="function"?e({file:t}):e||{}}function Qt(e,t,r){const n=$e(t,r);n&&Object.keys(n).forEach(i=>{e.setRequestHeader(i,n[i])})}function Zt(e,t,r){const n=$e(t,r);n&&Object.keys(n).forEach(i=>{e.append(i,n[i])})}function Jt(e,t,r,{method:n,action:i,withCredentials:s,responseType:f,headers:g,data:d}){const u=new XMLHttpRequest;u.responseType=f,e.xhrMap.set(r.id,u),u.withCredentials=s;const l=new FormData;if(Zt(l,d,r),r.file!==null&&l.append(t,r.file),Kt(e,r,u),i!==void 0){u.open(n.toUpperCase(),i),Qt(u,g,r),u.send(l);const b=Object.assign({},r,{status:"uploading"});e.doChange(b)}}const Yt=Object.assign(Object.assign({},Pe.props),{name:{type:String,default:"file"},accept:String,action:String,customRequest:Function,directory:Boolean,directoryDnd:{type:Boolean,default:void 0},method:{type:String,default:"POST"},multiple:Boolean,showFileList:{type:Boolean,default:!0},data:[Object,Function],headers:[Object,Function],withCredentials:Boolean,responseType:{type:String,default:""},disabled:{type:Boolean,default:void 0},onChange:Function,onRemove:Function,onFinish:Function,onError:Function,onRetry:Function,onBeforeUpload:Function,isErrorState:Function,onDownload:Function,defaultUpload:{type:Boolean,default:!0},fileList:Array,"onUpdate:fileList":[Function,Array],onUpdateFileList:[Function,Array],fileListClass:String,fileListStyle:[String,Object],defaultFileList:{type:Array,default:()=>[]},showCancelButton:{type:Boolean,default:!0},showRemoveButton:{type:Boolean,default:!0},showDownloadButton:Boolean,showRetryButton:{type:Boolean,default:!0},showPreviewButton:{type:Boolean,default:!0},listType:{type:String,default:"text"},onPreview:Function,shouldUseThumbnailUrl:{type:Function,default:e=>Nt?ze(e):!1},createThumbnailUrl:Function,abstract:Boolean,max:Number,showTrigger:{type:Boolean,default:!0},imageGroupProps:Object,inputProps:Object,triggerClass:String,triggerStyle:[String,Object],renderIcon:Function}),en=Q({name:"Upload",props:Yt,setup(e){e.abstract&&e.listType==="image-card"&&me("upload","when the list-type is image-card, abstract is not supported.");const{mergedClsPrefixRef:t,inlineThemeDisabled:r}=nt(e),n=Pe("Upload","-upload",Ot,st,e,t),i=rt(e),s=A(e.defaultFileList),f=I(e,"fileList"),g=A(null),d={value:!1},u=A(!1),l=new Map,b=ot(f,s),P=L(()=>b.value.map(se)),X=L(()=>{const{max:p}=e;return p!==void 0?P.value.length>=p:!1});function R(){var p;(p=g.value)===null||p===void 0||p.click()}function H(p){const T=p.target;G(T.files?Array.from(T.files).map(F=>({file:F,entry:null,source:"input"})):null,p),T.value=""}function D(p){const{"onUpdate:fileList":T,onUpdateFileList:F}=e;T&&Ce(T,p),F&&Ce(F,p),s.value=p}const j=L(()=>e.multiple||e.directory),O=(p,T,F={append:!1,remove:!1})=>{const{append:q,remove:E}=F,S=Array.from(P.value),z=S.findIndex(B=>B.id===p.id);if(q||E||~z){q?S.push(p):E?S.splice(z,1):S.splice(z,1,p);const{onChange:B}=e;B&&B({file:p,fileList:S,event:T}),D(S)}};function G(p,T){if(!p||p.length===0)return;const{onBeforeUpload:F}=e;p=j.value?p:[p[0]];const{max:q,accept:E}=e;p=p.filter(({file:z,source:B})=>B==="dnd"&&(E!=null&&E.trim())?Ht(z.name,z.type,E):!0),q&&(p=p.slice(0,q-P.value.length));const S=Re();Promise.all(p.map(z=>Le(this,[z],void 0,function*({file:B,entry:y}){var o;const c={id:Re(),batchId:S,name:B.name,status:"pending",percentage:0,file:B,url:null,type:B.type,thumbnailUrl:null,fullPath:(o=y==null?void 0:y.fullPath)!==null&&o!==void 0?o:`/${B.webkitRelativePath||B.name}`};return!F||(yield F({file:c,fileList:P.value}))!==!1?c:null}))).then(z=>Le(this,void 0,void 0,function*(){let B=Promise.resolve();z.forEach(y=>{B=B.then(dt).then(()=>{y&&O(y,T,{append:!0})})}),yield B})).then(()=>{e.defaultUpload&&U()})}function U(p){const{method:T,action:F,withCredentials:q,headers:E,data:S,name:z}=e,B=p!==void 0?P.value.filter(o=>o.id===p):P.value,y=p!==void 0;B.forEach(o=>{const{status:c}=o;(c==="pending"||c==="error"&&y)&&(e.customRequest?Wt({inst:{doChange:O,xhrMap:l,onFinish:e.onFinish,onError:e.onError},file:o,action:F,withCredentials:q,headers:E,data:S,customRequest:e.customRequest}):Jt({doChange:O,xhrMap:l,onFinish:e.onFinish,onError:e.onError,isErrorState:e.isErrorState},z,o,{method:T,action:F,withCredentials:q,responseType:e.responseType,headers:E,data:S}))})}function m(p){var T;if(p.thumbnailUrl)return p.thumbnailUrl;const{createThumbnailUrl:F}=e;return F?(T=F(p.file,p))!==null&&T!==void 0?T:p.url||"":p.url?p.url:p.file?$t(p.file):""}const C=L(()=>{const{common:{cubicBezierEaseInOut:p},self:{draggerColor:T,draggerBorder:F,draggerBorderHover:q,itemColorHover:E,itemColorHoverError:S,itemTextColorError:z,itemTextColorSuccess:B,itemTextColor:y,itemIconColor:o,itemDisabledOpacity:c,lineHeight:M,borderRadius:te,fontSize:ne,itemBorderImageCardError:he,itemBorderImageCard:ve}}=n.value;return{"--n-bezier":p,"--n-border-radius":te,"--n-dragger-border":F,"--n-dragger-border-hover":q,"--n-dragger-color":T,"--n-font-size":ne,"--n-item-color-hover":E,"--n-item-color-hover-error":S,"--n-item-disabled-opacity":c,"--n-item-icon-color":o,"--n-item-text-color":y,"--n-item-text-color-error":z,"--n-item-text-color-success":B,"--n-line-height":M,"--n-item-border-image-card-error":he,"--n-item-border-image-card":ve}}),x=r?at("upload",void 0,C,e):void 0;lt(ae,{mergedClsPrefixRef:t,mergedThemeRef:n,showCancelButtonRef:I(e,"showCancelButton"),showDownloadButtonRef:I(e,"showDownloadButton"),showRemoveButtonRef:I(e,"showRemoveButton"),showRetryButtonRef:I(e,"showRetryButton"),onRemoveRef:I(e,"onRemove"),onDownloadRef:I(e,"onDownload"),mergedFileListRef:P,triggerClassRef:I(e,"triggerClass"),triggerStyleRef:I(e,"triggerStyle"),shouldUseThumbnailUrlRef:I(e,"shouldUseThumbnailUrl"),renderIconRef:I(e,"renderIcon"),xhrMap:l,submit:U,doChange:O,showPreviewButtonRef:I(e,"showPreviewButton"),onPreviewRef:I(e,"onPreview"),getFileThumbnailUrlResolver:m,listTypeRef:I(e,"listType"),dragOverRef:u,openOpenFileDialog:R,draggerInsideRef:d,handleFileAddition:G,mergedDisabledRef:i.mergedDisabledRef,maxReachedRef:X,fileListClassRef:I(e,"fileListClass"),fileListStyleRef:I(e,"fileListStyle"),abstractRef:I(e,"abstract"),acceptRef:I(e,"accept"),cssVarsRef:r?void 0:C,themeClassRef:x==null?void 0:x.themeClass,onRender:x==null?void 0:x.onRender,showTriggerRef:I(e,"showTrigger"),imageGroupPropsRef:I(e,"imageGroupProps"),mergedDirectoryDndRef:L(()=>{var p;return(p=e.directoryDnd)!==null&&p!==void 0?p:e.directory}),onRetryRef:I(e,"onRetry")});const re={clear:()=>{s.value=[]},submit:U,openOpenFileDialog:R};return Object.assign({mergedClsPrefix:t,draggerInsideRef:d,inputElRef:g,mergedTheme:n,dragOver:u,mergedMultiple:j,cssVars:r?void 0:C,themeClass:x==null?void 0:x.themeClass,onRender:x==null?void 0:x.onRender,handleFileInputChange:H},re)},render(){var e,t;const{draggerInsideRef:r,mergedClsPrefix:n,$slots:i,directory:s,onRender:f}=this;if(i.default&&!this.abstract){const d=i.default()[0];!((e=d==null?void 0:d.type)===null||e===void 0)&&e[je]&&(r.value=!0)}const g=a("input",Object.assign({},this.inputProps,{ref:"inputElRef",type:"file",class:`${n}-upload-file-input`,accept:this.accept,multiple:this.mergedMultiple,onChange:this.handleFileInputChange,webkitdirectory:s||void 0,directory:s||void 0}));return this.abstract?a(be,null,(t=i.default)===null||t===void 0?void 0:t.call(i),a(it,{to:"body"},g)):(f==null||f(),a("div",{class:[`${n}-upload`,r.value&&`${n}-upload--dragger-inside`,this.dragOver&&`${n}-upload--drag-over`,this.themeClass],style:this.cssVars},g,this.showTrigger&&this.listType!=="image-card"&&a(Ae,null,i),this.showFileList&&a(Xt,null,i)))}}),tn={class:"m-auto flex h-14 max-w-screen-4xl items-center justify-between px-4"},nn={class:"flex min-w-0 flex-1 items-center space-x-2 overflow-hidden pr-2"},rn=Q({__name:"header",setup(e){const t=De();return(r,n)=>(W(),oe("div",tn,[k("div",nn,[k("button",{onClick:n[0]||(n[0]=i=>h(t).go(-1))},[v(h(Y),{class:"text-xl",icon:"ri:arrow-left-s-line"})]),n[1]||(n[1]=k("h2",{class:"text-base font-bold"}," 我的自定义工作台 ",-1))]),n[2]||(n[2]=k("div",{class:"flex items-center space-x-2"},null,-1))]))}}),on={class:"w-full flex justify-center"},an={class:"p-6 max-w-screen-4xl px-4 w-full"},ln={class:"flex flex-col space-y-3 justify-between sm:flex-row sm:space-y-0"},sn={class:"sm:w-full md:w-[300px] sm:mb-3 2xl:w-[380px]"},dn={class:"mt-10 grid grid-cols-1 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3 2xl:grid-cols-4 gap-5"},un=["onClick"],cn={class:"w-full h-16 flex items-center mb-3"},fn={class:"w-14 h-14 flex justify-center items-center rounded-md shadow-md mr-5 border border-[#00000014]"},pn=["src"],gn={class:"text-base font-bold mb-1 text-base text-[#333] dark:text-[#ffffff85]"},mn={class:"w-full text-[#999999] text-xs min-h-[40px]"},hn={class:"w-full flex justify-between mt-3"},vn={class:"p-5 bg-white rounded dark:bg-slate-800"},bn={class:"font-bold text-base"},yn={class:"pt-5 mt-6"},wn=Q({__name:"main",setup(e){const t=Bt(),r=A(""),n=A(!1),i=A(!1),s=A([]),f=A(null),g=A(0),d=A(!1),u=L(()=>g.value===0?"创建我的个人应用":"更新我的个人应用"),l=L(()=>g.value===0?"创建专属应用":"更新个人应用"),b=L(()=>r.value?t.mineApps.filter(y=>y.appName.includes(r.value)):t.mineApps),P=A("/api/upload/file"),X=()=>({catId:null,name:null,preset:null,des:null,demoData:"",coverImg:"",public:!1}),R=A(X()),H={catId:[{required:!0,message:"请选择分类"}],name:[{required:!0,message:"请输入应用名称",trigger:"blur"},{min:2,max:30,message:"长度应为2到10个字符之间",trigger:"blur"}],preset:[{required:!0,message:"请输入预设prompt",trigger:"blur"},{min:6,max:1200,message:"长度应为6到1200个字符之间",trigger:"blur"}],des:[{required:!0,message:"请输入简短的应用描述",trigger:"blur"},{max:50,message:"长度应为0到50个字符之间",trigger:"blur"}],demoData:[{required:!0,message:"请输入示例数据、按回车换行表示新增一条",trigger:"blur"},{max:100,message:"长度应为0到100个字符之间",trigger:"blur"}],coverImg:[{required:!0,message:"请上传应用Logo",trigger:"change"}],public:[{required:!0,message:"请选择是否公开"}]};Oe();const D=ut(),j=De(),O=A([]),G=A(null);function U(y){r.value=y}async function m(y){const o=await bt(),{modelMaps:c}=o.data;if(!c[1])return D.warning("管理员未配置特定应用模型、请联系管理员配置~");j.push({path:"/chat",query:{appId:y.appId}})}async function C(y){y.loading=!0;try{const o=await Ct({appId:y.appId});D.success(o.data),await t.queryMineApps(),y.loading=!1}catch{y.loading=!1}}async function x(){const y=await Tt();O.value=y.data.rows}async function re(y){const o=await kt({id:y.appId});D.success(o.data),t.queryMineApps()}async function p(y){if(!y.length)G.value=null;else{const o=y[0].file;G.value=o;const c=new FormData;c.append("file",o);const M=await yt.post(P.value,c,{headers:{"Content-Type":"multipart/form-data"}});M.data.data?R.value.coverImg=M.data.data:D.error("上传图片失败、请检查后再试试吧！")}}function T({file:y,fileList:o}){return new Promise((c,M)=>{const{size:te,type:ne}=y.file;if(ne!=="image/png"&&ne!=="image/jpg"&&ne!=="image/jpeg")return D.error("只能上传png/jpg/jpeg格式的图片"),c(!1);if(te>300*1024)return D.error("图片大小不能超过300k"),c(!1);c(!0)})}ct(()=>{!b.value.length&&t.queryMineApps()});function F(){i.value=!0,x()}function q(){}function E(){S()}function S(){g.value=0,d.value=!1,R.value=X()}async function z(y){await x();const{catId:o,appName:c,preset:M,appDes:te,demoData:ne,coverImg:he,public:ve}=y;Object.assign(R.value,{catId:o,name:c,preset:M,des:te,demoData:ne,coverImg:he,public:ve}),g.value=y.appId,i.value=!0,d.value=y.public}function B(){var y;(y=f.value)==null||y.validate(async o=>{if(!o){const c=R.value;g.value&&(c.appId=g.value);const M=await _t(c),te=g.value?"个人应用修改完成！":"个人应用创建完成！";M.success&&D.success(te),t.queryMineApps(),S(),i.value=!1}})}return(y,o)=>(W(),oe(be,null,[k("div",on,[k("div",an,[k("div",ln,[k("div",sn,[v(h(le),{modelValue:r.value,"onUpdate:modelValue":o[0]||(o[0]=c=>r.value=c),type:"text",placeholder:`您一共收录了${b.value.length}个应用(关键词过滤)`,onInput:U},null,8,["modelValue","placeholder"])]),v(h(ke),null,{default:w(()=>[v(h(K),{onClick:F},{icon:w(()=>[v(h(Y),{icon:"gridicons:create"})]),default:w(()=>[o[12]||(o[12]=Z(" 创建自定义应用 "))]),_:1}),v(h(K),{type:"primary",onClick:o[1]||(o[1]=c=>h(j).push("/app-store"))},{icon:w(()=>[v(h(Y),{icon:"ri:add-line"})]),default:w(()=>[o[13]||(o[13]=Z(" 前往广场添加应用 "))]),_:1})]),_:1})]),k("div",dn,[(W(!0),oe(be,null,ft(b.value,c=>(W(),oe("div",{key:c.id,class:"card relative custom-card cursor-pointer border border-[#e0e0e0] dark:border-neutral-800 p-4 pt-2 border rounded-md flex flex-col justify-center items-center hover:bg-neutral-100 dark:hover:bg-[#24272e] select-none",onClick:M=>m(c)},[k("div",cn,[k("span",fn,[k("img",{src:c.coverImg,class:"w-8 h-8 mb-1",alt:""},null,8,pn)]),k("span",gn,ue(c.appName),1)]),k("p",mn,ue(c.appDes),1),k("div",hn,[c.appRole==="system"||c.public?(W(),ce(h(Te),{key:0,placement:"bottom",onPositiveClick:ie(M=>C(c),["stop"])},{trigger:w(()=>[v(h(K),{size:"tiny",ghost:"",loading:c.loading,onClick:o[2]||(o[2]=ie(()=>{},["stop"]))},{icon:w(()=>[v(h(Y),{icon:"clarity:favorite-line",class:"text-base"})]),default:w(()=>[o[14]||(o[14]=Z(" 取消收藏 "))]),_:2},1032,["loading"])]),default:w(()=>[o[15]||(o[15]=Z(" 确认取消收藏该应用吗？ "))]),_:2},1032,["onPositiveClick"])):fe("",!0),v(h(ke),null,{default:w(()=>[c.appRole==="user"&&!c.public?(W(),ce(h(Te),{key:0,placement:"bottom",onPositiveClick:ie(M=>re(c),["stop"])},{trigger:w(()=>[v(h(K),{size:"tiny",ghost:"",loading:c.loading,onClick:o[3]||(o[3]=ie(()=>{},["stop"]))},{icon:w(()=>[v(h(Y),{icon:"mdi-light:delete",class:"text-base"})]),default:w(()=>[o[16]||(o[16]=Z(" 删除应用 "))]),_:2},1032,["loading"])]),default:w(()=>[o[17]||(o[17]=Z(" 确认移除创建的应用吗？ "))]),_:2},1032,["onPositiveClick"])):fe("",!0),c.appRole==="user"&&!c.public?(W(),ce(h(K),{key:1,size:"tiny",ghost:"",loading:c.loading,onClick:ie(M=>z(c),["stop"])},{icon:w(()=>[v(h(Y),{icon:"mdi-light:delete",class:"text-base"})]),default:w(()=>[o[18]||(o[18]=Z(" 编辑应用 "))]),_:2},1032,["loading","onClick"])):fe("",!0)]),_:2},1024)]),v(h(Y),{icon:"codicon:run-all",class:"run-icon text-xl text-[#5A91FC] absolute right-3 bottom-3"}),c.status===3?(W(),ce(h(Y),{key:0,icon:"icon-park-twotone:mark",class:"text-xl text-[#5A91FC] absolute right-3 top-3"})):fe("",!0)],8,un))),128))])])]),v(h(vt),{show:i.value,title:"创建",style:{width:"90%","max-width":"640px"},"mask-closable":!1,"on-after-enter":q,"on-after-leave":E},{default:w(()=>[k("div",vn,[k("div",{class:"absolute top-4 left-5 cursor-pointer z-30",onClick:o[4]||(o[4]=c=>i.value=!1)},[k("span",bn,ue(l.value),1)]),k("div",{class:"absolute top-3 right-3 cursor-pointer z-30",onClick:o[5]||(o[5]=c=>i.value=!1)},[v(h(pt),{size:"20",color:"#0e7a0d"},{default:w(()=>[v(h(gt))]),_:1})]),k("div",yn,[v(h(mt),{ref_key:"formRef",ref:f,model:R.value,rules:H,"label-placement":"left","label-width":"auto","require-mark-placement":"right-hanging",style:{maxWidth:"640px"}},{default:w(()=>[v(h(ee),{label:"应用分类",path:"catId"},{default:w(()=>[v(h(Ft),{value:R.value.catId,"onUpdate:value":o[6]||(o[6]=c=>R.value.catId=c),clearable:"",size:"small","label-field":"name",placeholder:"请输入您的应用分类","value-field":"id",options:O.value},null,8,["value","options"])]),_:1}),v(h(ee),{label:"应用名称",path:"name"},{default:w(()=>[v(h(le),{value:R.value.name,"onUpdate:value":o[7]||(o[7]=c=>R.value.name=c),placeholder:"请输入您的应用名称",type:"name",maxlength:30,"show-name-on":"click",tabindex:"0"},null,8,["value"])]),_:1}),v(h(ee),{label:"预设指令",path:"preset"},{default:w(()=>[v(h(le),{value:R.value.preset,"onUpdate:value":o[8]||(o[8]=c=>R.value.preset=c),max:255,autosize:{minRows:3,maxRows:10},type:"textarea",placeholder:"请填写prompt预设指令（核心）"},null,8,["value"])]),_:1}),v(h(ee),{label:"应用描述",path:"des"},{default:w(()=>[v(h(le),{value:R.value.des,"onUpdate:value":o[9]||(o[9]=c=>R.value.des=c),autosize:{minRows:3,maxRows:10},type:"textarea",placeholder:"请对你的应用做以简要的描述以便于大家认识它！"},null,8,["value"])]),_:1}),v(h(ee),{label:"示例内容",path:"demoData"},{default:w(()=>[v(h(le),{value:R.value.demoData,"onUpdate:value":o[10]||(o[10]=c=>R.value.demoData=c),autosize:{minRows:3,maxRows:10},type:"textarea",placeholder:"请填写一个示例、方便快速告诉别人如何使用、每点击回车换行一次则是新增一条示例！"},null,8,["value"])]),_:1}),v(h(ee),{label:"应用Logo",path:"coverImg"},{default:w(()=>[v(h(en),{"on-update:file-list":p,"on-before-upload":T,max:1,"default-upload":!1,action:P.value,"default-file-list":s.value,"list-type":"image-card"},{default:w(()=>o[19]||(o[19]=[Z(" 点击上传 ")])),_:1},8,["action","default-file-list"])]),_:1}),v(h(ee),{label:"是否共享",path:"public"},{default:w(()=>[v(h(It),{value:R.value.public,"onUpdate:value":o[11]||(o[11]=c=>R.value.public=c),disabled:d.value},null,8,["value","disabled"]),v(h(ht),{placement:"top-start",trigger:"hover"},{trigger:w(()=>[v(h(Y),{icon:"ri:error-warning-line",class:"text-base ml-3 cursor-pointer"})]),default:w(()=>[o[20]||(o[20]=k("p",null,"Tips: 请知悉 ",-1)),o[21]||(o[21]=k("p",null,"选择共享提交之后审核状态将无法编辑应用",-1)),o[22]||(o[22]=k("p",null,"审核通过的应用将会在应用广场公开展示",-1)),o[23]||(o[23]=k("p",null,"管理审核通过后将会赠送一定的站内额度奖励用户",-1)),o[24]||(o[24]=k("p",null,"一旦提交处于审核中、您将不能再编辑此应用",-1))]),_:1})]),_:1}),v(h(ee),{class:"mt-3"},{default:w(()=>[v(h(K),{block:"",type:"primary",disabled:n.value,loading:n.value,onClick:B},{default:w(()=>[Z(ue(u.value),1)]),_:1},8,["disabled","loading"])]),_:1})]),_:1},8,["model"])])])]),_:1},8,["show"])],64))}});const xn={class:"flex h-full w-full flex-col bg-white dark:bg-[#111114]"},Rn={class:"sticky left-0 right-0 top-0 z-40 border-b bg-white dark:border-b-neutral-800 dark:bg-[#111114]"},Cn=Q({__name:"index",setup(e){return(t,r)=>(W(),oe("div",xn,[k("header",Rn,[v(rn)]),v(wn)]))}}),kn={class:"h-full dark:bg-[#24272e] transition-all"},On=Q({__name:"role",setup(e){const t=wt(),{isMobile:r}=Oe(),n=L(()=>t.siderCollapsed),i=L(()=>r.value?["rounded-none","shadow-none"]:["rounded-md","shadow-md","dark:border-neutral-800"]),s=L(()=>["h-full",{"pl-[260px]":!r.value&&!n.value}]);return(f,g)=>(W(),oe("div",kn,[k("div",{class:_e(["h-full overflow-hidden",i.value])},[v(h(Rt),{class:_e(["z-40 transition",s.value]),"has-sider":""},{default:w(()=>[v(Ee),v(h(xt),{class:"h-full"},{default:w(()=>[v(Cn)]),_:1})]),_:1},8,["class"])],2)]))}});export{On as default};
