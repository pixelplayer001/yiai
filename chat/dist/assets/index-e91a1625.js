import{d as E,C as J,u as O,e as c,f as ee,b as te,r as m,w as W,h as G,o as i,c as y,a as n,t as v,q as a,E as Q,m as P,l as r,k as o,_ as g,I as A,H as I,s as L,A as se,F as U,j as D,a3 as ae,p as ne,bU as le,a$ as oe,bV as re,D as ie,a5 as ce,ao as de}from"./index-768c9aff.js";import{e as ue,a as fe,d as pe}from"./appStore-41e2c55e.js";import{u as me}from"./index-243e82d0.js";const he={class:"relative flex justify-center"},xe={class:"w-full flex flex-col items-center max-w-screen-4xl p-4 lg:p-6"},ve={class:"mb-2 mt-8 text-center text-3xl font-extrabold text-[#5A91FC] dark:text-[var(--primary-color-dark)] lg:text-4xl"},ge={class:"flex justify-center text-base text-small mb-4 mt-4 text-center text-gray-700 dark:text-gray-300 lg:text-lg"},ye={class:"mt-3 flex flex-col justify-center w-full items-center overflow-hidden"},_e={class:"sticky left-0 mt-3 right-0 top-0 flex max-w-screen-4xl items-center z-50 w-full bg-[#f3f4fc] dark:bg-[#101014]"},we={class:"flex mt-3 items-center space-x-3 whitespace-nowrap"},be=["onClick"],ke={class:"w-full flex items-center"},Ce={class:"w-16 h-16 flex justify-center items-center rounded-md shadow-md mr-5 border border-[#00000014]"},Ae=["src"],Ie={class:"css-0 mb-2 line-clamp-1 break-all text-lg font-semibold tracking-wide text-[#333] dark:text-[#ffffff]"},Me={class:"line-clamp-2 break-all overflow-hidden text-gray-400 w-full text-xs"},je={class:"w-full flex justify-between mt-1"},$e=E({__name:"index",emits:["run-app"],setup(K,{emit:B}){var T;const{isMobile:M}=J(),x=O(),u=((T=x.globalConfig)==null?void 0:T.siteRobotName)||"AI Tools",j=c(()=>x.globalConfig.appMenuHeaderTips);c(()=>x.globalConfig.appMenuHeaderBgUrl);const f=ee(),_=te(),w=me(),h=m(""),$=m([]),q=c(()=>w.catId),l=m([]),p=m([]),b=c(()=>w.mineApps),S=m([]),d=m(0);function N(e){return b.value.some(t=>t.appId===e.id)}async function R(){var t;const e=await ue();l.value=(t=e==null?void 0:e.data)==null?void 0:t.rows.map(s=>(s.loading=!1,s)),p.value=l.value}const z=c(()=>h.value?l.value.filter(e=>e.name.includes(h.value)):d.value===0?l.value:l.value.filter(e=>e.catId===d.value));async function k(e){e.loading=!0;try{const t=await fe({appId:e.id});_.success(t.data),await w.queryMineApps(),e.loading=!1}catch{e.loading=!1}}async function C(e){const t=await oe(),{modelMaps:s}=t.data;if(!s[1])return _.warning("管理员未配置特定应用模型、请联系管理员配置~");f.push({path:"/chat",query:{appId:e.id}})}async function X(){var s;const e=await pe(),t={id:0,name:"全部分类"};S.value=[t,...(s=e==null?void 0:e.data)==null?void 0:s.rows]}async function Y(){const e=await re({menuPlatform:1});e.success&&($.value=e.data)}function H(e){return $.value.filter(t=>t.menuPath===e).length}function Z(e){d.value=e}W(q,e=>{e?p.value=l.value.filter(t=>t.catId===e):p.value=l.value});function V(e){f.push(e)}return G(()=>{X(),R(),Y()}),(e,t)=>(i(),y("div",he,[n("div",xe,[n("div",ve,v(a(u)),1),n("div",ge,v(j.value||"探索无限可能，与AI一同开创智慧未来！"),1),n("div",{class:Q(["w-full flex justify-center my-3",a(M)?"space-x-1":"space-x-5"])},[H("/chat")?(i(),P(a(I),{key:0,trong:"",secondary:"",type:"primary",round:"",onClick:t[0]||(t[0]=s=>V("/chat"))},{default:r(()=>[o(a(g),{icon:"carbon:chat",class:"text-2xl mr-2"}),t[4]||(t[4]=A(" AI 对话 "))]),_:1})):L("",!0),H("/midjourney")?(i(),P(a(I),{key:1,trong:"",secondary:"",type:"primary",round:"",onClick:t[1]||(t[1]=s=>V("/midjourney"))},{default:r(()=>[o(a(g),{icon:"ph:pencil-slash-duotone",class:"text-2xl mr-2"}),t[5]||(t[5]=A(" AI 绘画 "))]),_:1})):L("",!0),H("/mind")?(i(),P(a(I),{key:2,trong:"",secondary:"",type:"primary",round:"",onClick:t[2]||(t[2]=s=>V("/mind"))},{default:r(()=>[o(a(g),{icon:"ri:mind-map",class:"text-2xl mr-2"}),t[6]||(t[6]=A(" 思维导图 "))]),_:1})):L("",!0)],2),n("div",ye,[o(a(se),{value:h.value,"onUpdate:value":t[3]||(t[3]=s=>h.value=s),class:"!max-w-screen-4xl",round:"",placeholder:"搜索应用名称、快速查找应用..."},{suffix:r(()=>[o(a(g),{icon:"iconamoon:search-thin",class:"text-base"})]),_:1},8,["value"])]),n("div",_e,[o(a(ae),{"x-scrollable":"",class:"!h-[60px]"},{default:r(()=>[n("div",we,[(i(!0),y(U,null,D(S.value,(s,F)=>(i(),P(a(I),{size:"small",round:"",type:d.value===s.id?"primary":"default",key:F,onClick:Le=>Z(s.id)},{default:r(()=>[A(v(s.name),1)]),_:2},1032,["type","onClick"]))),128))])]),_:1})]),o(a(le),{delay:0,y:50,duration:350},{default:r(()=>[n("div",{class:Q(["w-full grid grid-cols-1 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-6 3xl:grid-cols-6 gap-6 py-4",a(M)?"px-4":""])},[(i(!0),y(U,null,D(z.value,s=>(i(),y("div",{key:s.id,class:"bg-white dark:bg-[#18181c] custom-card cursor-pointer space-y-2 border-[#e0e0e0] dark:border-neutral-800 p-4 pt-4 border rounded-md flex flex-col justify-center items-center hover:bg-neutral-100 dark:hover:bg-[#24272e] select-none min-h-[150px]",onClick:F=>C(s)},[n("div",ke,[n("span",Ce,[n("img",{src:s.coverImg,class:"w-14 h-14 mb-1",alt:""},null,8,Ae)]),n("span",Ie,v(s.name),1)]),n("p",Me,v(s.des),1),n("div",je,[o(a(I),{class:"join",size:"tiny",ghost:"",disabled:s.loading,onClick:ne(F=>k(s),["stop"])},{icon:r(()=>[o(a(g),{icon:N(s)?"iconamoon:sign-minus-bold":"mi:add",class:"text-base"},null,8,["icon"])]),default:r(()=>[A(" "+v(N(s)?"取消收藏":"加入个人工作台"),1)]),_:2},1032,["disabled","onClick"]),o(a(g),{icon:"codicon:run-all",class:"run-icon text-xl text-[#5A91FC]"})])],8,be))),128))],2)]),_:1})])]))}});const Se={class:"h-full dark:bg-[#24272e] transition-all"},Ne={key:0,class:"h-full"},Pe={class:"flex flex-col w-full"},ze=E({__name:"index",setup(K){const B=ie();ce();const M=O(),{isMobile:x}=J();c(()=>M.isLogin),c(()=>B.siderCollapsed);const u=m(null),j=c(()=>B.theme);let f=null;const _=m({});function w(l){_.value=l}W(j,()=>h());function h(){const{innerWidth:l,innerHeight:p}=window;u.value.width=l-0,u.value.height=p-0,f=u.value.getContext("2d");const[b,S]=[u.value.width,u.value.height],d=20,N=Math.floor(b/d),R=Math.floor(S/d),z=j.value==="light"?"#00000080":"#ffffff66";for(let k=0;k<R;k++)for(let C=0;C<N;C++)$({x:C*d+20,y:k*d+20},z)}function $({x:l,y:p},b){f.fillStyle=b,f.beginPath(),f.rect(l,p,1,1),f.fill()}c(()=>Object.keys(_.value).length>0);const q=c(()=>x.value?["rounded-none","shadow-none"]:["rounded-md","shadow-md","dark:border-neutral-800"]);return G(()=>h()),(l,p)=>(i(),y("div",Se,[n("div",{class:Q(["h-full overflow-hidden flex flex-col",q.value])},[o(a(de),{class:"transition flex-1 h-full w-full","has-sider":""},{default:r(()=>[n("canvas",{ref_key:"grid",ref:u,class:"absolute left-0 right-0 bottom-0 top-0 z-0 bg-[#f3f4fc] dark:bg-[#101014]"},null,512),a(x)?L("",!0):(i(),y("div",Ne)),n("div",Pe,[o($e,{onRunApp:w})])]),_:1})],2)]))}});export{ze as default};
