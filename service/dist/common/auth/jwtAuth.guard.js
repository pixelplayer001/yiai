'use strict';const _0x451d65=_0x1ac2;(function(_0x4dd87b,_0x5b0778){const _0x11efb5=_0x1ac2,_0x1289ce=_0x4dd87b();while(!![]){try{const _0x5c42be=parseInt(_0x11efb5(0x207))/0x1+parseInt(_0x11efb5(0x228))/0x2+parseInt(_0x11efb5(0x226))/0x3+-parseInt(_0x11efb5(0x21d))/0x4*(-parseInt(_0x11efb5(0x217))/0x5)+-parseInt(_0x11efb5(0x218))/0x6*(parseInt(_0x11efb5(0x221))/0x7)+parseInt(_0x11efb5(0x20d))/0x8*(-parseInt(_0x11efb5(0x21b))/0x9)+-parseInt(_0x11efb5(0x200))/0xa;if(_0x5c42be===_0x5b0778)break;else _0x1289ce['push'](_0x1289ce['shift']());}catch(_0x25c0a7){_0x1289ce['push'](_0x1289ce['shift']());}}}(_0x4006,0x3ea19));var __decorate=this&&this[_0x451d65(0x20c)]||function(_0x4ae401,_0xee447c,_0x59664c,_0x32f535){const _0x1e801b=_0x451d65;var _0x56d2eb=arguments['length'],_0x1eb605=_0x56d2eb<0x3?_0xee447c:_0x32f535===null?_0x32f535=Object[_0x1e801b(0x215)](_0xee447c,_0x59664c):_0x32f535,_0x11460a;if(typeof Reflect===_0x1e801b(0x1f8)&&typeof Reflect[_0x1e801b(0x222)]===_0x1e801b(0x1f4))_0x1eb605=Reflect[_0x1e801b(0x222)](_0x4ae401,_0xee447c,_0x59664c,_0x32f535);else{for(var _0x44d4c4=_0x4ae401['length']-0x1;_0x44d4c4>=0x0;_0x44d4c4--)if(_0x11460a=_0x4ae401[_0x44d4c4])_0x1eb605=(_0x56d2eb<0x3?_0x11460a(_0x1eb605):_0x56d2eb>0x3?_0x11460a(_0xee447c,_0x59664c,_0x1eb605):_0x11460a(_0xee447c,_0x59664c))||_0x1eb605;}return _0x56d2eb>0x3&&_0x1eb605&&Object[_0x1e801b(0x202)](_0xee447c,_0x59664c,_0x1eb605),_0x1eb605;},__metadata=this&&this['__metadata']||function(_0x392ea7,_0x44c951){const _0x552a8c=_0x451d65;if(typeof Reflect===_0x552a8c(0x1f8)&&typeof Reflect['metadata']==='function')return Reflect[_0x552a8c(0x203)](_0x392ea7,_0x44c951);};function _0x1ac2(_0x209cce,_0x261f91){const _0x4006a9=_0x4006();return _0x1ac2=function(_0x1ac2b4,_0x3a9f56){_0x1ac2b4=_0x1ac2b4-0x1f0;let _0x2c8a75=_0x4006a9[_0x1ac2b4];return _0x2c8a75;},_0x1ac2(_0x209cce,_0x261f91);}function _0x4006(){const _0x2a8743=['56oioHFe','authService','extractToken','HttpStatus','UnauthorizedException','headers','RedisCacheService','Bearer','getOwnPropertyDescriptor','createTokenFromFingerprint','85Zrmprh','21330JvXYEI','__esModule','switchToHttp','519957ISvdrm','validateToken','109748ePsUPk','err:\x20','canActivate','jwt','63txqnjC','decorate','ModuleRef','getNineAiToken','JWT_SECRET','288015cFTTII','HttpException','860888vUBagz','../../modules/redisCache/redisCache.service','split','x-website-domain','fingerprint','redisCacheService','jsonwebtoken','authorization','globalConfigService','env','function','toString','Injectable','getRequest','object','@nestjs/core','user','../../modules/globalConfig/globalConfig.service','moduleRef','length','@nestjs/passport','AuthGuard','6266730aZqRBi','UNAUTHORIZED','defineProperty','metadata','@nestjs/common','../../modules/auth/auth.service','verify','326738LKFLLo','GlobalConfigService','log','design:paramtypes','get','__decorate'];_0x4006=function(){return _0x2a8743;};return _0x4006();}Object['defineProperty'](exports,_0x451d65(0x219),{'value':!![]}),exports['JwtAuthGuard']=void 0x0;const redisCache_service_1=require(_0x451d65(0x229)),common_1=require(_0x451d65(0x204)),passport_1=require(_0x451d65(0x1fe)),jwt=require(_0x451d65(0x1f0)),core_1=require(_0x451d65(0x1f9)),globalConfig_service_1=require(_0x451d65(0x1fb)),auth_service_1=require(_0x451d65(0x205));let JwtAuthGuard=class JwtAuthGuard extends(0x0,passport_1[_0x451d65(0x1ff)])(_0x451d65(0x220)){constructor(_0x14d9e6,_0x52da66,_0x1c3247,_0x2257c3){const _0x5f3ef0=_0x451d65;super(),this[_0x5f3ef0(0x22d)]=_0x14d9e6,this[_0x5f3ef0(0x1fc)]=_0x52da66,this[_0x5f3ef0(0x1f2)]=_0x1c3247,this[_0x5f3ef0(0x20e)]=_0x2257c3;}async[_0x451d65(0x21f)](_0x5f3400){const _0x526a17=_0x451d65;!this['redisCacheService']&&(this[_0x526a17(0x22d)]=this['moduleRef'][_0x526a17(0x20b)](redisCache_service_1[_0x526a17(0x213)],{'strict':![]}));const _0x51cea2=_0x5f3400[_0x526a17(0x21a)]()[_0x526a17(0x1f7)](),_0x2a2019=_0x51cea2[_0x526a17(0x212)][_0x526a17(0x22b)],_0x38aabd=this['extractToken'](_0x51cea2);_0x51cea2[_0x526a17(0x1fa)]=this[_0x526a17(0x21c)](_0x38aabd);const _0x5cf60b=this[_0x526a17(0x1f2)][_0x526a17(0x224)]();return await this['redisCacheService']['checkTokenAuth'](_0x38aabd,_0x51cea2),!![];}[_0x451d65(0x20f)](_0x36d1a4){const _0x2dcd0a=_0x451d65;if(!_0x36d1a4['headers'][_0x2dcd0a(0x1f1)]){if(_0x36d1a4['headers'][_0x2dcd0a(0x22c)]){let _0x1c3c91=_0x36d1a4[_0x2dcd0a(0x212)][_0x2dcd0a(0x22c)];_0x1c3c91>0x7fffffff&&(_0x1c3c91=_0x1c3c91[_0x2dcd0a(0x1f5)]()['slice'](-0x9),_0x1c3c91=Number(String(Number(_0x1c3c91))));const _0x1d6120=this[_0x2dcd0a(0x20e)][_0x2dcd0a(0x216)](_0x1c3c91);return _0x1d6120;}return null;}const _0xbff5fe=_0x36d1a4['headers'][_0x2dcd0a(0x1f1)][_0x2dcd0a(0x22a)]('\x20');if(_0xbff5fe[_0x2dcd0a(0x1fd)]!==0x2||_0xbff5fe[0x0]!==_0x2dcd0a(0x214))return null;return _0xbff5fe[0x1];}[_0x451d65(0x21c)](_0x2cb011){const _0x5f8a88=_0x451d65;try{return jwt[_0x5f8a88(0x206)](_0x2cb011,process[_0x5f8a88(0x1f3)][_0x5f8a88(0x225)]);}catch(_0x66fe1f){throw new common_1[(_0x5f8a88(0x227))]('亲爱的用户,请登录后继续操作,我们正在等您的到来！',common_1[_0x5f8a88(0x210)][_0x5f8a88(0x201)]);}}['handleRequest'](_0xf491e7,_0x5b8ca3,_0x4797e8){const _0x4223f7=_0x451d65;if(_0xf491e7||!_0x5b8ca3){console[_0x4223f7(0x209)](_0x4223f7(0x21e),_0xf491e7);throw _0xf491e7||new common_1[(_0x4223f7(0x211))]();}return _0x5b8ca3;}};JwtAuthGuard=__decorate([(0x0,common_1[_0x451d65(0x1f6)])(),__metadata(_0x451d65(0x20a),[redisCache_service_1[_0x451d65(0x213)],core_1[_0x451d65(0x223)],globalConfig_service_1[_0x451d65(0x208)],auth_service_1['AuthService']])],JwtAuthGuard),exports['JwtAuthGuard']=JwtAuthGuard;