'use strict';const _0x2ea23a=_0x2b7d;(function(_0x476351,_0x3eba03){const _0x22fb53=_0x2b7d,_0x441bfb=_0x476351();while(!![]){try{const _0x303228=-parseInt(_0x22fb53(0x191))/0x1*(parseInt(_0x22fb53(0x184))/0x2)+parseInt(_0x22fb53(0x177))/0x3*(parseInt(_0x22fb53(0x183))/0x4)+-parseInt(_0x22fb53(0x16f))/0x5+-parseInt(_0x22fb53(0x144))/0x6+-parseInt(_0x22fb53(0x15f))/0x7*(parseInt(_0x22fb53(0x175))/0x8)+parseInt(_0x22fb53(0x150))/0x9*(parseInt(_0x22fb53(0x178))/0xa)+parseInt(_0x22fb53(0x15c))/0xb;if(_0x303228===_0x3eba03)break;else _0x441bfb['push'](_0x441bfb['shift']());}catch(_0x2c2e2e){_0x441bfb['push'](_0x441bfb['shift']());}}}(_0x1f19,0x34c3b));var __decorate=this&&this['__decorate']||function(_0x53c363,_0x4a331a,_0x44b3ea,_0x3a0a7b){const _0x51bb69=_0x2b7d;var _0x3e327c=arguments['length'],_0x5a0db3=_0x3e327c<0x3?_0x4a331a:_0x3a0a7b===null?_0x3a0a7b=Object[_0x51bb69(0x146)](_0x4a331a,_0x44b3ea):_0x3a0a7b,_0x280012;if(typeof Reflect===_0x51bb69(0x194)&&typeof Reflect['decorate']==='function')_0x5a0db3=Reflect['decorate'](_0x53c363,_0x4a331a,_0x44b3ea,_0x3a0a7b);else{for(var _0x5a688=_0x53c363[_0x51bb69(0x19f)]-0x1;_0x5a688>=0x0;_0x5a688--)if(_0x280012=_0x53c363[_0x5a688])_0x5a0db3=(_0x3e327c<0x3?_0x280012(_0x5a0db3):_0x3e327c>0x3?_0x280012(_0x4a331a,_0x44b3ea,_0x5a0db3):_0x280012(_0x4a331a,_0x44b3ea))||_0x5a0db3;}return _0x3e327c>0x3&&_0x5a0db3&&Object[_0x51bb69(0x15d)](_0x4a331a,_0x44b3ea,_0x5a0db3),_0x5a0db3;},__metadata=this&&this[_0x2ea23a(0x173)]||function(_0x1e35c3,_0x510818){const _0x256e7d=_0x2ea23a;if(typeof Reflect===_0x256e7d(0x194)&&typeof Reflect['metadata']===_0x256e7d(0x197))return Reflect['metadata'](_0x1e35c3,_0x510818);};function _0x2b7d(_0x4ccf5e,_0x191cf2){const _0x1f19c8=_0x1f19();return _0x2b7d=function(_0x2b7d41,_0x5e6681){_0x2b7d41=_0x2b7d41-0x140;let _0x2c87d8=_0x1f19c8[_0x2b7d41];return _0x2c87d8;},_0x2b7d(_0x4ccf5e,_0x191cf2);}Object[_0x2ea23a(0x15d)](exports,_0x2ea23a(0x164),{'value':!![]}),exports[_0x2ea23a(0x18e)]=void 0x0;const common_1=require('@nestjs/common'),typeorm_1=require(_0x2ea23a(0x17f)),bcrypt=require(_0x2ea23a(0x171));let DatabaseService=class DatabaseService{constructor(_0x4ac7cd){const _0x594a1f=_0x2ea23a;this[_0x594a1f(0x170)]=_0x4ac7cd;}async[_0x2ea23a(0x1a8)](){const _0x55244c=_0x2ea23a;await this[_0x55244c(0x19e)](),await this['checkSiteBaseConfig']();}async[_0x2ea23a(0x19e)](){const _0x4ab2ec=_0x2ea23a,_0x5e3495=await this[_0x4ab2ec(0x170)][_0x4ab2ec(0x1a4)]('SELECT\x20*\x20FROM\x20users\x20WHERE\x20role\x20=\x20\x27super\x27');if(!_0x5e3495||_0x5e3495['length']===0x0){const _0x12ad16=bcrypt[_0x4ab2ec(0x14a)](_0x4ab2ec(0x147),0xa),_0x444a3f=bcrypt[_0x4ab2ec(0x14a)](_0x4ab2ec(0x147),0xa),_0x1b1d47='default@cooper.com',_0x25d584=_0x4ab2ec(0x151),_0x1394c3={'username':_0x4ab2ec(0x18a),'password':_0x12ad16,'status':0x1,'email':_0x1b1d47,'sex':0x1,'role':'super'},_0x20257f={'username':_0x4ab2ec(0x19d),'password':_0x444a3f,'status':0x1,'email':_0x25d584,'sex':0x1,'role':_0x4ab2ec(0x19d)};await this['createDefaultUser'](_0x1394c3),await this['createDefaultUser'](_0x20257f);}}async[_0x2ea23a(0x192)](_0x17bf38){const _0x7b709c=_0x2ea23a;try{const {username:_0x43bfb7,password:_0x574a43,status:_0x209a9f,email:_0x5f374a,role:_0x37c4f9}=_0x17bf38,_0x4c25bf=await this[_0x7b709c(0x170)]['query'](_0x7b709c(0x1a7)+_0x43bfb7+_0x7b709c(0x176)+_0x574a43+_0x7b709c(0x176)+_0x209a9f+_0x7b709c(0x176)+_0x5f374a+_0x7b709c(0x176)+_0x37c4f9+'\x27)'),_0x59e6c9=_0x4c25bf['insertId'],_0x1de134=await this[_0x7b709c(0x170)][_0x7b709c(0x1a4)](_0x7b709c(0x190)+_0x59e6c9+_0x7b709c(0x157));common_1['Logger'][_0x7b709c(0x179)](_0x7b709c(0x16e)+_0x37c4f9+_0x7b709c(0x14b)+_0x43bfb7+_0x7b709c(0x16c)+(_0x43bfb7==='super'?_0x7b709c(0x145):'123456')+']\x20==============>\x20请注意查阅','DatabaseService');}catch(_0x3d337c){console[_0x7b709c(0x179)]('error:\x20',_0x3d337c);throw new common_1[(_0x7b709c(0x160))](_0x7b709c(0x1a1),common_1[_0x7b709c(0x158)]['INTERNAL_SERVER_ERROR']);}}async[_0x2ea23a(0x18b)](){const _0x3b1847=_0x2ea23a,_0x676c7a=[_0x3b1847(0x1a3),_0x3b1847(0x14e),'vxNumber',_0x3b1847(0x19a),_0x3b1847(0x161)],_0x40a371=await this[_0x3b1847(0x170)][_0x3b1847(0x1a4)](_0x3b1847(0x168)+_0x676c7a[_0x3b1847(0x14c)](_0x4ea43f=>'\x27'+_0x4ea43f+'\x27')[_0x3b1847(0x17c)](',')+')\x0a'),_0x59dbf2=parseInt(_0x40a371[0x0]['count']);_0x59dbf2===0x0&&await this[_0x3b1847(0x195)]();}async[_0x2ea23a(0x195)](){const _0x16189e=_0x2ea23a;try{const _0x16cccd='',_0x1b061a=_0x16189e(0x1a0),_0x455118=[{'configKey':_0x16189e(0x1a3),'configVal':_0x16189e(0x159),'public':0x1,'encry':0x0},{'configKey':_0x16189e(0x14e),'configVal':_0x16189e(0x149),'public':0x1,'encry':0x0},{'configKey':_0x16189e(0x189),'configVal':_0x16189e(0x156),'public':0x1,'encry':0x0},{'configKey':'robotAvatar','configVal':'','public':0x1,'encry':0x0},{'configKey':_0x16189e(0x161),'configVal':'','public':0x0,'encry':0x0},{'configKey':_0x16189e(0x142),'configVal':_0x16cccd,'public':0x1,'encry':0x0},{'configKey':_0x16189e(0x169),'configVal':'','public':0x0,'encry':0x0},{'configKey':'baiduToken','configVal':'','public':0x0,'encry':0x0},{'configKey':'buyCramiAddress','configVal':'','public':0x1,'encry':0x0},{'configKey':_0x16189e(0x16a),'configVal':_0x16189e(0x152),'public':0x0,'encry':0x0},{'configKey':'noticeInfo','configVal':_0x1b061a,'public':0x1,'encry':0x0},{'configKey':_0x16189e(0x163),'configVal':_0x16189e(0x18d),'public':0x0,'encry':0x0},{'configKey':_0x16189e(0x14f),'configVal':_0x16189e(0x153),'public':0x0,'encry':0x0},{'configKey':_0x16189e(0x174),'configVal':_0x16189e(0x14d),'public':0x0,'encry':0x0},{'configKey':_0x16189e(0x199),'configVal':_0x16189e(0x19b),'public':0x0,'encry':0x0},{'configKey':_0x16189e(0x182),'configVal':_0x16189e(0x148),'public':0x0,'encry':0x0},{'configKey':'registerSuccessEmailTeamName','configVal':'Yi\x20Ai','public':0x0,'encry':0x0},{'configKey':_0x16189e(0x155),'configVal':_0x16189e(0x186),'public':0x0,'encry':0x0},{'configKey':_0x16189e(0x193),'configVal':_0x16189e(0x19c),'public':0x0,'encry':0x0},{'configKey':_0x16189e(0x198),'configVal':_0x16189e(0x14d),'public':0x0,'encry':0x0},{'configKey':_0x16189e(0x187),'configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x16189e(0x167),'configVal':'30','public':0x1,'encry':0x0},{'configKey':_0x16189e(0x141),'configVal':'3','public':0x1,'encry':0x0},{'configKey':_0x16189e(0x165),'configVal':'3','public':0x1,'encry':0x0},{'configKey':'firstRegisterSendStatus','configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x16189e(0x17e),'configVal':_0x16189e(0x18f),'public':0x1,'encry':0x0},{'configKey':_0x16189e(0x15a),'configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x16189e(0x196),'configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x16189e(0x140),'configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x16189e(0x17d),'configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x16189e(0x16b),'configVal':'0','public':0x1,'encry':0x0},{'configKey':_0x16189e(0x180),'configVal':'0','public':0x1,'encry':0x0},{'configKey':_0x16189e(0x16d),'configVal':'0','public':0x1,'encry':0x0},{'configKey':_0x16189e(0x172),'configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x16189e(0x166),'configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x16189e(0x162),'configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x16189e(0x143),'configVal':'1','public':0x1,'encry':0x0}],_0x26fa5e=await this[_0x16189e(0x170)][_0x16189e(0x1a4)](_0x16189e(0x181)+_0x455118['map'](_0x1f8672=>'(\x27'+_0x1f8672[_0x16189e(0x15e)]+_0x16189e(0x176)+_0x1f8672[_0x16189e(0x15b)][_0x16189e(0x17a)](/'/g,'\x5c\x27')+'\x27,\x20\x27'+_0x1f8672[_0x16189e(0x17b)]+_0x16189e(0x176)+_0x1f8672[_0x16189e(0x154)]+'\x27)')[_0x16189e(0x17c)](',\x20'));common_1[_0x16189e(0x1a2)][_0x16189e(0x179)](_0x16189e(0x1a6),'DatabaseService');}catch(_0x214b80){console[_0x16189e(0x179)](_0x16189e(0x185),_0x214b80);throw new common_1[(_0x16189e(0x160))](_0x16189e(0x18c),common_1['HttpStatus'][_0x16189e(0x1a5)]);}}};DatabaseService=__decorate([(0x0,common_1['Injectable'])(),__metadata(_0x2ea23a(0x188),[typeorm_1['Connection']])],DatabaseService),exports['DatabaseService']=DatabaseService;function _0x1f19(){const _0x2fc729=['registerSuccessEmaileAppend','HelloWordYi819','\x27,\x200,\x201000,\x20100)','HttpStatus','Yi\x20Ai','firstRregisterSendModel3Count','configVal','15008004UYKQGD','defineProperty','configKey','749IFlGpe','HttpException','userDefautlAvatar','invitedGuestSendDrawMjCount','registerVerifyEmailTitle','__esModule','registerSendDrawMjCount','invitedGuestSendModel4Count','registerSendModel3Count','\x0a\x20\x20SELECT\x20COUNT(*)\x20AS\x20count\x20FROM\x20config\x20WHERE\x20`configKey`\x20IN\x20(','baiduSiteId','openaiBaseUrl','inviteGiveSendModel3Count',']、初始密码为[','inviteGiveSendDrawMjCount','初始化创建','1592815jRTwLK','connection','bcryptjs','invitedGuestSendModel3Count','__metadata','registerVerifyEmailFrom','28648VuhRiy','\x27,\x20\x27','446763UEVgIj','1387920zBelME','log','replace','public','join','inviteSendStatus','firstRegisterSendRank','typeorm','inviteGiveSendModel4Count','INSERT\x20INTO\x20config\x20(configKey,\x20configVal,\x20public,\x20encry)\x20VALUES\x20','registerSuccessEmailTitle','4egZVpP','338QEEOeI','error:\x20',',请妥善保管您的账号，祝您使用愉快','registerSendStatus','design:paramtypes','vxNumber','super','checkSiteBaseConfig','创建默认网站配置失败！','Yi\x20Ai团队账号验证','DatabaseService','500','INSERT\x20INTO\x20balance\x20(userId,\x20balance,\x20usesLeft,\x20paintCount)\x20VALUES\x20(\x27','2003oGdkDs','createDefaultUser','registerFailEmailTitle','object','createBaseSiteConfig','firstRregisterSendModel4Count','function','registerFailEmailTeamName','registerVerifyExpir','robotAvatar','1800','Yi\x20Ai账号激活失败','admin','checkSuperAdmin','length','\x0a####\x20YiAi\x20欢迎您\x0a\x20-\x20欢迎使用YiAi\x0a\x20-\x20初始管理员账号密码\x20\x20super\x20\x20123456\x20【前台后台登录都可以修改】\x0a\x20-\x20初始预览账号密码\x20\x20admin\x20\x20123456\x20【为后台查看账号\x20仅可查看部分非敏感数据】\x0a','创建默认超级管理员失败！','Logger','siteName','query','INTERNAL_SERVER_ERROR','初始化网站配置信息成功、如您需要修改网站配置信息，请前往管理系统系统配置设置\x20==============>\x20请注意查阅','INSERT\x20INTO\x20users\x20(username,\x20password,\x20status,\x20email,\x20role)\x20VALUES\x20(\x27','onModuleInit','firstRregisterSendDrawMjCount','registerSendModel4Count','baiduCode','isVerifyEmail','2374302oXiLoW','nine-super','getOwnPropertyDescriptor','123456','Yi\x20Ai账号激活成功','805239273','hashSync','用户成功、用户名为[','map','Yi\x20Ai团队','qqNumber','registerVerifyEmailDesc','9JUOVrl','defaultAdmin@cooper.com','https://api.openai.com','欢迎使用Yi\x20Ai团队的产品服务,请在五分钟内完成你的账号激活,点击以下按钮激活您的账号，','encry'];_0x1f19=function(){return _0x2fc729;};return _0x1f19();}