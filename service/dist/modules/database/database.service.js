'use strict';const _0xa6adf6=_0x507f;(function(_0x56455,_0x151d9c){const _0x22a278=_0x507f,_0x5ae269=_0x56455();while(!![]){try{const _0x2785bc=parseInt(_0x22a278(0x102))/0x1+-parseInt(_0x22a278(0xe6))/0x2*(-parseInt(_0x22a278(0x137))/0x3)+parseInt(_0x22a278(0xf0))/0x4*(parseInt(_0x22a278(0x130))/0x5)+parseInt(_0x22a278(0x115))/0x6+-parseInt(_0x22a278(0x114))/0x7+-parseInt(_0x22a278(0x118))/0x8*(parseInt(_0x22a278(0xf5))/0x9)+-parseInt(_0x22a278(0x113))/0xa*(parseInt(_0x22a278(0xde))/0xb);if(_0x2785bc===_0x151d9c)break;else _0x5ae269['push'](_0x5ae269['shift']());}catch(_0xafe933){_0x5ae269['push'](_0x5ae269['shift']());}}}(_0x5d94,0xf2d74));var __decorate=this&&this[_0xa6adf6(0x139)]||function(_0x49dd63,_0x4ce440,_0x224400,_0x311bf3){const _0x26713d=_0xa6adf6;var _0x265306=arguments['length'],_0x113e60=_0x265306<0x3?_0x4ce440:_0x311bf3===null?_0x311bf3=Object[_0x26713d(0x12a)](_0x4ce440,_0x224400):_0x311bf3,_0x312b8f;if(typeof Reflect===_0x26713d(0x10a)&&typeof Reflect['decorate']===_0x26713d(0x12c))_0x113e60=Reflect[_0x26713d(0xfb)](_0x49dd63,_0x4ce440,_0x224400,_0x311bf3);else{for(var _0x1c88f2=_0x49dd63[_0x26713d(0xe9)]-0x1;_0x1c88f2>=0x0;_0x1c88f2--)if(_0x312b8f=_0x49dd63[_0x1c88f2])_0x113e60=(_0x265306<0x3?_0x312b8f(_0x113e60):_0x265306>0x3?_0x312b8f(_0x4ce440,_0x224400,_0x113e60):_0x312b8f(_0x4ce440,_0x224400))||_0x113e60;}return _0x265306>0x3&&_0x113e60&&Object['defineProperty'](_0x4ce440,_0x224400,_0x113e60),_0x113e60;},__metadata=this&&this['__metadata']||function(_0x348c40,_0x345943){const _0x207a02=_0xa6adf6;if(typeof Reflect===_0x207a02(0x10a)&&typeof Reflect['metadata']===_0x207a02(0x12c))return Reflect[_0x207a02(0xe1)](_0x348c40,_0x345943);};Object[_0xa6adf6(0xf2)](exports,_0xa6adf6(0xf8),{'value':!![]}),exports[_0xa6adf6(0x135)]=void 0x0;const common_1=require(_0xa6adf6(0xf1)),typeorm_1=require('typeorm'),bcrypt=require('bcryptjs');let DatabaseService=class DatabaseService{constructor(_0x390309){const _0x5809e5=_0xa6adf6;this[_0x5809e5(0x122)]=_0x390309;}async[_0xa6adf6(0xe8)](){const _0x7b524d=_0xa6adf6;await this[_0x7b524d(0x129)](),await this[_0x7b524d(0xe4)]();}async[_0xa6adf6(0x129)](){const _0x53aef4=_0xa6adf6,_0x32fce2=await this[_0x53aef4(0x122)]['query']('SELECT\x20*\x20FROM\x20users\x20WHERE\x20role\x20=\x20\x27super\x27');if(!_0x32fce2||_0x32fce2['length']===0x0){const _0x3fd939=bcrypt[_0x53aef4(0x11a)](_0x53aef4(0xfc),0xa),_0xad6956=bcrypt[_0x53aef4(0x11a)](_0x53aef4(0xfc),0xa),_0x54976='default@cooper.com',_0x14ef8c='defaultAdmin@cooper.com',_0x2f910c={'username':_0x53aef4(0xef),'password':_0x3fd939,'status':0x1,'email':_0x54976,'sex':0x1,'role':_0x53aef4(0xef)},_0x106949={'username':_0x53aef4(0x10c),'password':_0xad6956,'status':0x1,'email':_0x14ef8c,'sex':0x1,'role':_0x53aef4(0x10c)};await this[_0x53aef4(0x111)](_0x2f910c),await this[_0x53aef4(0x111)](_0x106949);}}async[_0xa6adf6(0x111)](_0x58fee5){const _0x2d1bdd=_0xa6adf6;try{const {username:_0x4ef3d3,password:_0x4f1572,status:_0x3fa44f,email:_0x284f8a,role:_0x300685}=_0x58fee5,_0x57ba7a=await this[_0x2d1bdd(0x122)][_0x2d1bdd(0xf6)](_0x2d1bdd(0xf7)+_0x4ef3d3+_0x2d1bdd(0x11f)+_0x4f1572+_0x2d1bdd(0x11f)+_0x3fa44f+_0x2d1bdd(0x11f)+_0x284f8a+_0x2d1bdd(0x11f)+_0x300685+'\x27)'),_0x1f4bc9=_0x57ba7a[_0x2d1bdd(0x136)],_0x53e909=await this[_0x2d1bdd(0x122)][_0x2d1bdd(0xf6)]('INSERT\x20INTO\x20balance\x20(userId,\x20balance,\x20usesLeft,\x20paintCount)\x20VALUES\x20(\x27'+_0x1f4bc9+'\x27,\x200,\x201000,\x20100)');common_1['Logger'][_0x2d1bdd(0x109)]('初始化创建'+_0x300685+_0x2d1bdd(0x119)+_0x4ef3d3+_0x2d1bdd(0x11d)+(_0x4ef3d3===_0x2d1bdd(0xef)?_0x2d1bdd(0xfa):_0x2d1bdd(0xfc))+_0x2d1bdd(0x138),_0x2d1bdd(0x135));}catch(_0x49d9a1){console[_0x2d1bdd(0x109)](_0x2d1bdd(0x10d),_0x49d9a1);throw new common_1[(_0x2d1bdd(0x128))](_0x2d1bdd(0x12d),common_1[_0x2d1bdd(0xf4)][_0x2d1bdd(0x10e)]);}}async['checkSiteBaseConfig'](){const _0x583590=_0xa6adf6,_0x1e088f=['siteName',_0x583590(0x103),_0x583590(0x133),'robotAvatar','userDefautlAvatar'],_0x38b4be=await this[_0x583590(0x122)]['query'](_0x583590(0x12e)+_0x1e088f['map'](_0x4c52af=>'\x27'+_0x4c52af+'\x27')[_0x583590(0x123)](',')+')\x0a'),_0x1522b2=parseInt(_0x38b4be[0x0]['count']);_0x1522b2===0x0&&await this[_0x583590(0xf3)]();}async[_0xa6adf6(0xf3)](){const _0x3c3dca=_0xa6adf6;try{const _0x317563='',_0x5770b3=_0x3c3dca(0xff),_0x58e698=[{'configKey':'siteName','configVal':_0x3c3dca(0x12b),'public':0x1,'encry':0x0},{'configKey':_0x3c3dca(0x103),'configVal':'805239273','public':0x1,'encry':0x0},{'configKey':'vxNumber','configVal':_0x3c3dca(0x124),'public':0x1,'encry':0x0},{'configKey':_0x3c3dca(0x134),'configVal':'','public':0x1,'encry':0x0},{'configKey':_0x3c3dca(0x127),'configVal':'','public':0x0,'encry':0x0},{'configKey':_0x3c3dca(0x101),'configVal':_0x317563,'public':0x1,'encry':0x0},{'configKey':_0x3c3dca(0xfd),'configVal':'','public':0x0,'encry':0x0},{'configKey':_0x3c3dca(0x131),'configVal':'','public':0x0,'encry':0x0},{'configKey':_0x3c3dca(0x107),'configVal':'','public':0x1,'encry':0x0},{'configKey':_0x3c3dca(0x126),'configVal':_0x3c3dca(0x104),'public':0x0,'encry':0x0},{'configKey':'noticeInfo','configVal':_0x5770b3,'public':0x1,'encry':0x0},{'configKey':_0x3c3dca(0x125),'configVal':_0x3c3dca(0x13a),'public':0x0,'encry':0x0},{'configKey':'registerVerifyEmailDesc','configVal':_0x3c3dca(0x132),'public':0x0,'encry':0x0},{'configKey':_0x3c3dca(0x13b),'configVal':_0x3c3dca(0xf9),'public':0x0,'encry':0x0},{'configKey':'registerVerifyExpir','configVal':_0x3c3dca(0x105),'public':0x0,'encry':0x0},{'configKey':_0x3c3dca(0x117),'configVal':_0x3c3dca(0x120),'public':0x0,'encry':0x0},{'configKey':_0x3c3dca(0xeb),'configVal':_0x3c3dca(0x12b),'public':0x0,'encry':0x0},{'configKey':_0x3c3dca(0x112),'configVal':',请妥善保管您的账号，祝您使用愉快','public':0x0,'encry':0x0},{'configKey':_0x3c3dca(0xfe),'configVal':_0x3c3dca(0xee),'public':0x0,'encry':0x0},{'configKey':_0x3c3dca(0xed),'configVal':_0x3c3dca(0xf9),'public':0x0,'encry':0x0},{'configKey':'registerSendStatus','configVal':'1','public':0x1,'encry':0x0},{'configKey':'registerSendModel3Count','configVal':'30','public':0x1,'encry':0x0},{'configKey':_0x3c3dca(0xec),'configVal':'3','public':0x1,'encry':0x0},{'configKey':_0x3c3dca(0x106),'configVal':'3','public':0x1,'encry':0x0},{'configKey':_0x3c3dca(0x121),'configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x3c3dca(0x110),'configVal':'500','public':0x1,'encry':0x0},{'configKey':_0x3c3dca(0xe3),'configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x3c3dca(0x10b),'configVal':'10','public':0x1,'encry':0x0},{'configKey':'firstRregisterSendDrawMjCount','configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x3c3dca(0xe0),'configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x3c3dca(0x11e),'configVal':'0','public':0x1,'encry':0x0},{'configKey':'inviteGiveSendModel4Count','configVal':'0','public':0x1,'encry':0x0},{'configKey':_0x3c3dca(0xe7),'configVal':'0','public':0x1,'encry':0x0},{'configKey':'invitedGuestSendModel3Count','configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x3c3dca(0x108),'configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x3c3dca(0xdd),'configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x3c3dca(0xdf),'configVal':'1','public':0x1,'encry':0x0}],_0x39748e=await this[_0x3c3dca(0x122)][_0x3c3dca(0xf6)]('INSERT\x20INTO\x20config\x20(configKey,\x20configVal,\x20public,\x20encry)\x20VALUES\x20'+_0x58e698[_0x3c3dca(0x10f)](_0x587a7d=>'(\x27'+_0x587a7d[_0x3c3dca(0x100)]+_0x3c3dca(0x11f)+_0x587a7d[_0x3c3dca(0xea)][_0x3c3dca(0x11b)](/'/g,'\x5c\x27')+_0x3c3dca(0x11f)+_0x587a7d['public']+_0x3c3dca(0x11f)+_0x587a7d[_0x3c3dca(0x116)]+'\x27)')[_0x3c3dca(0x123)](',\x20'));common_1[_0x3c3dca(0x11c)]['log'](_0x3c3dca(0xe5),_0x3c3dca(0x135));}catch(_0x527739){console[_0x3c3dca(0x109)](_0x3c3dca(0x10d),_0x527739);throw new common_1['HttpException']('创建默认网站配置失败！',common_1['HttpStatus']['INTERNAL_SERVER_ERROR']);}}};function _0x5d94(){const _0x1e552d=['Yi\x20Ai账号激活失败','super','18908giqJTm','@nestjs/common','defineProperty','createBaseSiteConfig','HttpStatus','201024PmsdoL','query','INSERT\x20INTO\x20users\x20(username,\x20password,\x20status,\x20email,\x20role)\x20VALUES\x20(\x27','__esModule','Yi\x20Ai团队','nine-super','decorate','123456','baiduSiteId','registerFailEmailTitle','\x0a####\x20YiAi\x20欢迎您\x0a\x20-\x20欢迎使用YiAi\x0a\x20-\x20初始管理员账号密码\x20\x20super\x20\x20123456\x20【前台后台登录都可以修改】\x0a\x20-\x20初始预览账号密码\x20\x20admin\x20\x20123456\x20【为后台查看账号\x20仅可查看部分非敏感数据】\x0a','configKey','baiduCode','1784454ZObGIq','qqNumber','https://api.openai.com','1800','registerSendDrawMjCount','buyCramiAddress','invitedGuestSendModel4Count','log','object','firstRregisterSendModel4Count','admin','error:\x20','INTERNAL_SERVER_ERROR','map','firstRegisterSendRank','createDefaultUser','registerSuccessEmaileAppend','30UXUSZM','66038JyBGPU','3063822ugDXGl','encry','registerSuccessEmailTitle','240SbqGdZ','用户成功、用户名为[','hashSync','replace','Logger',']、初始密码为[','inviteGiveSendModel3Count','\x27,\x20\x27','Yi\x20Ai账号激活成功','firstRegisterSendStatus','connection','join','HelloWordYi819','registerVerifyEmailTitle','openaiBaseUrl','userDefautlAvatar','HttpException','checkSuperAdmin','getOwnPropertyDescriptor','Yi\x20Ai','function','创建默认超级管理员失败！','\x0a\x20\x20SELECT\x20COUNT(*)\x20AS\x20count\x20FROM\x20config\x20WHERE\x20`configKey`\x20IN\x20(','Injectable','2045vdsxCP','baiduToken','欢迎使用Yi\x20Ai团队的产品服务,请在五分钟内完成你的账号激活,点击以下按钮激活您的账号，','vxNumber','robotAvatar','DatabaseService','insertId','87AjMpAZ',']\x20==============>\x20请注意查阅','__decorate','Yi\x20Ai团队账号验证','registerVerifyEmailFrom','invitedGuestSendDrawMjCount','15030895jFmGjq','isVerifyEmail','inviteSendStatus','metadata','design:paramtypes','firstRregisterSendModel3Count','checkSiteBaseConfig','初始化网站配置信息成功、如您需要修改网站配置信息，请前往管理系统系统配置设置\x20==============>\x20请注意查阅','106558cakPkn','inviteGiveSendDrawMjCount','onModuleInit','length','configVal','registerSuccessEmailTeamName','registerSendModel4Count','registerFailEmailTeamName'];_0x5d94=function(){return _0x1e552d;};return _0x5d94();}function _0x507f(_0x5a9bef,_0x47eb63){const _0x5d9493=_0x5d94();return _0x507f=function(_0x507f6b,_0x3ef098){_0x507f6b=_0x507f6b-0xdd;let _0x4ea3d5=_0x5d9493[_0x507f6b];return _0x4ea3d5;},_0x507f(_0x5a9bef,_0x47eb63);}DatabaseService=__decorate([(0x0,common_1[_0xa6adf6(0x12f)])(),__metadata(_0xa6adf6(0xe2),[typeorm_1['Connection']])],DatabaseService),exports['DatabaseService']=DatabaseService;