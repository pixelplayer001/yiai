'use strict';const _0x34328e=_0x257a;(function(_0x746d41,_0x150a9b){const _0x1c8a85=_0x257a,_0x3bf32a=_0x746d41();while(!![]){try{const _0x4b0d77=parseInt(_0x1c8a85(0x1bf))/0x1*(parseInt(_0x1c8a85(0x1ee))/0x2)+-parseInt(_0x1c8a85(0x1a6))/0x3*(-parseInt(_0x1c8a85(0x150))/0x4)+-parseInt(_0x1c8a85(0x1d5))/0x5*(-parseInt(_0x1c8a85(0x1ba))/0x6)+-parseInt(_0x1c8a85(0x16a))/0x7*(parseInt(_0x1c8a85(0x19d))/0x8)+parseInt(_0x1c8a85(0x1fb))/0x9*(parseInt(_0x1c8a85(0x187))/0xa)+-parseInt(_0x1c8a85(0x18b))/0xb+-parseInt(_0x1c8a85(0x17d))/0xc*(parseInt(_0x1c8a85(0x1a7))/0xd);if(_0x4b0d77===_0x150a9b)break;else _0x3bf32a['push'](_0x3bf32a['shift']());}catch(_0x2a2bd8){_0x3bf32a['push'](_0x3bf32a['shift']());}}}(_0x3880,0xf0056));var __decorate=this&&this[_0x34328e(0x202)]||function(_0x2fb777,_0x363228,_0x4eddfd,_0x1387a6){const _0x278739=_0x34328e;var _0x3e38b7=arguments['length'],_0x15cc14=_0x3e38b7<0x3?_0x363228:_0x1387a6===null?_0x1387a6=Object[_0x278739(0x14f)](_0x363228,_0x4eddfd):_0x1387a6,_0x4cd854;if(typeof Reflect===_0x278739(0x161)&&typeof Reflect[_0x278739(0x149)]===_0x278739(0x15c))_0x15cc14=Reflect[_0x278739(0x149)](_0x2fb777,_0x363228,_0x4eddfd,_0x1387a6);else{for(var _0x42b3b6=_0x2fb777[_0x278739(0x208)]-0x1;_0x42b3b6>=0x0;_0x42b3b6--)if(_0x4cd854=_0x2fb777[_0x42b3b6])_0x15cc14=(_0x3e38b7<0x3?_0x4cd854(_0x15cc14):_0x3e38b7>0x3?_0x4cd854(_0x363228,_0x4eddfd,_0x15cc14):_0x4cd854(_0x363228,_0x4eddfd))||_0x15cc14;}return _0x3e38b7>0x3&&_0x15cc14&&Object['defineProperty'](_0x363228,_0x4eddfd,_0x15cc14),_0x15cc14;},__metadata=this&&this[_0x34328e(0x189)]||function(_0xda0d6,_0x145063){const _0x5a7c99=_0x34328e;if(typeof Reflect==='object'&&typeof Reflect[_0x5a7c99(0x17a)]===_0x5a7c99(0x15c))return Reflect[_0x5a7c99(0x17a)](_0xda0d6,_0x145063);},__param=this&&this[_0x34328e(0x1d9)]||function(_0x1c0edf,_0x4b5683){return function(_0x4e205b,_0x50f7de){_0x4b5683(_0x4e205b,_0x50f7de,_0x1c0edf);};};Object[_0x34328e(0x1e4)](exports,'__esModule',{'value':!![]}),exports[_0x34328e(0x186)]=void 0x0;const models_service_1=require('../models/models.service'),chatLog_entity_1=require(_0x34328e(0x19e)),common_1=require('@nestjs/common'),config_entity_1=require('./config.entity'),typeorm_1=require(_0x34328e(0x181)),typeorm_2=require(_0x34328e(0x1d7)),utils_1=require('../../common/utils'),axios_1=require('axios'),fs=require('fs'),packageJsonContent=fs[_0x34328e(0x16d)](_0x34328e(0x177),_0x34328e(0x1e3)),packageJson=JSON[_0x34328e(0x162)](packageJsonContent),version=packageJson[_0x34328e(0x1ff)];function _0x257a(_0x24b78b,_0x4f5bae){const _0x38801b=_0x3880();return _0x257a=function(_0x257a7c,_0xa88666){_0x257a7c=_0x257a7c-0x149;let _0x7b19ca=_0x38801b[_0x257a7c];return _0x7b19ca;},_0x257a(_0x24b78b,_0x4f5bae);}function _0x3880(){const _0x8eea73=['648500VWXsER','payEpayStatus','baiduTextSecretKey','OfficialService','getSensitiveConfig','entries','缺失ip信息','nineaiBuiltInSensitiveAuthKey','siteName','post','firstRregisterSendModel3Count','data','function','NAMESPACE','initBaiduSensitive','error_description','hideString','object','parse','emailLoginStatus','操作完成！','registerSendModel4Count','nineaiBuiltInSensitiveApiBase','ChatLogEntity','clientFavoIconPath','mjHideNotBlock','7PlFLcy','json','getAuthInfo','readFileSync','nineaiBuiltInSensitiveStatus','tencent','invitedGuestSendDrawMjCount','super','Injectable','cos','pay','nineai','modelsService','package.json','registerSendDrawMjCount','salesAllowDrawMoney','metadata','getPhoneVerifyConfig','clientHomePath','12kyiAwx','gpt','获取微信access_token失败、错误信息：','TRUE','@nestjs/typeorm','queryConfig','wechat\x20refresh\x20access_token\x20\x20==>\x20','assign','appMenuHeaderBgUrl','GlobalConfigService','10grgUDw','setConfig','__metadata','签到功能暂未开放!','1612006wPbPDf','getNineAiToken','mjProxyImgUrl','user','wechatOfficialAppSecret','https://api.weixin.qq.com/cgi-bin/ticket/getticket?access_token=','wechatRegisterStatus','ali','Repository','filter','clientLogoPath','signInStatus','forEach','aliPhoneTemplateCode','fetchJsapiTicket','getSignatureGiftConfig','siteRobotName','nineAiToken','3863896gCkane','../chatLog/chatLog.entity','mjUseBaiduFy','application/json','inviteGiveSendModel3Count','payMpayChannel','\x20current\x20use\x20version\x20in\x20------>:\x20','firstRegisterSendRank','log','3QAemxu','4458961tIKsZV','domain','firstRregisterSendDrawMjCount','design:paramtypes','getDiffArray','https://api.jiangly.com/api/permission/auth','请填写您的授权码','salesBaseRatio','payHupiStatus','every','Like','Logger','Key','aliPhoneAccessKeySecret','getConfigs','filingNumber','signInMjDrawToken','configVal','baiduTextApiKey','464262xLnyNM','find','includes','Status','mjProxy','256005DsTqht','隐私内容、非超级管理员无权查看','initGetAllConfig','payWeChatPublicKey','HttpException','百度敏感词初始化失败，如果需要敏感检测、请前往后台系统配置!','save','ISDEV','appMenuHeaderTips','MjdrawCount','aliPhoneSignName','createOrUpdate','chatGptKey:','invitedGuestSendModel3Count','chatGptKey','salesSeniorRatio','getWechatAccessToken','payWechatStatus','registerBaseUrl','ConfigEntity','qqNumber','findOne','10nLOLQL','InjectRepository','typeorm','inviteSendStatus','__param','BAD_REQUEST','百度敏感词配置检测失败，您的参数可能配置的不正确!','baiduTextAccessToken','reduce','firstRegisterSendStatus','queryFrontConfig','get','robotAvatar','wechatJsapiTicket','utf-8','defineProperty','baidu','&secret=','env','companyName','mpay','wechatOfficialAppId','auth','wechatAccessToken','phoneRegisterStatus','6hjBRiw','vxNumber','chatLogEntity','error:\x20','epay','baiduTextStatus','inviteGiveSendDrawMjCount','debug','wechat','globalConfigs','感谢您使用NineAi、祝您使用愉快~','map','NINEAI','7836858PRDeWI','error','&client_secret=','payMpayStatus','version','signInModel4Count','default','__decorate','delete','update','https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&appid=','emailRegisterStatus','isVerifyEmail','length','支付功能暂未开放!','HttpStatus','baiduCode','&type=jsapi','payEpayApiPayUrl','inviteGiveSendModel4Count','设置配置信息错误！','fetchBaseAccessToken','firstRregisterSendModel4Count','decorate','setGptKeys','queryNotice','configEntity','还未配置微信的appId和secret、配置后才可进行微信扫码登录！！！','configKey','getOwnPropertyDescriptor'];_0x3880=function(){return _0x8eea73;};return _0x3880();}console[_0x34328e(0x1a5)](_0x34328e(0x1a3),version);let GlobalConfigService=class GlobalConfigService{constructor(_0x334f90,_0x2705f6,_0x3a49eb){const _0x449b93=_0x34328e;this[_0x449b93(0x14c)]=_0x334f90,this[_0x449b93(0x1f0)]=_0x2705f6,this[_0x449b93(0x176)]=_0x3a49eb,this[_0x449b93(0x1f7)]={},this[_0x449b93(0x19c)]=!![];}async['onModuleInit'](){const _0x38082c=_0x34328e;await this[_0x38082c(0x1c1)]();}async[_0x34328e(0x1b5)](_0x25d5b3){const _0x446595=_0x34328e;if(_0x25d5b3['length']===0x0)return;if(_0x25d5b3[_0x446595(0x1bc)]('wechatAccessToken')&&_0x25d5b3[_0x446595(0x208)]===0x1)return this[_0x446595(0x1ec)];if(_0x25d5b3[_0x446595(0x1bc)](_0x446595(0x1e2))&&_0x25d5b3[_0x446595(0x208)]===0x1)return this[_0x446595(0x1e2)];if(_0x25d5b3[_0x446595(0x208)]===0x1)return this['globalConfigs'][_0x25d5b3[0x0]];else{const _0x3f3076={};return _0x25d5b3[_0x446595(0x197)](_0x3a40f1=>_0x3f3076[_0x3a40f1]=this[_0x446595(0x1f7)][_0x3a40f1]),_0x3f3076;}}async[_0x34328e(0x1c1)](){const _0x56902e=_0x34328e,_0x585745=await this[_0x56902e(0x14c)][_0x56902e(0x1bb)]();this[_0x56902e(0x1f7)]=_0x585745['reduce']((_0x4a1792,_0xca2816)=>{const _0x3c695c=_0x56902e;return _0x4a1792[_0xca2816[_0x3c695c(0x14e)]]=_0xca2816[_0x3c695c(0x1b8)],_0x4a1792;},{}),this[_0x56902e(0x15e)]();}async[_0x34328e(0x15e)](_0x4f733f=!![]){const _0x4c2025=_0x34328e,{baiduTextApiKey:_0x25c627,baiduTextSecretKey:_0x523d3a}=await this[_0x4c2025(0x1b5)]([_0x4c2025(0x1b9),_0x4c2025(0x152)]);if(!_0x25c627||!_0x523d3a){common_1[_0x4c2025(0x1b2)]['error'](_0x4c2025(0x1c4),_0x4c2025(0x186));return;}const _0x3af212={'Content-Type':_0x4c2025(0x1a0),'Accept':_0x4c2025(0x1a0)},_0x5a4510='https://aip.baidubce.com/oauth/2.0/token?client_id='+_0x25c627+_0x4c2025(0x1fd)+_0x523d3a+'&grant_type=client_credentials';try{const _0x31b5f9=await axios_1[_0x4c2025(0x201)][_0x4c2025(0x159)](_0x5a4510,{'headers':_0x3af212});this[_0x4c2025(0x1f7)][_0x4c2025(0x1dc)]=_0x31b5f9[_0x4c2025(0x15b)]['access_token'];}catch(_0x4a6923){if(_0x4f733f)common_1[_0x4c2025(0x1b2)]['error'](_0x4c2025(0x1db),'GlobalConfigService');else throw new common_1[(_0x4c2025(0x1c3))](_0x4a6923['response'][_0x4c2025(0x15b)][_0x4c2025(0x15f)],common_1['HttpStatus'][_0x4c2025(0x1da)]);}}async['getWechatAccessToken'](_0x167d2c=![]){const _0x87eb02=_0x34328e,{wechatOfficialAppId:_0x4b2241,wechatOfficialAppSecret:_0x271ba8}=await this[_0x87eb02(0x1b5)]([_0x87eb02(0x1ea),_0x87eb02(0x18f)]);if(!_0x4b2241||!_0x271ba8)return common_1['Logger'][_0x87eb02(0x1fc)](_0x87eb02(0x14d),'OfficialService');this[_0x87eb02(0x1ec)]=await this['fetchBaseAccessToken'](_0x4b2241,_0x271ba8,_0x167d2c),this[_0x87eb02(0x1e2)]=await this[_0x87eb02(0x199)](this[_0x87eb02(0x1ec)]),common_1['Logger']['log'](_0x87eb02(0x183)+this[_0x87eb02(0x1ec)],'OfficialService');}async[_0x34328e(0x210)](_0x44c8d0,_0x571c2f,_0x1137b8=![]){const _0x52b237=_0x34328e;if(process[_0x52b237(0x1e7)]['ISDEV']===_0x52b237(0x180)){this[_0x52b237(0x1ec)]='';return;}const {data:{errmsg:_0x5630b7,access_token:_0xda906e}}=await axios_1[_0x52b237(0x201)][_0x52b237(0x1e0)](_0x52b237(0x205)+_0x44c8d0+_0x52b237(0x1e6)+_0x571c2f);if(_0x5630b7){if(_0x1137b8)common_1[_0x52b237(0x1b2)][_0x52b237(0x1fc)](_0x52b237(0x17f)+_0x5630b7,_0x52b237(0x153));else throw new common_1[(_0x52b237(0x1c3))]('请配置正确的秘钥、当前秘钥检测不通过！',common_1['HttpStatus'][_0x52b237(0x1da)]);return'';}return _0xda906e;}async[_0x34328e(0x199)](_0x31476c){const _0x2a7e51=_0x34328e;var _0x25813a;if(process[_0x2a7e51(0x1e7)][_0x2a7e51(0x1c6)]===_0x2a7e51(0x180)){this[_0x2a7e51(0x1e2)]='';return;}const _0x4c29b4=await axios_1[_0x2a7e51(0x201)][_0x2a7e51(0x1e0)](_0x2a7e51(0x190)+_0x31476c+_0x2a7e51(0x20c));return(_0x25813a=_0x4c29b4===null||_0x4c29b4===void 0x0?void 0x0:_0x4c29b4['data'])===null||_0x25813a===void 0x0?void 0x0:_0x25813a['ticket'];}async['queryAllConfig'](_0x41f62a){const _0x31a1d8=_0x34328e,{role:_0x3b26ca}=_0x41f62a['user'];return this[_0x31a1d8(0x1f7)];}async[_0x34328e(0x1df)](_0x5581a2,_0x25cae6){const _0x28b788=_0x34328e,_0x298f0b=['vxNumber','registerSendStatus','registerSendModel3Count',_0x28b788(0x165),_0x28b788(0x178),_0x28b788(0x1de),_0x28b788(0x1a4),_0x28b788(0x15a),_0x28b788(0x211),_0x28b788(0x1a9),_0x28b788(0x1d8),_0x28b788(0x1a1),_0x28b788(0x20e),_0x28b788(0x1f4),_0x28b788(0x1cc),'invitedGuestSendModel4Count',_0x28b788(0x170),_0x28b788(0x17c),_0x28b788(0x195),_0x28b788(0x168),'isUseWxLogin',_0x28b788(0x158),_0x28b788(0x1e1),_0x28b788(0x19b),'buyCramiAddress','mindDefaultData',_0x28b788(0x20b),'payEpayChannel',_0x28b788(0x1a2),_0x28b788(0x20d),_0x28b788(0x151),_0x28b788(0x1af),_0x28b788(0x1d0),_0x28b788(0x1fe),'isAutoOpenNotice','isShowAppCatIcon',_0x28b788(0x1ae),_0x28b788(0x1ce),_0x28b788(0x179),_0x28b788(0x1e8),_0x28b788(0x1b6),'phoneRegisterStatus',_0x28b788(0x206),_0x28b788(0x163),'phoneLoginStatus',_0x28b788(0x191),'wechatSilentLoginStatus',_0x28b788(0x196),'signInModel3Count',_0x28b788(0x200),_0x28b788(0x1b7),_0x28b788(0x1c7),_0x28b788(0x185),_0x28b788(0x19f),_0x28b788(0x169),'mjHideWorkIn',_0x28b788(0x207)],_0x52e6ac=await this[_0x28b788(0x14c)][_0x28b788(0x1bb)]({'where':{'configKey':(0x0,typeorm_2['In'])(_0x298f0b)}}),{domain:_0x4c417c}=_0x5581a2,_0x53508b=this['globalConfigs'][_0x28b788(0x1a8)];_0x53508b!==_0x4c417c&&(this['createOrUpdate']({'configKey':_0x28b788(0x1a8),'configVal':_0x4c417c,'status':0x1}),await this[_0x28b788(0x1c1)]());const _0x1fe344=_0x52e6ac[_0x28b788(0x1dd)]((_0x10db71,_0x3c344e)=>{const _0x553f71=_0x28b788;return _0x10db71[_0x3c344e['configKey']]=_0x3c344e[_0x553f71(0x1b8)],_0x10db71;},{}),{wechatOfficialAppId:_0x123a3a,wechatOfficialAppSecret:_0x39d3a5}=await this[_0x28b788(0x1b5)]([_0x28b788(0x1ea),_0x28b788(0x18f)]),_0x6100e9=!!(_0x123a3a&&_0x39d3a5);return Object[_0x28b788(0x184)](Object[_0x28b788(0x184)]({},_0x1fe344),{'isUseWxLogin':_0x6100e9});}async['queryGptKeys'](_0x360e30){const _0x189680=_0x34328e,{role:_0x1aff05}=_0x360e30[_0x189680(0x18e)],_0x312ee7=await this['configEntity'][_0x189680(0x1bb)]({'where':{'configKey':(0x0,typeorm_2[_0x189680(0x1b1)])('%'+_0x189680(0x1cd)+'%')}});if(_0x1aff05===_0x189680(0x171))return _0x312ee7;return _0x312ee7[_0x189680(0x1f9)](_0x228a34=>{const _0x51e73f=_0x189680;return _0x228a34[_0x51e73f(0x1b8)]=(0x0,utils_1[_0x51e73f(0x160)])(_0x228a34['configVal']),_0x228a34;});}async[_0x34328e(0x14a)](_0x4555d1){const _0x307865=_0x34328e,_0x2c1f92=_0x4555d1['configs'][_0x307865(0x194)](_0x2317bc=>_0x2317bc[_0x307865(0x1b8)]),_0x36ca49=_0x2c1f92[_0x307865(0x1f9)](_0x247b42=>_0x247b42[_0x307865(0x14e)]);for(const [_0x9d8647,_0x13d88c]of _0x2c1f92[_0x307865(0x155)]()){const {configKey:_0x2121fc,configVal:_0x219754,status:_0x4895a3}=_0x13d88c;await this['createOrUpdate']({'configKey':_0x307865(0x1cb)+(_0x9d8647+0x1),'configVal':_0x219754,'status':_0x4895a3});}const _0x202a95=await this['configEntity'][_0x307865(0x1bb)]({'where':{'configKey':(0x0,typeorm_2[_0x307865(0x1b1)])('%'+_0x307865(0x1cd)+'%')}}),_0x55d25a=_0x202a95[_0x307865(0x1f9)](_0x24ad33=>_0x24ad33[_0x307865(0x14e)]);if(_0x55d25a['length']>_0x36ca49[_0x307865(0x208)]){const _0x41c37e=(0x0,utils_1[_0x307865(0x1ab)])(_0x55d25a['length'],_0x36ca49[_0x307865(0x208)],_0x307865(0x1cb));for(const _0x37d409 of _0x41c37e){await this[_0x307865(0x14c)][_0x307865(0x203)]({'configKey':_0x37d409});}}return await this['initGetAllConfig'](),_0x307865(0x164);}async[_0x34328e(0x182)](_0x4396b2,_0x32a4b4){const _0x44bb68=_0x34328e,{role:_0x27e385}=_0x32a4b4['user'],{keys:_0x1db056}=_0x4396b2,_0x341187=await this[_0x44bb68(0x14c)]['find']({'where':{'configKey':(0x0,typeorm_2['In'])(_0x1db056)}});return _0x27e385!=='super'&&_0x341187['forEach'](_0x327ed7=>{const _0xbb0bca=_0x44bb68;if(_0x327ed7[_0xbb0bca(0x14e)][_0xbb0bca(0x1bc)]('mj')||_0x327ed7[_0xbb0bca(0x14e)][_0xbb0bca(0x1bc)](_0xbb0bca(0x1b3))||_0x327ed7[_0xbb0bca(0x14e)][_0xbb0bca(0x1bc)](_0xbb0bca(0x17e))||_0x327ed7[_0xbb0bca(0x14e)]['includes'](_0xbb0bca(0x173))||_0x327ed7['configKey'][_0xbb0bca(0x1bc)](_0xbb0bca(0x1e5))||_0x327ed7[_0xbb0bca(0x14e)]['includes'](_0xbb0bca(0x192))||_0x327ed7[_0xbb0bca(0x14e)]['includes'](_0xbb0bca(0x16f))||_0x327ed7[_0xbb0bca(0x14e)]['includes'](_0xbb0bca(0x174))||_0x327ed7['configKey'][_0xbb0bca(0x1bc)](_0xbb0bca(0x1f6))||_0x327ed7[_0xbb0bca(0x14e)][_0xbb0bca(0x1bc)](_0xbb0bca(0x18d))||_0x327ed7[_0xbb0bca(0x14e)]==='openaiBaseUrl'){const _0x967d28=[_0xbb0bca(0x1c2),'payWeChatPrivateKey'];if(_0x967d28[_0xbb0bca(0x1bc)](_0x327ed7[_0xbb0bca(0x14e)]))return _0x327ed7['configVal']=(0x0,utils_1[_0xbb0bca(0x160)])(_0x327ed7[_0xbb0bca(0x1b8)],_0xbb0bca(0x1c0));const _0x2add9e=[_0xbb0bca(0x151),'payHupiStatus',_0xbb0bca(0x1be)];!_0x2add9e[_0xbb0bca(0x1bc)](_0x327ed7[_0xbb0bca(0x14e)])&&!_0x327ed7[_0xbb0bca(0x14e)]['includes'](_0xbb0bca(0x1bd))&&(_0x327ed7[_0xbb0bca(0x1b8)]=(0x0,utils_1['hideString'])(_0x327ed7[_0xbb0bca(0x1b8)]));}}),_0x341187[_0x44bb68(0x1dd)]((_0x467c82,_0xc08b48)=>{const _0xe22bbd=_0x44bb68;return _0x467c82[_0xc08b48[_0xe22bbd(0x14e)]]=_0xc08b48['configVal'],_0x467c82;},{});}[_0x34328e(0x18c)](){const _0x37dcfc=_0x34328e,_0x2b2c4c=this['globalConfigs'][_0x37dcfc(0x1c8)],_0x1904b2=this['nineAiToken'];return!_0x1904b2||Number(_0x2b2c4c)===0x1;}async[_0x34328e(0x188)](_0x402809){const _0x501e3d=_0x34328e;try{const {settings:_0x1294b5}=_0x402809;for(const _0x3817d2 of _0x1294b5){await this[_0x501e3d(0x1ca)](_0x3817d2);}await this[_0x501e3d(0x1c1)]();const _0x340130=_0x1294b5['map'](_0x539e76=>_0x539e76[_0x501e3d(0x14e)]);return(_0x340130[_0x501e3d(0x1bc)](_0x501e3d(0x1b9))||_0x340130[_0x501e3d(0x1bc)](_0x501e3d(0x152)))&&await this[_0x501e3d(0x15e)](![]),(_0x340130['includes'](_0x501e3d(0x1ea))||_0x340130[_0x501e3d(0x1bc)](_0x501e3d(0x18f)))&&await this[_0x501e3d(0x1cf)](),'设置完成！';}catch(_0x3bb806){console[_0x501e3d(0x1a5)](_0x501e3d(0x1f1),_0x3bb806);}}async[_0x34328e(0x1ca)](_0x4a76d3){const _0x4ff217=_0x34328e;try{const {configKey:_0x71156c,configVal:_0x59fd39,status:status=0x1}=_0x4a76d3,_0x3ec0ad=await this[_0x4ff217(0x14c)][_0x4ff217(0x1d4)]({'where':{'configKey':_0x71156c}});if(_0x3ec0ad){const _0x24d0ab=await this[_0x4ff217(0x14c)][_0x4ff217(0x204)]({'configKey':_0x71156c},{'configVal':_0x59fd39,'status':status});}else{const _0x4e3a61=await this[_0x4ff217(0x14c)][_0x4ff217(0x1c5)]({'configKey':_0x71156c,'configVal':_0x59fd39,'status':status});}}catch(_0x1ab997){console[_0x4ff217(0x1a5)](_0x4ff217(0x1f1),_0x1ab997);throw new common_1[(_0x4ff217(0x1c3))](_0x4ff217(0x20f),common_1['HttpStatus'][_0x4ff217(0x1da)]);}}async[_0x34328e(0x14b)](){return await this['getConfigs'](['noticeInfo','noticeTitle']);}async['getCopyright'](){return await this['getConfigs'](['copyrightUrl','copyrightTitle']);}async['queryPayType'](){const _0x4446ac=_0x34328e,{payHupiStatus:payHupiStatus=0x0,payEpayStatus:payEpayStatus=0x0,payWechatStatus:payWechatStatus=0x0,payMpayStatus:payMpayStatus=0x0}=await this['getConfigs'](['payHupiStatus',_0x4446ac(0x151),_0x4446ac(0x1fe),_0x4446ac(0x1d0)]);if([payHupiStatus,payEpayStatus,payWechatStatus,payMpayStatus][_0x4446ac(0x1b0)](_0x3396eb=>_0x3396eb===0x0))throw new common_1[(_0x4446ac(0x1c3))](_0x4446ac(0x209),common_1['HttpStatus'][_0x4446ac(0x1da)]);if(Number(payWechatStatus)===0x1)return _0x4446ac(0x1f6);if(Number(payEpayStatus)===0x1)return _0x4446ac(0x1f2);if(Number(payMpayStatus)===0x1)return _0x4446ac(0x1e9);if(Number(payHupiStatus)===0x1)return'hupi';}async[_0x34328e(0x16c)](){const _0x1c89fe=_0x34328e,{siteName:_0x214e20,qqNumber:_0x5e0cca,vxNumber:_0x4337f7,registerBaseUrl:_0x5c5139,domain:_0x283af2}=await this[_0x1c89fe(0x1b5)]([_0x1c89fe(0x158),_0x1c89fe(0x1d3),_0x1c89fe(0x1ef),_0x1c89fe(0x1d1),_0x1c89fe(0x1a8)]);return{'siteName':_0x214e20,'qqNumber':_0x5e0cca,'vxNumber':_0x4337f7,'registerBaseUrl':_0x5c5139,'domain':_0x283af2};}async[_0x34328e(0x17b)](){const _0x52b09f=_0x34328e,{phoneRegisterStatus:_0x113bd6,aliPhoneAccessKeyId:_0x2f7915,aliPhoneAccessKeySecret:_0x26dc67,aliPhoneSignName:_0x33be2e,aliPhoneTemplateCode:_0x1da075}=await this[_0x52b09f(0x1b5)]([_0x52b09f(0x1ed),'aliPhoneAccessKeyId',_0x52b09f(0x1b4),_0x52b09f(0x1c9),_0x52b09f(0x198)]);if(Number(_0x113bd6)!==0x1)throw new common_1[(_0x52b09f(0x1c3))]('手机验证码功能暂未开放!',common_1['HttpStatus'][_0x52b09f(0x1da)]);return{'accessKeyId':_0x2f7915,'accessKeySecret':_0x26dc67,'SignName':_0x33be2e,'TemplateCode':_0x1da075};}['getNamespace'](){const _0x5943c6=_0x34328e;return process[_0x5943c6(0x1e7)][_0x5943c6(0x15d)]||_0x5943c6(0x1fa);}async[_0x34328e(0x19a)](){const _0x37c9ca=_0x34328e,{signInStatus:signInStatus=0x0,signInModel3Count:signInModel3Count=0x0,signInModel4Count:signInModel4Count=0x0,signInMjDrawToken:signInMjDrawToken=0x0}=await this['getConfigs']([_0x37c9ca(0x196),'signInModel3Count','signInModel4Count','signInMjDrawToken']);if(Number(signInStatus)!==0x1)throw new common_1[(_0x37c9ca(0x1c3))](_0x37c9ca(0x18a),common_1[_0x37c9ca(0x20a)][_0x37c9ca(0x1da)]);return{'model3Count':Number(signInModel3Count),'model4Count':Number(signInModel4Count),'drawMjCount':Number(signInMjDrawToken)};}async[_0x34328e(0x1eb)](){const _0x4f7479=_0x34328e,_0x6b09b4=_0x4f7479(0x1ac),_0x49805f=await fetch(_0x6b09b4,{}),_0x1ed23f=await _0x49805f[_0x4f7479(0x16b)](),{success:success=!![],message:_0xce8dc}=_0x1ed23f;common_1['Logger']['error']('请按要求填写正确的授权信息'),common_1['Logger'][_0x4f7479(0x1fc)](_0x4f7479(0x1ad)),common_1['Logger'][_0x4f7479(0x1fc)]('缺失ip信息'),common_1[_0x4f7479(0x1b2)]['error'](_0x4f7479(0x156)),common_1[_0x4f7479(0x1b2)][_0x4f7479(0x1f5)](_0x4f7479(0x1f8));}async[_0x34328e(0x154)](){const _0x41e5f0=_0x34328e,{baiduTextStatus:baiduTextStatus=0x0,baiduTextAccessToken:_0x18c691,nineaiBuiltInSensitiveStatus:nineaiBuiltInSensitiveStatus=0x0,nineaiBuiltInSensitiveApiBase:_0x15e7aa,nineaiBuiltInSensitiveAuthKey:_0x285a0e}=await this[_0x41e5f0(0x1b5)]([_0x41e5f0(0x1f3),_0x41e5f0(0x1dc),_0x41e5f0(0x16e),_0x41e5f0(0x166),_0x41e5f0(0x157)]);if(Number(baiduTextStatus)===0x1)return{'useType':_0x41e5f0(0x1e5),'baiduTextAccessToken':_0x18c691};if(Number(nineaiBuiltInSensitiveStatus)===0x1)return{'useType':_0x41e5f0(0x175),'nineaiBuiltInSensitiveApiBase':_0x15e7aa,'nineaiBuiltInSensitiveAuthKey':_0x285a0e};return null;}};GlobalConfigService=__decorate([(0x0,common_1[_0x34328e(0x172)])(),__param(0x0,(0x0,typeorm_1[_0x34328e(0x1d6)])(config_entity_1[_0x34328e(0x1d2)])),__param(0x1,(0x0,typeorm_1[_0x34328e(0x1d6)])(chatLog_entity_1[_0x34328e(0x167)])),__metadata(_0x34328e(0x1aa),[typeorm_2['Repository'],typeorm_2[_0x34328e(0x193)],models_service_1['ModelsService']])],GlobalConfigService),exports[_0x34328e(0x186)]=GlobalConfigService;