'use strict';const _0x32689a=_0xe692;(function(_0x7bdda8,_0x2c4f98){const _0x639f02=_0xe692,_0x1b09dc=_0x7bdda8();while(!![]){try{const _0x2fc007=-parseInt(_0x639f02(0x1dd))/0x1+-parseInt(_0x639f02(0x1e5))/0x2*(-parseInt(_0x639f02(0x1fd))/0x3)+parseInt(_0x639f02(0x1da))/0x4+parseInt(_0x639f02(0x1df))/0x5+-parseInt(_0x639f02(0x1f8))/0x6+parseInt(_0x639f02(0x1ea))/0x7+parseInt(_0x639f02(0x1ff))/0x8*(-parseInt(_0x639f02(0x1e2))/0x9);if(_0x2fc007===_0x2c4f98)break;else _0x1b09dc['push'](_0x1b09dc['shift']());}catch(_0x5722a2){_0x1b09dc['push'](_0x1b09dc['shift']());}}}(_0x1464,0x4ac44));var __decorate=this&&this[_0x32689a(0x1f1)]||function(_0x2e79c7,_0x3b0a03,_0xfd2787,_0x35868b){const _0x520fa0=_0x32689a;var _0x25cfa0=arguments[_0x520fa0(0x1e4)],_0x71c996=_0x25cfa0<0x3?_0x3b0a03:_0x35868b===null?_0x35868b=Object['getOwnPropertyDescriptor'](_0x3b0a03,_0xfd2787):_0x35868b,_0x2c3b54;if(typeof Reflect===_0x520fa0(0x1e6)&&typeof Reflect[_0x520fa0(0x1f5)]===_0x520fa0(0x1dc))_0x71c996=Reflect['decorate'](_0x2e79c7,_0x3b0a03,_0xfd2787,_0x35868b);else{for(var _0x595740=_0x2e79c7[_0x520fa0(0x1e4)]-0x1;_0x595740>=0x0;_0x595740--)if(_0x2c3b54=_0x2e79c7[_0x595740])_0x71c996=(_0x25cfa0<0x3?_0x2c3b54(_0x71c996):_0x25cfa0>0x3?_0x2c3b54(_0x3b0a03,_0xfd2787,_0x71c996):_0x2c3b54(_0x3b0a03,_0xfd2787))||_0x71c996;}return _0x25cfa0>0x3&&_0x71c996&&Object[_0x520fa0(0x200)](_0x3b0a03,_0xfd2787,_0x71c996),_0x71c996;},__metadata=this&&this[_0x32689a(0x1f2)]||function(_0x434c95,_0xde9ff7){const _0x3a9e79=_0x32689a;if(typeof Reflect===_0x3a9e79(0x1e6)&&typeof Reflect[_0x3a9e79(0x1fa)]==='function')return Reflect[_0x3a9e79(0x1fa)](_0x434c95,_0xde9ff7);},__param=this&&this[_0x32689a(0x1fc)]||function(_0x7c23a6,_0x33dbd4){return function(_0x33df4d,_0x45809d){_0x33dbd4(_0x33df4d,_0x45809d,_0x7c23a6);};};Object[_0x32689a(0x200)](exports,_0x32689a(0x1f3),{'value':!![]}),exports[_0x32689a(0x1e0)]=void 0x0;const common_1=require(_0x32689a(0x1de));let RedisCacheService=class RedisCacheService{constructor(_0x148154){const _0x1093ff=_0x32689a;this[_0x1093ff(0x1ee)]=_0x148154;}async[_0x32689a(0x1e3)](){}[_0x32689a(0x1e9)](){const _0x15dac1=_0x32689a;return this[_0x15dac1(0x1ee)]['set']('aaa',0x6f),0x1;}async[_0x32689a(0x1e8)](_0x4c4308){const _0x487942=_0x32689a,{key:_0x2c1cdd}=_0x4c4308,_0x1ea9b5=await this[_0x487942(0x1ee)]['get'](_0x2c1cdd);return await this[_0x487942(0x1ee)][_0x487942(0x1e8)](_0x2c1cdd);}async[_0x32689a(0x205)](_0x17f76d,_0x58d6c0){const _0x39be47=_0x32689a;try{const {key:_0x4a80fa,val:_0x3f16d8}=_0x17f76d;await this[_0x39be47(0x1ee)][_0x39be47(0x205)](_0x4a80fa,_0x3f16d8),_0x58d6c0&&await this[_0x39be47(0x1ee)][_0x39be47(0x1f7)](_0x4a80fa,_0x58d6c0);return;}catch(_0x40308e){throw new common_1[(_0x39be47(0x1f4))](_0x40308e,common_1[_0x39be47(0x1ed)][_0x39be47(0x1f0)]);}}async['ttl'](_0x53523c){const _0x51e014=_0x32689a;return await this['redisClient'][_0x51e014(0x1f6)](_0x53523c);}async['del'](_0x191265){const _0x3fa227=_0x32689a,{key:_0x4bc1f3}=_0x191265;await this[_0x3fa227(0x1ee)][_0x3fa227(0x1ec)](_0x4bc1f3);return;}async[_0x32689a(0x202)](_0x47ef84,_0xe1a22d){const _0x507d52=_0x32689a,_0x3ffe85=await this[_0x507d52(0x1ee)][_0x507d52(0x1ef)](_0x507d52(0x203)+_0x47ef84,0x0,-0x1);await this[_0x507d52(0x1f9)](_0x47ef84,_0x3ffe85),this[_0x507d52(0x1ee)][_0x507d52(0x205)](_0x507d52(0x201)+_0x47ef84,_0xe1a22d);}async['invalidateTokens'](_0x47c1f0,_0x38f333){const _0x3b2d53=_0x32689a;_0x38f333[_0x3b2d53(0x1e7)](_0x33fc48=>{const _0x159fad=_0x3b2d53;this['redisClient'][_0x159fad(0x1ec)]('token:'+_0x47c1f0+':'+_0x33fc48);});}async[_0x32689a(0x1e1)](_0x35f9de,_0x406e65){const _0x439dd7=_0x32689a,{id:_0x49c185,role:_0x52f2bc}=_0x406e65['user'];if(_0x52f2bc===_0x439dd7(0x1fe))return!![];const _0x46db32=await this['redisClient'][_0x439dd7(0x1e8)](_0x439dd7(0x201)+_0x49c185);if(_0x46db32===null)return await this['redisClient'][_0x439dd7(0x205)](_0x439dd7(0x201)+_0x49c185,_0x35f9de),!![];if(_0x46db32!==_0x35f9de){if(['super','admin'][_0x439dd7(0x204)](_0x52f2bc))return!![];throw new common_1[(_0x439dd7(0x1f4))]('您已在其他设备覆盖登录、请您重新登录！',common_1[_0x439dd7(0x1ed)]['UNAUTHORIZED']);}}};RedisCacheService=__decorate([(0x0,common_1[_0x32689a(0x1eb)])(),__param(0x0,(0x0,common_1[_0x32689a(0x1fb)])(_0x32689a(0x1db))),__metadata(_0x32689a(0x206),[Object])],RedisCacheService),exports['RedisCacheService']=RedisCacheService;function _0xe692(_0x121d94,_0x4d2674){const _0x14642d=_0x1464();return _0xe692=function(_0xe69287,_0xa0e4e5){_0xe69287=_0xe69287-0x1da;let _0x223d08=_0x14642d[_0xe69287];return _0x223d08;},_0xe692(_0x121d94,_0x4d2674);}function _0x1464(){const _0x34386d=['1616595lwnPiM','RedisCacheService','checkTokenAuth','9PrZywE','onModuleInit','length','32nywMXz','object','forEach','get','test','3876824uZJsen','Injectable','del','HttpStatus','redisClient','zRange','BAD_REQUEST','__decorate','__metadata','__esModule','HttpException','decorate','ttl','expire','2897562cPxtWq','invalidateTokens','metadata','Inject','__param','56517vTFYmN','visitor','6082000ldOnfW','defineProperty','token:','saveToken','tokens:','includes','set','design:paramtypes','1900544wmVHkC','REDIS_CLIENT','function','104290COJeBW','@nestjs/common'];_0x1464=function(){return _0x34386d;};return _0x1464();}