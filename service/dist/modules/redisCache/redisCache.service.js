'use strict';const _0x40feb1=_0x1af3;(function(_0x3ecd0f,_0x3e974b){const _0x5d0617=_0x1af3,_0x256928=_0x3ecd0f();while(!![]){try{const _0x202f1e=-parseInt(_0x5d0617(0x20d))/0x1*(parseInt(_0x5d0617(0x1f4))/0x2)+-parseInt(_0x5d0617(0x201))/0x3+parseInt(_0x5d0617(0x1ee))/0x4+parseInt(_0x5d0617(0x1fc))/0x5+parseInt(_0x5d0617(0x1ed))/0x6*(-parseInt(_0x5d0617(0x20f))/0x7)+parseInt(_0x5d0617(0x1f2))/0x8*(-parseInt(_0x5d0617(0x20a))/0x9)+parseInt(_0x5d0617(0x1eb))/0xa;if(_0x202f1e===_0x3e974b)break;else _0x256928['push'](_0x256928['shift']());}catch(_0x21a3c7){_0x256928['push'](_0x256928['shift']());}}}(_0xf66c,0x5d9ed));function _0xf66c(){const _0x5e021d=['UNAUTHORIZED','design:paramtypes','__esModule','16965010zmkGFP','expire','183786ZeRyRp','1782552qYOGpO','set','super','decorate','40PXNoAX','visitor','18BNVrEE','aaa','zRange','invalidateTokens','test','metadata','HttpException','get','131620fcHfOf','getOwnPropertyDescriptor','object','includes','token:','1765497EhMdUO','defineProperty','RedisCacheService','del','redisClient','saveToken','function','@nestjs/common','length','1365921cHOojv','HttpStatus','admin','35014nlltBF','__metadata','28ThQGZx','Inject','__param','Injectable','tokens:','checkTokenAuth','user','REDIS_CLIENT','forEach','BAD_REQUEST'];_0xf66c=function(){return _0x5e021d;};return _0xf66c();}var __decorate=this&&this['__decorate']||function(_0x47841c,_0x32407e,_0x2ec489,_0x37649f){const _0x2c1d76=_0x1af3;var _0x2ca22a=arguments[_0x2c1d76(0x209)],_0x40ec9c=_0x2ca22a<0x3?_0x32407e:_0x37649f===null?_0x37649f=Object[_0x2c1d76(0x1fd)](_0x32407e,_0x2ec489):_0x37649f,_0x41fae5;if(typeof Reflect===_0x2c1d76(0x1fe)&&typeof Reflect['decorate']===_0x2c1d76(0x207))_0x40ec9c=Reflect[_0x2c1d76(0x1f1)](_0x47841c,_0x32407e,_0x2ec489,_0x37649f);else{for(var _0x3d9c30=_0x47841c['length']-0x1;_0x3d9c30>=0x0;_0x3d9c30--)if(_0x41fae5=_0x47841c[_0x3d9c30])_0x40ec9c=(_0x2ca22a<0x3?_0x41fae5(_0x40ec9c):_0x2ca22a>0x3?_0x41fae5(_0x32407e,_0x2ec489,_0x40ec9c):_0x41fae5(_0x32407e,_0x2ec489))||_0x40ec9c;}return _0x2ca22a>0x3&&_0x40ec9c&&Object[_0x2c1d76(0x202)](_0x32407e,_0x2ec489,_0x40ec9c),_0x40ec9c;},__metadata=this&&this[_0x40feb1(0x20e)]||function(_0x2a6a98,_0x271068){const _0xecb61c=_0x40feb1;if(typeof Reflect===_0xecb61c(0x1fe)&&typeof Reflect[_0xecb61c(0x1f9)]==='function')return Reflect[_0xecb61c(0x1f9)](_0x2a6a98,_0x271068);},__param=this&&this[_0x40feb1(0x211)]||function(_0x2a9649,_0x21fd90){return function(_0x314059,_0x101fdc){_0x21fd90(_0x314059,_0x101fdc,_0x2a9649);};};function _0x1af3(_0x40b719,_0x21bfe0){const _0xf66c4=_0xf66c();return _0x1af3=function(_0x1af3ac,_0x44a056){_0x1af3ac=_0x1af3ac-0x1e9;let _0x50fb27=_0xf66c4[_0x1af3ac];return _0x50fb27;},_0x1af3(_0x40b719,_0x21bfe0);}Object['defineProperty'](exports,_0x40feb1(0x1ea),{'value':!![]}),exports[_0x40feb1(0x203)]=void 0x0;const common_1=require(_0x40feb1(0x208));let RedisCacheService=class RedisCacheService{constructor(_0xe7c029){const _0x12d708=_0x40feb1;this[_0x12d708(0x205)]=_0xe7c029;}async['onModuleInit'](){}[_0x40feb1(0x1f8)](){const _0x2d9b0a=_0x40feb1;return this[_0x2d9b0a(0x205)][_0x2d9b0a(0x1ef)](_0x2d9b0a(0x1f5),0x6f),0x1;}async[_0x40feb1(0x1fb)](_0x54a69b){const _0x484829=_0x40feb1,{key:_0x3e4dfc}=_0x54a69b,_0x330d37=await this[_0x484829(0x205)][_0x484829(0x1fb)](_0x3e4dfc);return await this[_0x484829(0x205)][_0x484829(0x1fb)](_0x3e4dfc);}async[_0x40feb1(0x1ef)](_0x198acb,_0xe439ad){const _0x291359=_0x40feb1;try{const {key:_0x10f603,val:_0x63d458}=_0x198acb;await this['redisClient'][_0x291359(0x1ef)](_0x10f603,_0x63d458),_0xe439ad&&await this['redisClient'][_0x291359(0x1ec)](_0x10f603,_0xe439ad);return;}catch(_0x1651e9){throw new common_1['HttpException'](_0x1651e9,common_1['HttpStatus'][_0x291359(0x218)]);}}async['ttl'](_0x3a129a){const _0x1326e8=_0x40feb1;return await this[_0x1326e8(0x205)]['ttl'](_0x3a129a);}async[_0x40feb1(0x204)](_0x34934f){const _0x3d95ca=_0x40feb1,{key:_0x35610a}=_0x34934f;await this[_0x3d95ca(0x205)][_0x3d95ca(0x204)](_0x35610a);return;}async[_0x40feb1(0x206)](_0x42edc0,_0x2269f4){const _0xd41e31=_0x40feb1,_0x502c88=await this[_0xd41e31(0x205)][_0xd41e31(0x1f6)](_0xd41e31(0x213)+_0x42edc0,0x0,-0x1);await this[_0xd41e31(0x1f7)](_0x42edc0,_0x502c88),this[_0xd41e31(0x205)][_0xd41e31(0x1ef)]('token:'+_0x42edc0,_0x2269f4);}async[_0x40feb1(0x1f7)](_0x353423,_0x1785bf){const _0x3967cd=_0x40feb1;_0x1785bf[_0x3967cd(0x217)](_0x458e8f=>{const _0x179d4c=_0x3967cd;this['redisClient'][_0x179d4c(0x204)](_0x179d4c(0x200)+_0x353423+':'+_0x458e8f);});}async[_0x40feb1(0x214)](_0x400b31,_0xe6f733){const _0x41b21c=_0x40feb1,{id:_0x1705ee,role:_0xb9ff80}=_0xe6f733[_0x41b21c(0x215)];if(_0xb9ff80===_0x41b21c(0x1f3))return!![];const _0x45c3fa=await this[_0x41b21c(0x205)][_0x41b21c(0x1fb)](_0x41b21c(0x200)+_0x1705ee);if(_0x45c3fa===null)return await this[_0x41b21c(0x205)][_0x41b21c(0x1ef)]('token:'+_0x1705ee,_0x400b31),!![];if(_0x45c3fa!==_0x400b31){if([_0x41b21c(0x1f0),_0x41b21c(0x20c)][_0x41b21c(0x1ff)](_0xb9ff80))return!![];throw new common_1[(_0x41b21c(0x1fa))]('您已在其他设备覆盖登录、请您重新登录！',common_1[_0x41b21c(0x20b)][_0x41b21c(0x219)]);}}};RedisCacheService=__decorate([(0x0,common_1[_0x40feb1(0x212)])(),__param(0x0,(0x0,common_1[_0x40feb1(0x210)])(_0x40feb1(0x216))),__metadata(_0x40feb1(0x1e9),[Object])],RedisCacheService),exports[_0x40feb1(0x203)]=RedisCacheService;