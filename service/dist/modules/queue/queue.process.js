'use strict';var _0x47118c=_0x4733;(function(_0x26d80c,_0x55c6d3){var _0xd52083=_0x4733,_0x4660e2=_0x26d80c();while(!![]){try{var _0x37878a=-parseInt(_0xd52083(0x152))/0x1*(-parseInt(_0xd52083(0x173))/0x2)+-parseInt(_0xd52083(0x179))/0x3*(-parseInt(_0xd52083(0x153))/0x4)+parseInt(_0xd52083(0x177))/0x5+parseInt(_0xd52083(0x17b))/0x6*(parseInt(_0xd52083(0x143))/0x7)+parseInt(_0xd52083(0x146))/0x8+-parseInt(_0xd52083(0x150))/0x9*(parseInt(_0xd52083(0x157))/0xa)+parseInt(_0xd52083(0x172))/0xb*(-parseInt(_0xd52083(0x180))/0xc);if(_0x37878a===_0x55c6d3)break;else _0x4660e2['push'](_0x4660e2['shift']());}catch(_0x6e5ad7){_0x4660e2['push'](_0x4660e2['shift']());}}}(_0x3b13,0x229e3));function _0x4733(_0x2a4b75,_0x202a5a){var _0x3b13fb=_0x3b13();return _0x4733=function(_0x47338d,_0x429c55){_0x47338d=_0x47338d-0x142;var _0x294e3d=_0x3b13fb[_0x47338d];return _0x294e3d;},_0x4733(_0x2a4b75,_0x202a5a);}var __decorate=this&&this[_0x47118c(0x162)]||function(_0x5d91bc,_0x126742,_0x4fcffb,_0x350b10){var _0x289ffc=_0x47118c,_0x27df7f=arguments[_0x289ffc(0x160)],_0x425d67=_0x27df7f<0x3?_0x126742:_0x350b10===null?_0x350b10=Object[_0x289ffc(0x159)](_0x126742,_0x4fcffb):_0x350b10,_0x486030;if(typeof Reflect===_0x289ffc(0x14d)&&typeof Reflect['decorate']===_0x289ffc(0x148))_0x425d67=Reflect[_0x289ffc(0x151)](_0x5d91bc,_0x126742,_0x4fcffb,_0x350b10);else{for(var _0x4f7849=_0x5d91bc[_0x289ffc(0x160)]-0x1;_0x4f7849>=0x0;_0x4f7849--)if(_0x486030=_0x5d91bc[_0x4f7849])_0x425d67=(_0x27df7f<0x3?_0x486030(_0x425d67):_0x27df7f>0x3?_0x486030(_0x126742,_0x4fcffb,_0x425d67):_0x486030(_0x126742,_0x4fcffb))||_0x425d67;}return _0x27df7f>0x3&&_0x425d67&&Object[_0x289ffc(0x14b)](_0x126742,_0x4fcffb,_0x425d67),_0x425d67;},__metadata=this&&this['__metadata']||function(_0x14fa81,_0x58d778){var _0x3a638c=_0x47118c;if(typeof Reflect===_0x3a638c(0x14d)&&typeof Reflect[_0x3a638c(0x169)]===_0x3a638c(0x148))return Reflect['metadata'](_0x14fa81,_0x58d778);},QueueProcessor_1;function _0x3b13(){var _0x49d7f6=['../midjourney/midjourney.service','design:type','Queue\x20failed:\x20','length','MidjourneyService','__decorate','env','onQueueActive','log','onQueueError','draw','onQueueResumed','metadata','prototype','@nestjs/bull','handleJob','Logger','onQueueCompleted','__esModule','onQueueDrained','onQueueFailed','7095shpvBF','114602mhHJeT','Processor','onQueueCleaned','onQueueProgress','1340000TtRiEH',':\x20绘画失败\x20','6VOVxQs','logger','601710FAJfoO','design:paramtypes','@nestjs/common','error','CONCURRENCY','6924wdcbts','\x20jobs\x20of\x20type\x20','name','OnQueueFailed','7XHkLcx','midjourneyService','Process','1757240AYZzrw','OnQueueCompleted','function','QueueProcessor','design:returntype','defineProperty','OnQueueDrained','object','message','\x20were\x20cleaned.','1744191qJrpyV','decorate','1mORcwg','125036ebWriq','队列发生错误','data','drawFailed','10HuCaho','队列恢复的时候调用','getOwnPropertyDescriptor','OnQueueProgress','mjDraw','OnQueuePaused'];_0x3b13=function(){return _0x49d7f6;};return _0x3b13();}Object['defineProperty'](exports,_0x47118c(0x16f),{'value':!![]}),exports[_0x47118c(0x149)]=void 0x0;const bull_1=require(_0x47118c(0x16b)),common_1=require(_0x47118c(0x17d)),midjourney_service_1=require(_0x47118c(0x15d));let QueueProcessor=QueueProcessor_1=class QueueProcessor{constructor(_0x1a46b6){var _0x53a933=_0x47118c;this[_0x53a933(0x144)]=_0x1a46b6,this[_0x53a933(0x17a)]=new common_1['Logger'](QueueProcessor_1[_0x53a933(0x182)]);}async[_0x47118c(0x16c)](_0x2a640e){var _0x31cc88=_0x47118c;const _0x262ab3=await this[_0x31cc88(0x144)][_0x31cc88(0x167)](_0x2a640e[_0x31cc88(0x155)],_0x2a640e['id']);return _0x262ab3;}[_0x47118c(0x164)](_0x18ad11){}[_0x47118c(0x166)](_0x5d55b3){var _0x2a766f=_0x47118c;console[_0x2a766f(0x165)](_0x2a766f(0x154),_0x5d55b3);}[_0x47118c(0x176)](_0x20dde2,_0x57e03a){var _0x557379=_0x47118c;console[_0x557379(0x165)]('队列任务的一个回调用于通知当前进度',_0x20dde2['id'],_0x57e03a);}['onQueueCompleted'](_0x2dcec4,_0x3b3aea){}[_0x47118c(0x171)](_0x71b6fe,_0x3c01de){var _0x94a49d=_0x47118c;common_1['Logger'][_0x94a49d(0x17e)](_0x94a49d(0x15f)+_0x3c01de[_0x94a49d(0x14e)]+_0x94a49d(0x178)+_0x71b6fe['id'],_0x94a49d(0x149)),this['midjourneyService'][_0x94a49d(0x156)](_0x71b6fe['data']);}['onQueuePaused'](){var _0x1dca3a=_0x47118c;console[_0x1dca3a(0x165)]('队列暂停的时候调用');}['onQueueResumed'](){var _0x449d89=_0x47118c;console[_0x449d89(0x165)](_0x449d89(0x158));}[_0x47118c(0x175)](_0x56b5ca,_0x13c619){var _0x2fe3b1=_0x47118c;common_1[_0x2fe3b1(0x16d)][_0x2fe3b1(0x165)]('Queue\x20cleaned:\x20'+_0x56b5ca['length']+_0x2fe3b1(0x181)+_0x13c619+_0x2fe3b1(0x14f),_0x2fe3b1(0x149));}[_0x47118c(0x170)](){}};__decorate([(0x0,bull_1[_0x47118c(0x145)])({'name':_0x47118c(0x15b),'concurrency':process[_0x47118c(0x163)][_0x47118c(0x17f)]?+process['env'][_0x47118c(0x17f)]:0x3}),__metadata(_0x47118c(0x15e),Function),__metadata(_0x47118c(0x17c),[Object]),__metadata(_0x47118c(0x14a),Promise)],QueueProcessor[_0x47118c(0x16a)],_0x47118c(0x16c),null),__decorate([(0x0,bull_1['OnQueueActive'])(),__metadata(_0x47118c(0x15e),Function),__metadata('design:paramtypes',[Object]),__metadata(_0x47118c(0x14a),void 0x0)],QueueProcessor[_0x47118c(0x16a)],'onQueueActive',null),__decorate([(0x0,bull_1['OnQueueError'])(),__metadata(_0x47118c(0x15e),Function),__metadata('design:paramtypes',[Error]),__metadata(_0x47118c(0x14a),void 0x0)],QueueProcessor[_0x47118c(0x16a)],'onQueueError',null),__decorate([(0x0,bull_1[_0x47118c(0x15a)])(),__metadata(_0x47118c(0x15e),Function),__metadata(_0x47118c(0x17c),[Object,Number]),__metadata('design:returntype',void 0x0)],QueueProcessor['prototype'],_0x47118c(0x176),null),__decorate([(0x0,bull_1[_0x47118c(0x147)])(),__metadata('design:type',Function),__metadata('design:paramtypes',[Object,Object]),__metadata(_0x47118c(0x14a),void 0x0)],QueueProcessor[_0x47118c(0x16a)],_0x47118c(0x16e),null),__decorate([(0x0,bull_1[_0x47118c(0x142)])(),__metadata(_0x47118c(0x15e),Function),__metadata(_0x47118c(0x17c),[Object,Error]),__metadata('design:returntype',void 0x0)],QueueProcessor[_0x47118c(0x16a)],'onQueueFailed',null),__decorate([(0x0,bull_1[_0x47118c(0x15c)])(),__metadata(_0x47118c(0x15e),Function),__metadata('design:paramtypes',[]),__metadata(_0x47118c(0x14a),void 0x0)],QueueProcessor[_0x47118c(0x16a)],'onQueuePaused',null),__decorate([(0x0,bull_1['OnQueueResumed'])(),__metadata(_0x47118c(0x15e),Function),__metadata('design:paramtypes',[]),__metadata('design:returntype',void 0x0)],QueueProcessor['prototype'],_0x47118c(0x168),null),__decorate([(0x0,bull_1['OnQueueCleaned'])(),__metadata(_0x47118c(0x15e),Function),__metadata(_0x47118c(0x17c),[Array,String]),__metadata(_0x47118c(0x14a),void 0x0)],QueueProcessor[_0x47118c(0x16a)],_0x47118c(0x175),null),__decorate([(0x0,bull_1[_0x47118c(0x14c)])(),__metadata(_0x47118c(0x15e),Function),__metadata(_0x47118c(0x17c),[]),__metadata(_0x47118c(0x14a),void 0x0)],QueueProcessor[_0x47118c(0x16a)],_0x47118c(0x170),null),QueueProcessor=QueueProcessor_1=__decorate([(0x0,bull_1[_0x47118c(0x174)])('MJDRAW'),__metadata(_0x47118c(0x17c),[midjourney_service_1[_0x47118c(0x161)]])],QueueProcessor),exports['QueueProcessor']=QueueProcessor;