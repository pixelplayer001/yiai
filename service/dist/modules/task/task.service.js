'use strict';const _0x402927=_0x3f44;(function(_0x4257ad,_0x140020){const _0x520171=_0x3f44,_0x5cabd5=_0x4257ad();while(!![]){try{const _0x4cfd0f=-parseInt(_0x520171(0xa7))/0x1*(-parseInt(_0x520171(0x84))/0x2)+-parseInt(_0x520171(0xa4))/0x3+-parseInt(_0x520171(0xa1))/0x4*(-parseInt(_0x520171(0x8c))/0x5)+-parseInt(_0x520171(0x90))/0x6*(-parseInt(_0x520171(0x80))/0x7)+-parseInt(_0x520171(0xa3))/0x8+parseInt(_0x520171(0x78))/0x9*(parseInt(_0x520171(0x7d))/0xa)+parseInt(_0x520171(0x8a))/0xb*(-parseInt(_0x520171(0x8d))/0xc);if(_0x4cfd0f===_0x140020)break;else _0x5cabd5['push'](_0x5cabd5['shift']());}catch(_0xae22df){_0x5cabd5['push'](_0x5cabd5['shift']());}}}(_0x5bbd,0x4529b));var __decorate=this&&this['__decorate']||function(_0x132d47,_0x516079,_0x4989a3,_0x5004de){const _0x398b58=_0x3f44;var _0x324ed2=arguments[_0x398b58(0x99)],_0x561c8b=_0x324ed2<0x3?_0x516079:_0x5004de===null?_0x5004de=Object[_0x398b58(0x8f)](_0x516079,_0x4989a3):_0x5004de,_0x51f7b6;if(typeof Reflect==='object'&&typeof Reflect[_0x398b58(0x85)]===_0x398b58(0xa8))_0x561c8b=Reflect['decorate'](_0x132d47,_0x516079,_0x4989a3,_0x5004de);else{for(var _0x283cce=_0x132d47['length']-0x1;_0x283cce>=0x0;_0x283cce--)if(_0x51f7b6=_0x132d47[_0x283cce])_0x561c8b=(_0x324ed2<0x3?_0x51f7b6(_0x561c8b):_0x324ed2>0x3?_0x51f7b6(_0x516079,_0x4989a3,_0x561c8b):_0x51f7b6(_0x516079,_0x4989a3))||_0x561c8b;}return _0x324ed2>0x3&&_0x561c8b&&Object[_0x398b58(0xa6)](_0x516079,_0x4989a3,_0x561c8b),_0x561c8b;},__metadata=this&&this[_0x402927(0x87)]||function(_0x162959,_0x17fc85){const _0x42df44=_0x402927;if(typeof Reflect===_0x42df44(0x91)&&typeof Reflect[_0x42df44(0x96)]===_0x42df44(0xa8))return Reflect['metadata'](_0x162959,_0x17fc85);},__param=this&&this[_0x402927(0x9c)]||function(_0x30f3b7,_0x5ee48c){return function(_0x16d5e0,_0x55e698){_0x5ee48c(_0x16d5e0,_0x55e698,_0x30f3b7);};};function _0x5bbd(){const _0x3af423=['436150DniEUt','../userBalance/userBalance.entity','10fDWcma','144sfCdDD','LessThanOrEqual','getOwnPropertyDescriptor','2337234upIimP','object','design:paramtypes','InjectRepository','modelsService','typeorm','metadata','EVERY_HOUR','ModelsService','length','debug','Repository','__param','design:returntype','Logger','TaskService','handleCron','44636KTcqEs','userBalanceEntity','1141896mmDcIZ','409071FRikKR','会员已到期、清空所有余额并移除会员身份！','defineProperty','2bcRcxJ','function','design:type','then','Injectable','CronExpression','805869jhHLTZ','prototype','update','checkUserMemerExpire','@nestjs/typeorm','60EwyCOq','Cron','@nestjs/schedule','7xiORyW','Automatically\x20refresh\x20WeChat\x20access\x20every\x20hour\x20Token','__esModule','getWechatAccessToken','89082LANplR','decorate','../models/models.service','__metadata','@nestjs/common','globalConfigService'];_0x5bbd=function(){return _0x3af423;};return _0x5bbd();}function _0x3f44(_0x242fb2,_0x4c9306){const _0x5bbdd4=_0x5bbd();return _0x3f44=function(_0x3f4453,_0x4b5a34){_0x3f4453=_0x3f4453-0x74;let _0x4c1647=_0x5bbdd4[_0x3f4453];return _0x4c1647;},_0x3f44(_0x242fb2,_0x4c9306);}Object[_0x402927(0xa6)](exports,_0x402927(0x82),{'value':!![]}),exports[_0x402927(0x9f)]=void 0x0;const globalConfig_service_1=require('./../globalConfig/globalConfig.service'),common_1=require(_0x402927(0x88)),schedule_1=require(_0x402927(0x7f)),userBalance_entity_1=require(_0x402927(0x8b)),typeorm_1=require(_0x402927(0x7c)),typeorm_2=require(_0x402927(0x95)),models_service_1=require(_0x402927(0x86));let TaskService=class TaskService{constructor(_0x415bb0,_0x21b605,_0xa07488){const _0x3c3e71=_0x402927;this[_0x3c3e71(0xa2)]=_0x415bb0,this[_0x3c3e71(0x89)]=_0x21b605,this[_0x3c3e71(0x94)]=_0xa07488;}[_0x402927(0xa0)](){const _0x2f5a43=_0x402927;common_1[_0x2f5a43(0x9e)][_0x2f5a43(0x9a)](_0x2f5a43(0x81),_0x2f5a43(0x9f)),this[_0x2f5a43(0x89)][_0x2f5a43(0x83)]();}async[_0x402927(0x7b)](){const _0x4e5060=_0x402927,_0x94d065=await this['userBalanceEntity']['find']({'where':{'expirationTime':(0x0,typeorm_2[_0x4e5060(0x8e)])(new Date())}});if(!_0x94d065||!_0x94d065['length'])return;_0x94d065['forEach'](_0x3c48a2=>{const _0x19e921=_0x4e5060;this[_0x19e921(0xa2)][_0x19e921(0x7a)]({'id':_0x3c48a2['id']},{'expirationTime':null,'packageId':0x0,'memberModel3Count':0x0,'memberModel4Count':0x0,'memberDrawMjCount':0x0})[_0x19e921(0x75)](_0x1e07c9=>{const _0x2ec2d1=_0x19e921;common_1['Logger']['debug'](_0x3c48a2['id']+_0x2ec2d1(0xa5),'TaskService');});});}};__decorate([(0x0,schedule_1[_0x402927(0x7e)])(schedule_1['CronExpression'][_0x402927(0x97)]),__metadata('design:type',Function),__metadata(_0x402927(0x92),[]),__metadata(_0x402927(0x9d),void 0x0)],TaskService[_0x402927(0x79)],'handleCron',null),__decorate([(0x0,schedule_1[_0x402927(0x7e)])(schedule_1[_0x402927(0x77)]['EVERY_5_MINUTES']),__metadata(_0x402927(0x74),Function),__metadata(_0x402927(0x92),[]),__metadata('design:returntype',Promise)],TaskService['prototype'],_0x402927(0x7b),null),TaskService=__decorate([(0x0,common_1[_0x402927(0x76)])(),__param(0x0,(0x0,typeorm_1[_0x402927(0x93)])(userBalance_entity_1['UserBalanceEntity'])),__metadata(_0x402927(0x92),[typeorm_2[_0x402927(0x9b)],globalConfig_service_1['GlobalConfigService'],models_service_1[_0x402927(0x98)]])],TaskService),exports[_0x402927(0x9f)]=TaskService;