'use strict';const _0x1e80b4=_0x4beb;(function(_0x4fa6d0,_0x4ad41a){const _0xbaca3c=_0x4beb,_0x5bbd90=_0x4fa6d0();while(!![]){try{const _0x486db1=-parseInt(_0xbaca3c(0x1d6))/0x1+parseInt(_0xbaca3c(0x18d))/0x2*(-parseInt(_0xbaca3c(0x1a1))/0x3)+parseInt(_0xbaca3c(0x191))/0x4+parseInt(_0xbaca3c(0x18b))/0x5*(-parseInt(_0xbaca3c(0x1a6))/0x6)+parseInt(_0xbaca3c(0x1c4))/0x7*(parseInt(_0xbaca3c(0x1d0))/0x8)+-parseInt(_0xbaca3c(0x1d3))/0x9*(parseInt(_0xbaca3c(0x1d7))/0xa)+parseInt(_0xbaca3c(0x178))/0xb;if(_0x486db1===_0x4ad41a)break;else _0x5bbd90['push'](_0x5bbd90['shift']());}catch(_0x5271bd){_0x5bbd90['push'](_0x5bbd90['shift']());}}}(_0x4591,0xe8162));var __decorate=this&&this[_0x1e80b4(0x1d9)]||function(_0x46da74,_0x1be4ce,_0x3d5367,_0x57c1fe){const _0x45560b=_0x1e80b4;var _0x273e04=arguments[_0x45560b(0x176)],_0x1e59de=_0x273e04<0x3?_0x1be4ce:_0x57c1fe===null?_0x57c1fe=Object['getOwnPropertyDescriptor'](_0x1be4ce,_0x3d5367):_0x57c1fe,_0x5bba92;if(typeof Reflect==='object'&&typeof Reflect[_0x45560b(0x1b7)]===_0x45560b(0x1cd))_0x1e59de=Reflect[_0x45560b(0x1b7)](_0x46da74,_0x1be4ce,_0x3d5367,_0x57c1fe);else{for(var _0x1ab92b=_0x46da74[_0x45560b(0x176)]-0x1;_0x1ab92b>=0x0;_0x1ab92b--)if(_0x5bba92=_0x46da74[_0x1ab92b])_0x1e59de=(_0x273e04<0x3?_0x5bba92(_0x1e59de):_0x273e04>0x3?_0x5bba92(_0x1be4ce,_0x3d5367,_0x1e59de):_0x5bba92(_0x1be4ce,_0x3d5367))||_0x1e59de;}return _0x273e04>0x3&&_0x1e59de&&Object[_0x45560b(0x1b8)](_0x1be4ce,_0x3d5367,_0x1e59de),_0x1e59de;},__metadata=this&&this[_0x1e80b4(0x195)]||function(_0x4ecec1,_0x26d889){const _0x2ea0b9=_0x1e80b4;if(typeof Reflect===_0x2ea0b9(0x18c)&&typeof Reflect[_0x2ea0b9(0x192)]===_0x2ea0b9(0x1cd))return Reflect[_0x2ea0b9(0x192)](_0x4ecec1,_0x26d889);},__param=this&&this[_0x1e80b4(0x1a3)]||function(_0x45dec5,_0x3488a7){return function(_0x5d45e6,_0x5509c8){_0x3488a7(_0x5d45e6,_0x5509c8,_0x45dec5);};};Object[_0x1e80b4(0x1b8)](exports,_0x1e80b4(0x1bc),{'value':!![]}),exports[_0x1e80b4(0x19b)]=void 0x0;function _0x4beb(_0x53cbe9,_0x356e46){const _0x459190=_0x4591();return _0x4beb=function(_0x4bebca,_0x2ae709){_0x4bebca=_0x4bebca-0x174;let _0x4a250a=_0x459190[_0x4bebca];return _0x4a250a;},_0x4beb(_0x53cbe9,_0x356e46);}function _0x4591(){const _0x154f16=['role','mineApps','该分类名称已存在！','__esModule','updateAppCats','includes','DESC','UserAppsEntity','Not','des','userAppsEntity','4082491NUldWr','应用审核通过','typeorm','appEntity','appRole','修改App信息失败！','name','appId','删除失败！','function','user','该应用名称已存在！','8DbPqgy','./app.entity','MoreThan','9rYoGaf','取消收藏成功!','demoData','1071778bmXIzI','2068550jWuVSj','appCatsEntity','__decorate','preset','您正在操作一个不存在的资源！','length','已将应用加入到我的个人工作台！','17190206euwisv','queryOneCat','您正在编辑一个不存在的应用！','affected','system','AppCatsEntity','delete','collect','catName','删除App成功','appCatsList','userId','count','findAndCount','status','BAD_REQUEST','@nestjs/typeorm','该应用不存在！','InjectRepository','577615Mdmhyl','object','10694TWTlzZ','findOne','缺失必要参数！','该分类不存在！','4474028zYjlSU','metadata','修改失败！','catId','__metadata','删除成功','appDes','design:paramtypes','修改成功','find','AppService','coverImg','Injectable','取消收藏失败！','update','forEach','516cfGVwv','修改App信息成功','__param','Repository','map','6lMdQiU','Like','super','该分类下存在App，不可删除！','split','******','auditPass','appName','删除应用成功！','HttpException','customApp','save','HttpStatus','appCount','@nestjs/common','删除App失败！','应用审核拒绝完成','decorate','defineProperty'];_0x4591=function(){return _0x154f16;};return _0x4591();}const common_1=require(_0x1e80b4(0x1b4)),appCats_entity_1=require('./appCats.entity'),typeorm_1=require(_0x1e80b4(0x1c6)),typeorm_2=require(_0x1e80b4(0x188)),app_entity_1=require(_0x1e80b4(0x1d1)),userApps_entity_1=require('./userApps.entity');let AppService=class AppService{constructor(_0x4660a5,_0x32ffbf,_0x5bbc65){const _0x4ea227=_0x1e80b4;this[_0x4ea227(0x1d8)]=_0x4660a5,this[_0x4ea227(0x1c7)]=_0x32ffbf,this[_0x4ea227(0x1c3)]=_0x5bbc65;}async['createAppCat'](_0x3a8197){const _0x357773=_0x1e80b4,{name:_0x16ccaa}=_0x3a8197,_0x5dceba=await this[_0x357773(0x1d8)][_0x357773(0x18e)]({'where':{'name':_0x16ccaa}});if(_0x5dceba)throw new common_1[(_0x357773(0x1af))](_0x357773(0x1bb),common_1['HttpStatus'][_0x357773(0x187)]);return await this[_0x357773(0x1d8)][_0x357773(0x1b1)](_0x3a8197);}async['delAppCat'](_0x4e26c3){const _0x25a87c=_0x1e80b4,{id:_0x304576}=_0x4e26c3,_0x2b3991=await this[_0x25a87c(0x1d8)]['findOne']({'where':{'id':_0x304576}});if(!_0x2b3991)throw new common_1[(_0x25a87c(0x1af))](_0x25a87c(0x190),common_1[_0x25a87c(0x1b2)][_0x25a87c(0x187)]);const _0x1a213d=await this['appEntity'][_0x25a87c(0x184)]({'where':{'catId':_0x304576}});if(_0x1a213d>0x0)throw new common_1['HttpException'](_0x25a87c(0x1a9),common_1[_0x25a87c(0x1b2)][_0x25a87c(0x187)]);const _0x5bd562=await this['appCatsEntity'][_0x25a87c(0x17e)](_0x304576);if(_0x5bd562[_0x25a87c(0x17b)]>0x0)return _0x25a87c(0x196);throw new common_1[(_0x25a87c(0x1af))](_0x25a87c(0x1cc),common_1[_0x25a87c(0x1b2)]['BAD_REQUEST']);}async[_0x1e80b4(0x1bd)](_0x20a7f2){const _0x1f11c7=_0x1e80b4,{id:_0x467aed,name:_0x1a44bf}=_0x20a7f2,_0x299b81=await this[_0x1f11c7(0x1d8)][_0x1f11c7(0x18e)]({'where':{'name':_0x1a44bf,'id':(0x0,typeorm_1[_0x1f11c7(0x1c1)])(_0x467aed)}});if(_0x299b81)throw new common_1[(_0x1f11c7(0x1af))]('该分类名称已存在！',common_1[_0x1f11c7(0x1b2)][_0x1f11c7(0x187)]);const _0x222a27=await this[_0x1f11c7(0x1d8)]['update']({'id':_0x467aed},_0x20a7f2);if(_0x222a27['affected']>0x0)return _0x1f11c7(0x199);throw new common_1[(_0x1f11c7(0x1af))](_0x1f11c7(0x193),common_1['HttpStatus'][_0x1f11c7(0x187)]);}async[_0x1e80b4(0x179)](_0x37cae1){const _0x2ae490=_0x1e80b4,{id:_0x5e7df5}=_0x37cae1;if(!_0x5e7df5)throw new common_1['HttpException'](_0x2ae490(0x18f),common_1[_0x2ae490(0x1b2)][_0x2ae490(0x187)]);const _0x2c9c66=await this['appEntity'][_0x2ae490(0x18e)]({'where':{'id':_0x5e7df5}}),{demoData:_0x191111,coverImg:_0x22393c,des:_0x2e01e2,name:_0x4d8a2a}=_0x2c9c66;return{'demoData':_0x191111?_0x191111[_0x2ae490(0x1aa)]('\x0a'):[],'coverImg':_0x22393c,'des':_0x2e01e2,'name':_0x4d8a2a};}async[_0x1e80b4(0x182)](_0xb02f01){const _0x5b57c=_0x1e80b4,{page:page=0x1,size:size=0xa,name:_0x6497fd,status:_0x59d8e5}=_0xb02f01,_0x54f750={};_0x6497fd&&(_0x54f750['name']=(0x0,typeorm_1['Like'])('%'+_0x6497fd+'%')),[0x0,0x1,'0','1'][_0x5b57c(0x1be)](_0x59d8e5)&&(_0x54f750[_0x5b57c(0x186)]=_0x59d8e5);const [_0x7a0433,_0x1204e5]=await this[_0x5b57c(0x1d8)]['findAndCount']({'where':_0x54f750,'order':{'order':_0x5b57c(0x1bf)},'skip':(page-0x1)*size,'take':size}),_0x3bc3ad=_0x7a0433[_0x5b57c(0x1a5)](_0x39d784=>_0x39d784['id']),_0xa0f6ef=await this['appEntity']['find']({'where':{'catId':(0x0,typeorm_1['In'])(_0x3bc3ad)}}),_0x112906={};return _0xa0f6ef[_0x5b57c(0x1a0)](_0x1dd33d=>{const _0x4c4116=_0x5b57c;_0x112906[_0x1dd33d['catId']]?_0x112906[_0x1dd33d[_0x4c4116(0x194)]]+=0x1:_0x112906[_0x1dd33d[_0x4c4116(0x194)]]=0x1;}),_0x7a0433['forEach'](_0xd75a8a=>_0xd75a8a[_0x5b57c(0x1b3)]=_0x112906[_0xd75a8a['id']]||0x0),{'rows':_0x7a0433,'count':_0x1204e5};}async['appList'](_0x1bd1fb,_0x562981,_0x20ff03='id'){const _0x5b8c56=_0x1e80b4;var _0x4e83ba;const {page:page=0x1,size:size=0xa,name:_0x39362b,status:_0x4493d7,catId:_0x330072,role:_0x1227b0}=_0x562981,_0x1c635b={};_0x39362b&&(_0x1c635b[_0x5b8c56(0x1ca)]=(0x0,typeorm_1[_0x5b8c56(0x1a7)])('%'+_0x39362b+'%')),_0x330072&&(_0x1c635b[_0x5b8c56(0x194)]=_0x330072),_0x1227b0&&(_0x1c635b['role']=_0x1227b0),_0x4493d7&&(_0x1c635b[_0x5b8c56(0x186)]=_0x4493d7);const [_0x3caefc,_0x5bb4fb]=await this[_0x5b8c56(0x1c7)]['findAndCount']({'where':_0x1c635b,'order':{[_0x20ff03]:'DESC'},'skip':(page-0x1)*size,'take':size}),_0x3f27b7=_0x3caefc[_0x5b8c56(0x1a5)](_0x15b26c=>_0x15b26c[_0x5b8c56(0x194)]),_0x22b649=await this[_0x5b8c56(0x1d8)][_0x5b8c56(0x19a)]({'where':{'id':(0x0,typeorm_1['In'])(_0x3f27b7)}});return _0x3caefc[_0x5b8c56(0x1a0)](_0xc4bb73=>{const _0x5cb488=_0x5b8c56,_0x6a10e1=_0x22b649['find'](_0x47243d=>_0x47243d['id']===_0xc4bb73[_0x5cb488(0x194)]);_0xc4bb73[_0x5cb488(0x180)]=_0x6a10e1?_0x6a10e1[_0x5cb488(0x1ca)]:'';}),((_0x4e83ba=_0x1bd1fb===null||_0x1bd1fb===void 0x0?void 0x0:_0x1bd1fb[_0x5b8c56(0x1ce)])===null||_0x4e83ba===void 0x0?void 0x0:_0x4e83ba[_0x5b8c56(0x1b9)])!==_0x5b8c56(0x1a8)&&_0x3caefc[_0x5b8c56(0x1a0)](_0x3c02b0=>{const _0x260792=_0x5b8c56;delete _0x3c02b0[_0x260792(0x174)];}),{'rows':_0x3caefc,'count':_0x5bb4fb};}async['frontAppList'](_0xb33535,_0x24d6f2,_0x199bde='id'){const _0xa84772=_0x1e80b4;var _0x1f2aee;const {page:page=0x1,size:size=0x3e8,name:_0x3ca691,catId:_0x4d53e0,role:_0x32a7f9}=_0x24d6f2,_0x52b59a=[{'status':(0x0,typeorm_1['In'])([0x1,0x4]),'userId':(0x0,typeorm_1['IsNull'])(),'public':![]},{'userId':(0x0,typeorm_1[_0xa84772(0x1d2)])(0x0),'public':!![]}],[_0x2f34b8,_0x132856]=await this[_0xa84772(0x1c7)][_0xa84772(0x185)]({'where':_0x52b59a,'order':{'order':_0xa84772(0x1bf)},'skip':(page-0x1)*size,'take':size}),_0x36a374=_0x2f34b8[_0xa84772(0x1a5)](_0x27e184=>_0x27e184[_0xa84772(0x194)]),_0x1aabdd=await this[_0xa84772(0x1d8)][_0xa84772(0x19a)]({'where':{'id':(0x0,typeorm_1['In'])(_0x36a374)}});return _0x2f34b8['forEach'](_0x29ae41=>{const _0x45c188=_0xa84772,_0x2bf49d=_0x1aabdd['find'](_0x383bfe=>_0x383bfe['id']===_0x29ae41[_0x45c188(0x194)]);_0x29ae41[_0x45c188(0x180)]=_0x2bf49d?_0x2bf49d[_0x45c188(0x1ca)]:'';}),((_0x1f2aee=_0xb33535===null||_0xb33535===void 0x0?void 0x0:_0xb33535[_0xa84772(0x1ce)])===null||_0x1f2aee===void 0x0?void 0x0:_0x1f2aee[_0xa84772(0x1b9)])!==_0xa84772(0x1a8)&&_0x2f34b8[_0xa84772(0x1a0)](_0x54a80b=>{const _0x19cb7b=_0xa84772;delete _0x54a80b[_0x19cb7b(0x174)];}),{'rows':_0x2f34b8,'count':_0x132856};}async['createApp'](_0x1b1092){const _0x1e2d25=_0x1e80b4,{name:_0x58886a,catId:_0x484aa3}=_0x1b1092;_0x1b1092[_0x1e2d25(0x1b9)]=_0x1e2d25(0x17c);const _0x1a62a5=await this[_0x1e2d25(0x1c7)][_0x1e2d25(0x18e)]({'where':{'name':_0x58886a}});if(_0x1a62a5)throw new common_1[(_0x1e2d25(0x1af))](_0x1e2d25(0x1cf),common_1['HttpStatus'][_0x1e2d25(0x187)]);const _0xeac467=await this[_0x1e2d25(0x1d8)][_0x1e2d25(0x18e)]({'where':{'id':_0x484aa3}});if(!_0xeac467)throw new common_1[(_0x1e2d25(0x1af))]('该分类不存在！',common_1[_0x1e2d25(0x1b2)]['BAD_REQUEST']);return await this[_0x1e2d25(0x1c7)]['save'](_0x1b1092);}async[_0x1e80b4(0x1b0)](_0xe284ba,_0x437d91){const _0x53ccd9=_0x1e80b4,{id:_0x2e56d1}=_0x437d91[_0x53ccd9(0x1ce)],{name:_0x5d694b,catId:_0x17fa40,des:_0x3a2290,preset:_0x4db1f4,coverImg:_0x3eca26,demoData:_0x772d7d,public:_0xa04a6c,appId:_0x5ed736}=_0xe284ba;if(_0x5ed736){const _0x16e9be=await this[_0x53ccd9(0x1c7)]['findOne']({'where':{'id':_0x5ed736,'userId':_0x2e56d1}});if(!_0x16e9be)throw new common_1['HttpException'](_0x53ccd9(0x17a),common_1[_0x53ccd9(0x1b2)]['BAD_REQUEST']);const _0xf26f9b={'name':_0x5d694b,'catId':_0x17fa40,'des':_0x3a2290,'preset':_0x4db1f4,'coverImg':_0x3eca26,'demoData':_0x772d7d,'public':_0xa04a6c,'status':_0xa04a6c?0x3:0x1},_0x294b43=await this[_0x53ccd9(0x1c7)][_0x53ccd9(0x19f)]({'id':_0x5ed736,'userId':_0x2e56d1},_0xf26f9b);if(_0x294b43['affected'])return _0x53ccd9(0x199);else throw new common_1[(_0x53ccd9(0x1af))]('修改失败！',common_1[_0x53ccd9(0x1b2)]['BAD_REQUEST']);}if(!_0x5ed736){const _0x50b034=await this['appCatsEntity'][_0x53ccd9(0x18e)]({'where':{'id':_0x17fa40}});if(!_0x50b034)throw new common_1[(_0x53ccd9(0x1af))](_0x53ccd9(0x190),common_1[_0x53ccd9(0x1b2)][_0x53ccd9(0x187)]);const _0x272768=await this['appEntity'][_0x53ccd9(0x18e)]({'where':{'name':_0x5d694b}});if(_0x272768)throw new common_1[(_0x53ccd9(0x1af))](_0x53ccd9(0x1cf),common_1[_0x53ccd9(0x1b2)][_0x53ccd9(0x187)]);const _0x5f46dd={'name':_0x5d694b,'catId':_0x17fa40,'des':_0x3a2290,'preset':_0x4db1f4,'coverImg':_0x3eca26,'status':_0xa04a6c?0x3:0x1,'demoData':_0x772d7d,'public':_0xa04a6c,'role':'user','userId':_0x2e56d1},_0x5c4335=await this['appEntity'][_0x53ccd9(0x1b1)](_0x5f46dd),_0x57cf4f={'appId':_0x5c4335['id'],'userId':_0x2e56d1,'appType':_0x53ccd9(0x1ce),'public':_0xa04a6c,'status':_0xa04a6c?0x3:0x1,'catId':_0x17fa40};return this[_0x53ccd9(0x1c3)][_0x53ccd9(0x1b1)](_0x57cf4f);}}async['updateApp'](_0x36f52c){const _0x585a41=_0x1e80b4,{id:_0xa1fd62,name:_0x1c647c,catId:_0x234164,status:_0x2bffbe}=_0x36f52c,_0xb5c069=await this['appEntity'][_0x585a41(0x18e)]({'where':{'name':_0x1c647c,'id':(0x0,typeorm_1['Not'])(_0xa1fd62)}});if(_0xb5c069)throw new common_1['HttpException'](_0x585a41(0x1cf),common_1[_0x585a41(0x1b2)][_0x585a41(0x187)]);const _0x164c57=await this[_0x585a41(0x1d8)]['findOne']({'where':{'id':_0x234164}});if(!_0x164c57)throw new common_1['HttpException'](_0x585a41(0x190),common_1[_0x585a41(0x1b2)][_0x585a41(0x187)]);const _0x1c30de=await this[_0x585a41(0x1c7)][_0x585a41(0x18e)]({'where':{'id':_0xa1fd62}});_0x1c30de[_0x585a41(0x186)]!==_0x36f52c['status']&&await this[_0x585a41(0x1c3)][_0x585a41(0x19f)]({'appId':_0xa1fd62},{'status':_0x2bffbe});const _0x154014=await this['appEntity'][_0x585a41(0x19f)]({'id':_0xa1fd62},_0x36f52c);if(_0x154014[_0x585a41(0x17b)]>0x0)return _0x585a41(0x1a2);throw new common_1[(_0x585a41(0x1af))](_0x585a41(0x1c9),common_1[_0x585a41(0x1b2)][_0x585a41(0x187)]);}async['delApp'](_0x204797){const _0x3aaeea=_0x1e80b4,{id:_0x204bc2}=_0x204797,_0x233d04=await this[_0x3aaeea(0x1c7)]['findOne']({'where':{'id':_0x204bc2}});if(!_0x233d04)throw new common_1['HttpException'](_0x3aaeea(0x189),common_1['HttpStatus'][_0x3aaeea(0x187)]);const _0x11cb9d=await this[_0x3aaeea(0x1c3)][_0x3aaeea(0x184)]({'where':{'appId':_0x204bc2}});if(_0x11cb9d>0x0)throw new common_1[(_0x3aaeea(0x1af))]('该应用已被用户关联使用中，不可删除！',common_1[_0x3aaeea(0x1b2)][_0x3aaeea(0x187)]);const _0x2681bc=await this[_0x3aaeea(0x1c7)][_0x3aaeea(0x17e)](_0x204bc2);if(_0x2681bc['affected']>0x0)return _0x3aaeea(0x181);throw new common_1[(_0x3aaeea(0x1af))](_0x3aaeea(0x1b5),common_1[_0x3aaeea(0x1b2)]['BAD_REQUEST']);}async[_0x1e80b4(0x1ac)](_0x4611f9){const _0xe7d5fe=_0x1e80b4,{id:_0x5b32b5}=_0x4611f9,_0x9a127a=await this[_0xe7d5fe(0x1c7)][_0xe7d5fe(0x18e)]({'where':{'id':_0x5b32b5,'status':0x3}});if(!_0x9a127a)throw new common_1['HttpException'](_0xe7d5fe(0x189),common_1[_0xe7d5fe(0x1b2)]['BAD_REQUEST']);return await this[_0xe7d5fe(0x1c7)][_0xe7d5fe(0x19f)]({'id':_0x5b32b5},{'status':0x4}),await this[_0xe7d5fe(0x1c3)][_0xe7d5fe(0x19f)]({'appId':_0x5b32b5},{'status':0x4}),_0xe7d5fe(0x1c5);}async['auditFail'](_0x41f465){const _0x4cd5c7=_0x1e80b4,{id:_0x30dfe3}=_0x41f465,_0x7171f6=await this[_0x4cd5c7(0x1c7)][_0x4cd5c7(0x18e)]({'where':{'id':_0x30dfe3,'status':0x3}});if(!_0x7171f6)throw new common_1[(_0x4cd5c7(0x1af))]('该应用不存在！',common_1[_0x4cd5c7(0x1b2)][_0x4cd5c7(0x187)]);return await this['appEntity']['update']({'id':_0x30dfe3},{'status':0x5}),await this[_0x4cd5c7(0x1c3)][_0x4cd5c7(0x19f)]({'appId':_0x30dfe3},{'status':0x5}),_0x4cd5c7(0x1b6);}async['delMineApp'](_0x427455,_0x33da27){const _0x21e6a2=_0x1e80b4,{id:_0x4d2175}=_0x427455,_0x43adeb=await this[_0x21e6a2(0x1c7)][_0x21e6a2(0x18e)]({'where':{'id':_0x4d2175,'userId':_0x33da27['user']['id']}});if(!_0x43adeb)throw new common_1[(_0x21e6a2(0x1af))](_0x21e6a2(0x175),common_1['HttpStatus']['BAD_REQUEST']);return await this[_0x21e6a2(0x1c7)][_0x21e6a2(0x17e)](_0x4d2175),await this['userAppsEntity'][_0x21e6a2(0x17e)]({'appId':_0x4d2175,'userId':_0x33da27[_0x21e6a2(0x1ce)]['id']}),_0x21e6a2(0x1ae);}async[_0x1e80b4(0x17f)](_0x55532c,_0x5714c0){const _0x273396=_0x1e80b4,{appId:_0x58d21a}=_0x55532c,{id:_0x6edcc8}=_0x5714c0[_0x273396(0x1ce)],_0x38e109=await this[_0x273396(0x1c3)][_0x273396(0x18e)]({'where':{'appId':_0x58d21a,'userId':_0x6edcc8}});if(_0x38e109){const _0x23e76a=await this[_0x273396(0x1c3)][_0x273396(0x17e)]({'appId':_0x58d21a,'userId':_0x6edcc8});if(_0x23e76a['affected']>0x0)return _0x273396(0x1d4);else throw new common_1[(_0x273396(0x1af))](_0x273396(0x19e),common_1[_0x273396(0x1b2)][_0x273396(0x187)]);}const _0xee84ac=await this[_0x273396(0x1c7)]['findOne']({'where':{'id':_0x58d21a}}),{id:_0x1026a0,role:_0x1a5d84,catId:_0x38fa4c}=_0xee84ac,_0x25212e={'userId':_0x6edcc8,'appId':_0x1026a0,'catId':_0x38fa4c,'appRole':_0x1a5d84,'public':!![],'status':0x1};return await this[_0x273396(0x1c3)]['save'](_0x25212e),_0x273396(0x177);}async[_0x1e80b4(0x1ba)](_0x187079,_0x4dd2c2={'page':0x1,'size':0x1e}){const _0x399a4c=_0x1e80b4,{id:_0x40785d}=_0x187079[_0x399a4c(0x1ce)],{page:page=0x1,size:size=0x1e}=_0x4dd2c2,[_0x46c31d,_0x2fc9e0]=await this[_0x399a4c(0x1c3)][_0x399a4c(0x185)]({'where':{'userId':_0x40785d,'status':(0x0,typeorm_1['In'])([0x1,0x3,0x4,0x5])},'order':{'id':'DESC'},'skip':(page-0x1)*size,'take':size}),_0x558207=_0x46c31d[_0x399a4c(0x1a5)](_0x368ab9=>_0x368ab9[_0x399a4c(0x1cb)]),_0x16b0eb=await this[_0x399a4c(0x1c7)][_0x399a4c(0x19a)]({'where':{'id':(0x0,typeorm_1['In'])(_0x558207)}});return _0x46c31d['forEach'](_0x5f5ac7=>{const _0x34c630=_0x399a4c,_0x46cb3a=_0x16b0eb[_0x34c630(0x19a)](_0x2105dc=>_0x2105dc['id']===_0x5f5ac7['appId']);_0x5f5ac7[_0x34c630(0x1ad)]=_0x46cb3a?_0x46cb3a[_0x34c630(0x1ca)]:'',_0x5f5ac7[_0x34c630(0x1c8)]=_0x46cb3a?_0x46cb3a['role']:'',_0x5f5ac7[_0x34c630(0x197)]=_0x46cb3a?_0x46cb3a[_0x34c630(0x1c2)]:'',_0x5f5ac7[_0x34c630(0x19c)]=_0x46cb3a?_0x46cb3a['coverImg']:'',_0x5f5ac7[_0x34c630(0x1d5)]=_0x46cb3a?_0x46cb3a[_0x34c630(0x1d5)]:'',_0x5f5ac7[_0x34c630(0x174)]=_0x46cb3a[_0x34c630(0x183)]===_0x40785d?_0x46cb3a[_0x34c630(0x174)]:_0x34c630(0x1ab);}),{'rows':_0x46c31d,'count':_0x2fc9e0};}};AppService=__decorate([(0x0,common_1[_0x1e80b4(0x19d)])(),__param(0x0,(0x0,typeorm_2[_0x1e80b4(0x18a)])(appCats_entity_1[_0x1e80b4(0x17d)])),__param(0x1,(0x0,typeorm_2[_0x1e80b4(0x18a)])(app_entity_1['AppEntity'])),__param(0x2,(0x0,typeorm_2[_0x1e80b4(0x18a)])(userApps_entity_1[_0x1e80b4(0x1c0)])),__metadata(_0x1e80b4(0x198),[typeorm_1[_0x1e80b4(0x1a4)],typeorm_1['Repository'],typeorm_1[_0x1e80b4(0x1a4)]])],AppService),exports[_0x1e80b4(0x19b)]=AppService;