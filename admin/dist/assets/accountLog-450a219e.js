
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{_ as B}from"./index-ffb2bbfd.js";import{a as N}from"./userBalance-504446a2.js";import{s as G,t as O,U as F,q as H}from"./index-39bad72e.js";import{u as $}from"./utcformatTime-e76e5157.js";import{d as Q,r as _,O as I,q as J,h as r,P as K,o as u,c as y,e as t,f as a,Q as R,R as x,b as m,k as d,w as W,G as h,t as b,N as X,n as M}from"./index-6b0fe787.js";const Z=Q({__name:"accountLog",setup(ee){const C=_(),T=_(0),f=_(!1),n=I({userId:"",rechargeType:"",packageId:"",page:1,size:15});I({model3Count:[{required:!0,message:"请填写赠送基础模型额度",trigger:"blur"}],model4Count:[{required:!0,message:"请填写赠送高级模型额度",trigger:"blur"}],drawMjCount:[{required:!0,message:"请填写赠送绘画积分额度",trigger:"blur"}]});const A=_([]),U=_([]);async function i(){try{f.value=!0;const s=await N.queryUserAccountLog(n),{rows:l,count:g}=s.data;f.value=!1,T.value=g,U.value=l}catch{f.value=!1}}async function P(s){const l=await X.queryAllUser({size:30,keyword:s});A.value=l.data.rows}function q(s){s==null||s.resetFields(),i()}return J(()=>i()),(s,l)=>{const g=r("el-option"),k=r("el-select"),w=r("el-form-item"),S=r("el-button"),D=r("el-form"),z=B,V=r("el-avatar"),o=r("el-table-column"),v=r("el-tag"),Y=r("el-table"),E=r("el-pagination"),L=r("el-row"),j=K("loading");return u(),y("div",null,[t(z,null,{default:a(()=>[t(D,{ref_key:"formRef",ref:C,inline:!0,model:n},{default:a(()=>[t(w,{label:"用户名称",prop:"userId"},{default:a(()=>[t(k,{modelValue:n.userId,"onUpdate:modelValue":l[0]||(l[0]=e=>n.userId=e),filterable:"",clearable:"",remote:"","reserve-keyword":"",placeholder:"昵称|手机号|邮箱[模糊搜索]","remote-show-suffix":"","remote-method":P},{default:a(()=>[(u(!0),y(R,null,x(A.value,e=>(u(),h(g,{key:e.id,label:e.username,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(w,{label:"充值类型",prop:"rechargeType"},{default:a(()=>[t(k,{modelValue:n.rechargeType,"onUpdate:modelValue":l[1]||(l[1]=e=>n.rechargeType=e),placeholder:"请选择充值类型",clearable:""},{default:a(()=>[(u(!0),y(R,null,x(m(G),e=>(u(),h(g,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(w,null,{default:a(()=>[t(S,{type:"primary",onClick:i},{default:a(()=>l[5]||(l[5]=[d(" 查询 ")])),_:1}),t(S,{onClick:l[2]||(l[2]=e=>q(C.value))},{default:a(()=>l[6]||(l[6]=[d(" 重置 ")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),t(z,{style:{width:"100%"}},{default:a(()=>[W((u(),h(Y,{border:"",data:U.value,style:{width:"100%"},size:"large"},{default:a(()=>[t(o,{prop:"avatar",label:"用户头像",width:"120",fixed:""},{default:a(e=>[t(V,{src:e.row.avatar},null,8,["src"])]),_:1}),t(o,{prop:"username",label:"用户名称",width:"150",fixed:""}),t(o,{prop:"id",label:"用户ID",width:"80"}),t(o,{prop:"uid",label:"订单ID",width:"130"}),t(o,{prop:"email",label:"用户邮箱",width:"250",align:"left"}),t(o,{prop:"balanceInfo.useModel4Count",label:"充值类型",width:"160",align:"center"},{default:a(e=>[t(v,{type:"success"},{default:a(()=>{var p,c;return[d(b((p=e.row)!=null&&p.rechargeType?m(O)[(c=e.row)==null?void 0:c.rechargeType]:"---"),1)]}),_:2},1024)]),_:1}),t(o,{prop:"model3Count",label:"基础模型额度",width:"120",align:"center"}),t(o,{prop:"model4Count",label:"高级模型额度",width:"120",align:"center"}),t(o,{prop:"drawMjCount",label:"绘画余额额度",width:"120",align:"center"}),t(o,{label:"额度有效期",width:"170",align:"center"},{default:a(e=>[t(v,{type:"success"},{default:a(()=>{var p,c;return[d(b(((p=e.row)==null?void 0:p.days)<=0?"永久时效":`${(c=e.row)==null?void 0:c.days}天`),1)]}),_:2},1024)]),_:1}),t(o,{prop:"status",label:"用户状态",width:"120",align:"center"},{default:a(({row:e})=>[t(v,{type:m(F)[e.status]},{default:a(()=>[d(b(m(H)[e.status]),1)]),_:2},1032,["type"])]),_:1}),t(o,{prop:"createdAt",label:"充值时间",width:"200",align:"center"},{default:a(e=>[d(b(m($)(e.row.createdAt,"YYYY-MM-DD hh:mm:ss")),1)]),_:1})]),_:1},8,["data"])),[[j,f.value]]),t(L,{class:"flex justify-end mt-5"},{default:a(()=>[t(E,{"current-page":n.page,"onUpdate:currentPage":l[3]||(l[3]=e=>n.page=e),"page-size":n.size,"onUpdate:pageSize":l[4]||(l[4]=e=>n.size=e),class:"mr-5","page-sizes":[15,30,50,100],layout:"total, sizes, prev, pager, next, jumper",total:T.value,onSizeChange:i,onCurrentChange:i},null,8,["current-page","page-size","total"])]),_:1})]),_:1})])}}});typeof M=="function"&&M(Z);export{Z as default};
