
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{_ as le}from"./index-ffb2bbfd.js";import{A as q}from"./mj-ece5771b.js";import{d as ae,r as n,O,z as S,q as oe,h as o,P as se,o as y,c as j,e as t,f as a,k as c,w as F,b as _,G as h,a as b,t as V,Q as re,R as ne,S as ie,E as R,V as ue,n as A}from"./index-6b0fe787.js";const de={class:"overflow-y-scroll w-full whitespace-nowrap"},pe={class:"flex justify-end mr-5"},me=ae({__name:"prompts",setup(ce){n(),n(),n(0);const v=n(!1),L=n(!1);n(!1);const P=n(),i=n(0),r=O({isCarryParams:!0,status:!0,title:"",order:100,prompt:"",aspect:"16:9"}),M=n([{aspect:"1:1"},{aspect:"4:3"},{aspect:"3:4"},{aspect:"16:9"},{aspect:"9:16"}]),Q=O({isCarryParams:[{required:!0,message:"请选择你是否需要携带参数",trigger:"change"}],status:[{required:!0,message:"请选择提示词开启状态",trigger:"change"}],title:[{required:!0,message:"请填写您的提示词信息",trigger:"blur"}],order:[{required:!0,message:"请填写您的排序id 越大越靠前",trigger:"blur"}],prompt:[{required:!0,message:"请填写提示词详细内容",trigger:"change"}],aspect:[{required:!0,message:"请选择图片比例",trigger:"change"}]});function T(s){i.value=0,s==null||s.resetFields()}const u=n(!1),I=S(()=>i.value?"更新提示词":"新增提示词"),J=S(()=>i.value?"确认更新":"确认新增"),U=n([]);async function k(){try{v.value=!0;const s=await q.queryPrompts();v.value=!1,U.value=s.data}catch{v.value=!1}}async function G(s){const{id:e}=s;await q.delPrompt({id:e}),R({type:"success",message:"操作完成！"}),k()}function H(s){i.value=s.id;const{status:e,title:d,prompt:C,order:g,isCarryParams:p,aspect:w}=s;ue(()=>{Object.assign(r,{status:e,title:d,prompt:C,order:g,isCarryParams:p,aspect:w})}),u.value=!0}async function K(s){s==null||s.validate(async e=>{if(e){const d=JSON.parse(JSON.stringify(r));delete d.id,i.value&&(d.id=i.value),await q.setPrompt(d),R({type:"success",message:"操作成功！"}),i.value=0,u.value=!1,k()}})}return oe(()=>{k()}),(s,e)=>{const d=o("el-alert"),C=o("Plus"),g=o("el-icon"),p=o("el-button"),w=le,m=o("el-table-column"),D=o("el-tag"),W=o("el-popconfirm"),X=o("el-table"),$=o("el-switch"),z=o("QuestionFilled"),B=o("el-tooltip"),f=o("el-form-item"),x=o("el-input"),Y=o("el-option"),Z=o("el-select"),E=o("el-form"),ee=o("el-dialog"),N=se("loading");return y(),j("div",null,[t(w,{class:"header"},{default:a(()=>[t(d,{"show-icon":"",title:"提示词说明",description:"此处的提示词将会在用户端的midjoney绘画中展示出来、用户点击你给与的预设将直接将提示词写入输入框中！",type:"success"}),t(p,{type:"success",class:"ml-3",size:"large",onClick:e[0]||(e[0]=l=>u.value=!0)},{default:a(()=>[e[11]||(e[11]=c(" 添加提示词 ")),t(g,{class:"ml-3"},{default:a(()=>[t(C)]),_:1})]),_:1})]),_:1}),t(w,{style:{width:"100%"}},{default:a(()=>[F((y(),h(X,{border:"",data:_(U),style:{width:"100%"},size:"large"},{default:a(()=>[t(m,{prop:"title",label:"提示词名称",width:"180"}),t(m,{prop:"aspect",label:"图片比例",width:"180"}),t(m,{prop:"prompt",label:"提示词内容"},{default:a(l=>[b("div",de,V(l.row.prompt),1)]),_:1}),t(m,{prop:"status",align:"center",label:"提示词状态",width:"110"},{default:a(l=>[t(D,{type:l.row.status?"success":"danger"},{default:a(()=>[c(V(l.row.status?"开启中":"已关闭"),1)]),_:2},1032,["type"])]),_:1}),t(m,{prop:"isCarryParams",align:"center",label:"携带用户的参数",width:"150"},{default:a(l=>[t(D,{type:l.row.isCarryParams?"success":"warning"},{default:a(()=>[c(V(l.row.isCarryParams?"携带":"不携带"),1)]),_:2},1032,["type"])]),_:1}),t(m,{prop:"order",align:"center",label:"排序ID",width:"90"}),t(m,{fixed:"right",label:"操作",align:"center",width:"180"},{default:a(l=>[t(p,{link:"",type:"primary",size:"small",onClick:te=>H(l.row)},{default:a(()=>e[12]||(e[12]=[c(" 变更 ")])),_:2},1032,["onClick"]),t(W,{title:"确认删除此提示词么?",width:"180","icon-color":"red",onConfirm:te=>G(l.row)},{reference:a(()=>[t(p,{link:"",type:"danger",size:"small"},{default:a(()=>e[13]||(e[13]=[c(" 删除秘钥 ")])),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])),[[N,_(v)]])]),_:1}),t(ee,{modelValue:_(u),"onUpdate:modelValue":e[9]||(e[9]=l=>ie(u)?u.value=l:null),"close-on-click-modal":!1,title:I.value,width:"770",onClose:e[10]||(e[10]=l=>T(_(P)))},{footer:a(()=>[b("span",pe,[t(p,{onClick:e[7]||(e[7]=l=>u.value=!1)},{default:a(()=>e[16]||(e[16]=[c("取消")])),_:1}),t(p,{type:"primary",onClick:e[8]||(e[8]=l=>K(_(P)))},{default:a(()=>[c(V(J.value),1)]),_:1})])]),default:a(()=>[F((y(),h(E,{ref_key:"formPackageRef",ref:P,"label-position":"right","label-width":"120px",model:r,rules:Q},{default:a(()=>[t(f,{label:"启用状态",prop:"status"},{default:a(()=>[t($,{modelValue:r.status,"onUpdate:modelValue":e[1]||(e[1]=l=>r.status=l)},null,8,["modelValue"]),t(B,{class:"box-item",effect:"dark",placement:"right"},{content:a(()=>e[14]||(e[14]=[b("div",{style:{width:"250px"}}," 关闭当前提示词、用户端将不再展示！ ",-1)])),default:a(()=>[t(g,{class:"ml-3 cursor-pointer"},{default:a(()=>[t(z)]),_:1})]),_:1})]),_:1}),t(f,{label:"携带左侧参数",prop:"isCarryParams"},{default:a(()=>[t($,{modelValue:r.isCarryParams,"onUpdate:modelValue":e[2]||(e[2]=l=>r.isCarryParams=l)},null,8,["modelValue"]),t(B,{class:"box-item",effect:"dark",placement:"right"},{content:a(()=>e[15]||(e[15]=[b("div",{style:{width:"250px"}}," 携带左侧参数将会对提示词的参数复写、不携带则以自定义提示词中的指令参数为准！ ",-1)])),default:a(()=>[t(g,{class:"ml-3 cursor-pointer"},{default:a(()=>[t(z)]),_:1})]),_:1})]),_:1}),t(f,{label:"排序Order",prop:"order"},{default:a(()=>[t(x,{modelValue:r.order,"onUpdate:modelValue":e[3]||(e[3]=l=>r.order=l),placeholder:"排序id越大越靠前"},null,8,["modelValue"])]),_:1}),t(f,{label:"提示词名称",prop:"title"},{default:a(()=>[t(x,{modelValue:r.title,"onUpdate:modelValue":e[4]||(e[4]=l=>r.title=l),placeholder:"请填写提示词名称（用户看到的名称）"},null,8,["modelValue"])]),_:1}),t(f,{label:"图片比例",prop:"aspect"},{default:a(()=>[t(Z,{modelValue:r.aspect,"onUpdate:modelValue":e[5]||(e[5]=l=>r.aspect=l),placeholder:"请选择图片比例",style:{width:"100%"}},{default:a(()=>[(y(!0),j(re,null,ne(_(M),l=>(y(),h(Y,{key:l.aspect,label:l.aspect,value:l.aspect},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(f,{label:"提示词内容",prop:"proxyUrl"},{default:a(()=>[t(x,{type:"textarea",rows:4,modelValue:r.prompt,"onUpdate:modelValue":e[6]||(e[6]=l=>r.prompt=l),placeholder:"请填写提示词详细内容！"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[N,_(L)]])]),_:1},8,["modelValue","title"])])}}});typeof A=="function"&&A(me);export{me as default};
