
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{_ as F}from"./index-ffb2bbfd.js";import{d as P,s as $,r,O as j,z as G,q as Q,h as i,P as H,o as a,c as g,e as o,f as l,b as s,ap as I,j as R,l as J,Q as W,R as x,k as m,w as X,G as p,S as Y,V as Z,E as h,t as ee,n as N}from"./index-6b0fe787.js";import{A as k}from"./badWords-0a8698d1.js";import{E as te}from"./index-39bad72e.js";const le=P({__name:"custom",setup(oe){const T=$(),V=r(),z=r(0),f=r(!1),u=j({word:"",status:"",page:1,size:500}),A=G(()=>T.settings.app.colorScheme),B=r([]);async function d(){try{f.value=!0;const n=await k.queryBadWords(u),{rows:e,count:v}=n.data;f.value=!1,z.value=v,B.value=e}catch{f.value=!1}}function D(n){n==null||n.resetFields(),d()}Q(()=>{d()});const c=r(""),_=r(!1),C=r();async function K(n){await k.delBadWords({id:n}),h.success("删除敏感词成功"),await d()}function L(){_.value=!0,Z(()=>{C.value.input.focus()})}async function S(){c.value&&(await k.addBadWords({word:c.value}),h.success("添加敏感词成功"),u.status="",await d()),_.value=!1,c.value=""}return(n,e)=>{const v=i("el-alert"),w=F,y=i("el-form-item"),U=i("el-option"),q=i("el-select"),b=i("el-button"),E=i("el-form"),M=i("el-tag"),O=H("loading");return a(),g("div",null,[o(w,null,{default:l(()=>[o(v,{closable:!1,"show-icon":"",title:"敏感词说明",description:"当前为自定义敏感词、触发敏感词将自动拦截、如配置过三方平台、自定义检测将在三方平台通过后最后进行检测！",type:"success"})]),_:1}),o(w,null,{default:l(()=>[o(E,{ref_key:"formRef",ref:V,inline:!0,model:u},{default:l(()=>[o(y,{label:"敏感词",prop:"word"},{default:l(()=>[o(s(I),{modelValue:u.word,"onUpdate:modelValue":e[0]||(e[0]=t=>u.word=t),placeholder:"敏感词[模糊搜索]",onKeydown:R(J(d,["prevent"]),["enter"])},null,8,["modelValue","onKeydown"])]),_:1}),o(y,{label:"敏感词状态",prop:"status"},{default:l(()=>[o(q,{modelValue:u.status,"onUpdate:modelValue":e[1]||(e[1]=t=>u.status=t),placeholder:"请选择敏感词状态",clearable:""},{default:l(()=>[(a(!0),g(W,null,x(s(te),t=>(a(),p(U,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(y,null,{default:l(()=>[o(b,{type:"primary",onClick:d},{default:l(()=>e[4]||(e[4]=[m(" 查询 ")])),_:1}),o(b,{onClick:e[2]||(e[2]=t=>D(s(V)))},{default:l(()=>e[5]||(e[5]=[m(" 重置 ")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),X((a(),p(w,{style:{width:"100%"}},{default:l(()=>[(a(!0),g(W,null,x(s(B),t=>(a(),p(M,{key:t.id,type:"warning",class:"mr-3 mb-3",closable:"",hit:"",effect:s(A),"disable-transitions":!0,onClose:ne=>K(t.id)},{default:l(()=>[m(ee(t.word),1)]),_:2},1032,["effect","onClose"]))),128)),s(_)?(a(),p(s(I),{key:0,ref_key:"InputRef",ref:C,modelValue:s(c),"onUpdate:modelValue":e[3]||(e[3]=t=>Y(c)?c.value=t:null),class:"ml-1",style:{width:"80px"},size:"small",onKeyup:R(S,["enter"]),onBlur:S},null,8,["modelValue"])):(a(),p(b,{key:1,class:"ml-1",size:"small",onClick:L},{default:l(()=>e[6]||(e[6]=[m(" + New Word ")])),_:1}))]),_:1})),[[O,s(f)]])])}}});typeof N=="function"&&N(le);export{le as default};
