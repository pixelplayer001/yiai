
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{_ as ae}from"./index-ffb2bbfd.js";import{W as P,d as se,r as p,A as re,z as R,q as de,h as s,o as b,c as ie,e as t,f as u,a as d,k as a,t as _,G as I,H as T,b as G,E as q,n as H}from"./index-6b0fe787.js";import{_ as me}from"./index.vue_vue_type_script_setup_true_lang-26ba20a3.js";const A={quertMenu:m=>P.get("menu/query",{params:m}),visibleMenu:m=>P.post("menu/visible",m),setMenu:m=>P.post("menu/setMenu",m),delMenu:m=>P.post("menu/delete",m),updateIcon:m=>P.post("menu/updateIcon",m)},pe={class:"flex justify-between"},fe={class:"flex items-center"},ve={class:"flex items-center"},ye={class:"dialog-footer"},_e={style:{display:"flex","align-items":"center"}},ge={style:{display:"flex","align-items":"center","margin-top":"12px"}},be={style:{display:"flex","align-items":"center","margin-top":"12px"}},ce={class:"dialog-footer"},we=se({__name:"menu",setup(m){const x=p(1),C=p(),c=p(!1),v=p(0),k=p(""),U=p(""),S=p(0),M=p(!1),o=p({menuTipText:"",menuIframeUrl:"",isJump:!1,isShow:!0,menuIcon:"",menuPath:"",order:1e3,isNeedAuth:!1,isSystem:!0}),L={menuTipText:[{required:!0,trigger:"blur",message:"请填写菜单名称"}],menuIframeUrl:[{required:!0,trigger:"blur",message:"请填写三方网页地址"}],isJump:[{required:!0,trigger:"blur",message:"请确认是否跳转"}],isShow:[{required:!0,trigger:"blur",message:"请确认是否打开菜单"}],menuIcon:[{required:!0,trigger:"blur",message:"请填写ICON图标"}],order:[{required:!0,trigger:"blur",message:"请填写排序ID"}],menuPath:[{required:!0,trigger:"blur",message:"请填写菜单路径"}],isSystem:[{required:!0,trigger:"blur",message:"请确认是否是系统内地址"}],isNeedAuth:[{required:!0,trigger:"blur",message:"请确认是否需要权限"}]};re(x,n=>{w()});const W=R(()=>v.value>0?"编辑菜单":"添加菜单"),K=R(()=>v.value>0?"确认修改":"确认添加"),h=p([]);async function w(){const n=await A.quertMenu({menuPlatform:x.value});h.value=n.data}function F(n){n==null||n.resetFields(),v.value=0}async function Q(n){const{id:e}=n;await A.visibleMenu({id:e}),q.success("操作成功！"),w()}async function X(n){await A.delMenu({id:n.id}),q.success("操作成功！"),w()}async function Y(){var n;(n=C.value)==null||n.resetFields(),v.value=0,c.value=!0}async function Z(n){n==null||n.validate(async e=>{if(!e)return;const g=Object.assign(o.value,{id:v},{menuPlatform:x.value});await A.setMenu(g),q.success("操作成功！"),n.resetFields(),c.value=!1,w()})}function E(n){const{id:e,menuTipText:g,menuIframeUrl:N,isJump:V,isShow:O,menuIcon:B,menuPath:$,order:i,isNeedAuth:r}=n;v.value=e,o.value={menuTipText:g,menuIframeUrl:N,isJump:V,isShow:O,menuIcon:B,menuPath:$,order:i,isNeedAuth:r,isSystem:!$},c.value=!0}async function ee(n){console.log("row: ",n);const{id:e,menuIcon:g,menuTipText:N,order:V}=n;k.value=g,U.value=N,S.value=V,v.value=e,M.value=!0}async function le(){if(!k.value||!U.value||!S.value)return q.error("请填写ICON编码");const n={id:v.value,menuIcon:k.value,menuTipText:U.value,order:S.value};await A.updateIcon(n),q.success("操作成功！"),w(),M.value=!1}return de(()=>{w()}),(n,e)=>{const g=s("el-alert"),N=ae,V=s("el-radio-button"),O=s("el-radio-group"),B=s("Plus"),$=s("el-icon"),i=s("el-button"),r=s("el-table-column"),J=s("el-tag"),te=s("el-popconfirm"),ue=s("el-table"),ne=s("el-card"),z=s("el-switch"),f=s("el-form-item"),y=s("el-input"),oe=s("el-form"),j=s("el-dialog");return b(),ie("div",null,[t(N,null,{default:u(()=>[t(g,{closable:!1,"show-icon":"",title:"动态菜单配置说明",description:"请至少配置一个、如果不配置默认设置对话页面、排序ID越小越靠前、PC和移动端是两套独立的设置、图标选择请在此处： https://icon-sets.iconify.design/ 找到或搜索到喜欢的图标之后可以复制下方的图标编号 例如material-symbols:chat-outline、更加详细文档参考官方演示站公告文档地址！",type:"success"})]),_:1}),t(ne,{style:{margin:"20px"}},{header:u(()=>[d("div",pe,[e[23]||(e[23]=d("b",null,"客户端动态菜单设置",-1)),d("div",fe,[t(O,{modelValue:x.value,"onUpdate:modelValue":e[0]||(e[0]=l=>x.value=l),size:"large"},{default:u(()=>[t(V,{label:1},{default:u(()=>e[20]||(e[20]=[a("PC端")])),_:1}),t(V,{label:0},{default:u(()=>e[21]||(e[21]=[a("移动端")])),_:1})]),_:1},8,["modelValue"]),t(i,{size:"large",class:"ml-5",onClick:Y},{default:u(()=>[e[22]||(e[22]=a(" 添加菜单 ")),t($,{class:"ml-3"},{default:u(()=>[t(B)]),_:1})]),_:1})])])]),default:u(()=>[t(ue,{data:h.value,style:{width:"100%"}},{default:u(()=>[t(r,{prop:"menuTipText",label:"菜单文本"}),t(r,{prop:"menuType",label:"菜单类型"},{default:u(l=>[t(J,{type:l.row.menuType?"success":"danger"},{default:u(()=>[a(_(l.row.menuType===0?"系统预设":"自定义菜单"),1)]),_:2},1032,["type"])]),_:1}),t(r,{prop:"isJump",label:"是否打开新窗口"},{default:u(l=>[t(J,{type:l.row.isJump?"success":"danger"},{default:u(()=>[a(_(l.row.isJump?"是":"否"),1)]),_:2},1032,["type"])]),_:1}),t(r,{prop:"isShow",label:"是否显示菜单"},{default:u(l=>[t(J,{type:l.row.isShow?"success":"danger"},{default:u(()=>[a(_(l.row.isShow?"是":"否"),1)]),_:2},1032,["type"])]),_:1}),t(r,{prop:"isNeedAuth",label:"是否需要登录访问"},{default:u(l=>[t(J,{type:l.row.isNeedAuth?"success":"danger"},{default:u(()=>[a(_(l.row.isNeedAuth?"是":"否"),1)]),_:2},1032,["type"])]),_:1}),t(r,{prop:"menuIcon",label:"菜单图标"},{default:u(l=>[t(me,{style:{"font-size":"24px"},icon:l.row.menuIcon},null,8,["icon"])]),_:1}),t(r,{prop:"order",label:"排序"}),t(r,{prop:"menuPath",label:"菜单路径"},{default:u(l=>[a(_(l.row.menuPath||"---"),1)]),_:1}),t(r,{prop:"menuIframeUrl",label:"三方网页链接"},{default:u(l=>[a(_(l.row.menuIframeUrl||"---"),1)]),_:1}),t(r,{label:"操作"},{default:u(l=>[d("div",ve,[l.row.menuType?(b(),I(i,{key:0,onClick:D=>E(l.row),size:"small"},{default:u(()=>e[24]||(e[24]=[a("编辑菜单")])),_:2},1032,["onClick"])):T("",!0),l.row.menuType?T("",!0):(b(),I(i,{key:1,onClick:D=>ee(l.row),size:"small"},{default:u(()=>e[25]||(e[25]=[a("修改默认")])),_:2},1032,["onClick"])),l.row.menuType?T("",!0):(b(),I(i,{key:2,onClick:D=>Q(l.row),type:l.row.isShow?"danger":"success",size:"small"},{default:u(()=>[a(_(l.row.isShow?"隐藏菜单":"打开菜单"),1)]),_:2},1032,["onClick","type"])),l.row.menuType?(b(),I(te,{key:3,title:"是否删除当前菜单？",onConfirm:D=>X(l.row)},{reference:u(()=>[t(i,{type:"danger",size:"small"},{default:u(()=>e[26]||(e[26]=[a("删除菜单")])),_:1})]),_:2},1032,["onConfirm"])):T("",!0)])]),_:1})]),_:1},8,["data"])]),_:1}),t(j,{modelValue:c.value,"onUpdate:modelValue":e[12]||(e[12]=l=>c.value=l),"close-on-click-modal":!1,title:G(W),width:"570",onClose:e[13]||(e[13]=l=>F(C.value))},{footer:u(()=>[d("span",ye,[t(i,{onClick:e[10]||(e[10]=l=>c.value=!1)},{default:u(()=>e[27]||(e[27]=[a("我再想想")])),_:1}),t(i,{type:"primary",onClick:e[11]||(e[11]=l=>Z(C.value))},{default:u(()=>[a(_(G(K)),1)]),_:1})])]),default:u(()=>[t(oe,{ref_key:"formRef",ref:C,"label-width":"140",rules:L,model:o.value},{default:u(()=>[t(f,{label:"是否打开菜单",prop:"isShow"},{default:u(()=>[t(z,{modelValue:o.value.isShow,"onUpdate:modelValue":e[1]||(e[1]=l=>o.value.isShow=l)},null,8,["modelValue"])]),_:1}),t(f,{label:"是否属于三方网页",prop:"isSystem"},{default:u(()=>[t(z,{modelValue:o.value.isSystem,"onUpdate:modelValue":e[2]||(e[2]=l=>o.value.isSystem=l)},null,8,["modelValue"])]),_:1}),t(f,{label:"菜单文本提示信息",prop:"menuTipText"},{default:u(()=>[t(y,{modelValue:o.value.menuTipText,"onUpdate:modelValue":e[3]||(e[3]=l=>o.value.menuTipText=l),placeholder:"请填写菜单提示文字"},null,8,["modelValue"])]),_:1}),t(f,{label:"菜单图标编号",prop:"menuIcon"},{default:u(()=>[t(y,{modelValue:o.value.menuIcon,"onUpdate:modelValue":e[4]||(e[4]=l=>o.value.menuIcon=l),placeholder:"请填写菜单ICON图标"},null,8,["modelValue"])]),_:1}),o.value.isSystem?(b(),I(f,{key:0,label:"加载三方网页地址",prop:"menuIframeUrl"},{default:u(()=>[t(y,{modelValue:o.value.menuIframeUrl,"onUpdate:modelValue":e[5]||(e[5]=l=>o.value.menuIframeUrl=l),placeholder:"请填写加载的三方网页地址"},null,8,["modelValue"])]),_:1})):T("",!0),t(f,{label:"数字编号排序",prop:"order"},{default:u(()=>[t(y,{modelValue:o.value.order,"onUpdate:modelValue":e[6]||(e[6]=l=>o.value.order=l),type:"number",placeholder:"请填写排序Id、越小越靠前"},null,8,["modelValue"])]),_:1}),o.value.isSystem?T("",!0):(b(),I(f,{key:1,label:"系统内菜单路径",prop:"menuPath"},{default:u(()=>[t(y,{modelValue:o.value.menuPath,"onUpdate:modelValue":e[7]||(e[7]=l=>o.value.menuPath=l),placeholder:"请填写系统内置菜单地址"},null,8,["modelValue"])]),_:1})),t(f,{label:"是否打开新窗口",prop:"isJump"},{default:u(()=>[t(z,{modelValue:o.value.isJump,"onUpdate:modelValue":e[8]||(e[8]=l=>o.value.isJump=l)},null,8,["modelValue"])]),_:1}),t(f,{label:"是否需要登录访问",prop:"isNeedAuth"},{default:u(()=>[t(z,{modelValue:o.value.isNeedAuth,"onUpdate:modelValue":e[9]||(e[9]=l=>o.value.isNeedAuth=l)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),t(j,{modelValue:M.value,"onUpdate:modelValue":e[18]||(e[18]=l=>M.value=l),title:"修改默认信息",width:"570",onClose:e[19]||(e[19]=l=>F(C.value))},{footer:u(()=>[d("span",ce,[t(i,{onClick:e[17]||(e[17]=l=>M.value=!1)},{default:u(()=>e[31]||(e[31]=[a("我再想想")])),_:1}),t(i,{type:"primary",onClick:le},{default:u(()=>e[32]||(e[32]=[a(" 确认修改 ")])),_:1})])]),default:u(()=>[d("div",_e,[e[28]||(e[28]=d("span",{style:{width:"130px"}},"修改ICON编码:",-1)),t(y,{modelValue:k.value,"onUpdate:modelValue":e[14]||(e[14]=l=>k.value=l),placeholder:"请填写要修改的ICON编码"},null,8,["modelValue"])]),d("div",ge,[e[29]||(e[29]=d("span",{style:{width:"130px"}},"修改菜单名称:",-1)),t(y,{modelValue:U.value,"onUpdate:modelValue":e[15]||(e[15]=l=>U.value=l),placeholder:"请填写要修改的菜单名称"},null,8,["modelValue"])]),d("div",be,[e[30]||(e[30]=d("span",{style:{width:"130px"}},"修改菜单排序:",-1)),t(y,{modelValue:S.value,"onUpdate:modelValue":e[16]||(e[16]=l=>S.value=l),placeholder:"请修改菜单排序 越大越靠前"},null,8,["modelValue"])])]),_:1},8,["modelValue"])])}}});typeof H=="function"&&H(we);export{we as default};
