
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{_ as R}from"./index-ffb2bbfd.js";import{A as S}from"./sales-d7269b7d.js";import{d as B,r as c,O as q,q as N,h as a,P as j,o as z,c as $,e,f as o,k as m,b as _,w as F,G,a as M,t as P,n as V}from"./index-6b0fe787.js";const O=["src"],T=B({__name:"records",setup(H){const v=c(),b=c(0),d=c(!1),n=q({orderPrice:null,orderId:null,page:1,size:10}),w=c([]);async function i(){try{d.value=!0;const s=await S.queryRecords(n);d.value=!1;const{rows:t,count:u}=s.data;b.value=u,w.value=t}catch{d.value=!1}}function h(s){s==null||s.resetFields(),i()}return N(()=>{i()}),(s,t)=>{const u=a("el-input"),f=a("el-form-item"),y=a("el-button"),k=a("el-form"),g=R,C=a("el-alert"),r=a("el-table-column"),I=a("el-tag"),x=a("el-table"),D=a("el-pagination"),A=a("el-row"),U=j("loading");return z(),$("div",null,[e(g,null,{default:o(()=>[e(k,{ref_key:"formRef",ref:v,inline:!0,model:n},{default:o(()=>[e(f,{label:"工单状态",prop:"orderPrice"},{default:o(()=>[e(u,{modelValue:n.orderPrice,"onUpdate:modelValue":t[0]||(t[0]=l=>n.orderPrice=l),placeholder:"订单金额"},null,8,["modelValue"])]),_:1}),e(f,{label:"订单ID",prop:"orderId"},{default:o(()=>[e(u,{modelValue:n.orderId,"onUpdate:modelValue":t[1]||(t[1]=l=>n.orderId=l),placeholder:"订单ID、模糊搜索"},null,8,["modelValue"])]),_:1}),e(f,null,{default:o(()=>[e(y,{type:"primary",onClick:i},{default:o(()=>t[5]||(t[5]=[m(" 查询 ")])),_:1}),e(y,{onClick:t[2]||(t[2]=l=>h(_(v)))},{default:o(()=>t[6]||(t[6]=[m(" 重置 ")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(g,null,{default:o(()=>[e(C,{"show-icon":"",title:"分销佣金记录流水",description:"每单的佣金会和此用户当前的返佣比例确定、用户返佣比例是可以手动变更的、所以佣金非固定！",type:"success"})]),_:1}),e(g,{style:{width:"100%"}},{default:o(()=>[F((z(),G(x,{border:"",data:_(w),style:{width:"100%"},size:"large"},{default:o(()=>[e(r,{prop:"id",label:"ID",width:"50"}),e(r,{prop:"inviterAvatar",label:"邀请人头像",width:"120"},{default:o(l=>{var p;return[M("img",{src:(p=l.row)==null?void 0:p.inviterAvatar,style:{height:"50px"}},null,8,O)]}),_:1}),e(r,{prop:"inviterEmail",label:"邀请人邮箱",width:"200"}),e(r,{prop:"inviterUsername",label:"邀请人昵称",width:"200"}),e(r,{prop:"inviteeEmail",label:"被邀人邮箱",width:"200"}),e(r,{prop:"inviteeUsername",label:"邀请人昵称",width:"200"}),e(r,{prop:"orderPrice",align:"center",label:"订单金额"}),e(r,{prop:"commissionAmount",align:"center",label:"佣金金额"},{default:o(l=>[e(I,{type:"success"},{default:o(()=>{var p;return[m(" ￥"+P((p=l.row)==null?void 0:p.commissionAmount),1)]}),_:2},1024)]),_:1}),e(r,{prop:"commissionPercentage",align:"center",label:"佣金比例"},{default:o(l=>[m(P(`${l.row.commissionPercentage}%`),1)]),_:1})]),_:1},8,["data"])),[[U,_(d)]]),e(A,{class:"flex justify-end mt-5"},{default:o(()=>[e(D,{"current-page":n.page,"onUpdate:currentPage":t[3]||(t[3]=l=>n.page=l),"page-size":n.size,"onUpdate:pageSize":t[4]||(t[4]=l=>n.size=l),class:"mr-5","page-sizes":[10,20,30,50],layout:"total, sizes, prev, pager, next, jumper",total:_(b),onSizeChange:i,onCurrentChange:i},null,8,["current-page","page-size","total"])]),_:1})]),_:1})])}}});typeof V=="function"&&V(T);export{T as default};
