
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{a as k}from"./config-e982e661.js";import{d as E,r as i,O as R,q as j,h as a,o as u,c as v,e as o,f as t,a as d,k as f,Q as A,R as L,E as V,G as h,H as M,n as b}from"./index-6b0fe787.js";const $={class:"flex justify-between"},D={class:"flex justify-between",style:{width:"100%"}},F=E({__name:"secret",setup(H){const n=i([]),p=R({chatGptKey:[]});i({chatGptKey:[{required:!0,trigger:"blur",message:"请填写您的chatGpt的key"}]});const m=i();async function _(){const l=await k.queryGptKeys();n.value=l.data.map(e=>({configKey:e.configKey,configVal:e.configVal,status:e.status})),l.data.length===0&&y(),p.chatGptKey=n.value}function y(){n.value.push({configKey:"",configVal:"",status:1})}function x(l){n.value.splice(l,1)}function w(){var l;(l=m.value)==null||l.validate(async e=>{if(e){try{await k.setGptKeys({configs:n.value}),V.success("变更配置信息成功")}catch{}_()}else V.error("请填写完整信息")})}return j(()=>{_()}),(l,e)=>{const c=a("el-button"),C=a("el-input"),K=a("el-switch"),G=a("el-form-item"),U=a("el-col"),q=a("el-row"),B=a("el-form"),N=a("el-card");return u(),v("div",null,[o(N,{style:{margin:"20px"}},{header:t(()=>[d("div",$,[e[1]||(e[1]=d("b",null,"key池管理",-1)),o(c,{class:"button",text:"",onClick:w},{default:t(()=>e[0]||(e[0]=[f(" 保存设置 ")])),_:1})])]),default:t(()=>[o(B,{ref_key:"formRef",ref:m,model:p,"label-width":"80px"},{default:t(()=>[o(q,null,{default:t(()=>[o(U,{xs:24,md:21,lg:16,xl:13},{default:t(()=>[(u(!0),v(A,null,L(n.value,(s,g)=>(u(),h(G,{key:s.configKey,label:`key-${g+1}`,prop:"chatGptKey"},{default:t(()=>[d("div",D,[o(C,{modelValue:s.configVal,"onUpdate:modelValue":r=>s.configVal=r,placeholder:"请填写您的ChatGpt-Key",clearable:"",class:"flex-1"},null,8,["modelValue","onUpdate:modelValue"]),n.value.length!==1?(u(),h(c,{key:0,type:"danger",plain:"",class:"ml-1",onClick:r=>x(g)},{default:t(()=>e[2]||(e[2]=[f(" 删除 ")])),_:2},1032,["onClick"])):M("",!0),o(K,{modelValue:s.status,"onUpdate:modelValue":r=>s.status=r,class:"ml-5","active-value":1,"inactive-value":0},null,8,["modelValue","onUpdate:modelValue"])])]),_:2},1032,["label"]))),128))]),_:1})]),_:1}),o(c,{class:"mt-5",style:{"margin-left":"80px"},onClick:y},{default:t(()=>e[3]||(e[3]=[f(" 添加key ")])),_:1})]),_:1},8,["model"])]),_:1})])}}});typeof b=="function"&&b(F);export{F as default};
