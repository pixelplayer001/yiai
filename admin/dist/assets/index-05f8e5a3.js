
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{z as g,r as F,ah as _,ai as k,aj as x,ak as T,A as L,al as W,am as R,q as j,an as B,ao as D}from"./index-6b0fe787.js";function h(a){var t;const e=k(a);return(t=e==null?void 0:e.$el)!=null?t:e}const I=x?window:void 0,O=x?window.document:void 0,z=x?window.navigator:void 0;function S(...a){let t,e,i,l;if(typeof a[0]=="string"||Array.isArray(a[0])?([e,i,l]=a,t=I):[t,e,i,l]=a,!t)return T;Array.isArray(e)||(e=[e]),Array.isArray(i)||(i=[i]);const u=[],c=()=>{u.forEach(r=>r()),u.length=0},s=(r,d,m,p)=>(r.addEventListener(d,m,p),()=>r.removeEventListener(d,m,p)),f=L(()=>[h(t),k(l)],([r,d])=>{if(c(),!r)return;const m=W(d)?{...d}:d;u.push(...e.flatMap(p=>i.map(y=>s(r,p,y,m))))},{immediate:!0,flush:"post"}),v=()=>{f(),c()};return R(v),v}function P(){const a=F(!1),t=D();return t&&j(()=>{a.value=!0},t),a}function C(a){const t=P();return g(()=>(t.value,!!a()))}function A(a,t={}){const{controls:e=!1,navigator:i=z}=t,l=C(()=>i&&"permissions"in i);let u;const c=typeof a=="string"?{name:a}:a,s=F(),f=()=>{u&&(s.value=u.state)},v=B(async()=>{if(l.value){if(!u)try{u=await i.permissions.query(c),S(u,"change",f),f()}catch{s.value="prompt"}return u}});return v(),e?{state:s,isSupported:l,query:v}:s}function H(a={}){const{navigator:t=z,read:e=!1,source:i,copiedDuring:l=1500,legacy:u=!1}=a,c=C(()=>t&&"clipboard"in t),s=A("clipboard-read"),f=A("clipboard-write"),v=g(()=>c.value||u),r=F(""),d=F(!1),m=_(()=>d.value=!1,l);function p(){c.value&&n(s.value)?t.clipboard.readText().then(o=>{r.value=o}):r.value=b()}v.value&&e&&S(["copy","cut"],p);async function y(o=k(i)){v.value&&o!=null&&(c.value&&n(f.value)?await t.clipboard.writeText(o):E(o),r.value=o,d.value=!0,m.start())}function E(o){const w=document.createElement("textarea");w.value=o??"",w.style.position="absolute",w.style.opacity="0",document.body.appendChild(w),w.select(),document.execCommand("copy"),w.remove()}function b(){var o,w,q;return(q=(w=(o=document==null?void 0:document.getSelection)==null?void 0:o.call(document))==null?void 0:w.toString())!=null?q:""}function n(o){return o==="granted"||o==="prompt"}return{isSupported:v,text:r,copied:d,copy:y}}const M=["fullscreenchange","webkitfullscreenchange","webkitendfullscreen","mozfullscreenchange","MSFullscreenChange"];function N(a,t={}){const{document:e=O,autoExit:i=!1}=t,l=g(()=>{var n;return(n=h(a))!=null?n:e==null?void 0:e.querySelector("html")}),u=F(!1),c=g(()=>["requestFullscreen","webkitRequestFullscreen","webkitEnterFullscreen","webkitEnterFullScreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen"].find(n=>e&&n in e||l.value&&n in l.value)),s=g(()=>["exitFullscreen","webkitExitFullscreen","webkitExitFullScreen","webkitCancelFullScreen","mozCancelFullScreen","msExitFullscreen"].find(n=>e&&n in e||l.value&&n in l.value)),f=g(()=>["fullScreen","webkitIsFullScreen","webkitDisplayingFullscreen","mozFullScreen","msFullscreenElement"].find(n=>e&&n in e||l.value&&n in l.value)),v=["fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement"].find(n=>e&&n in e),r=C(()=>l.value&&e&&c.value!==void 0&&s.value!==void 0&&f.value!==void 0),d=()=>v?(e==null?void 0:e[v])===l.value:!1,m=()=>{if(f.value){if(e&&e[f.value]!=null)return e[f.value];{const n=l.value;if((n==null?void 0:n[f.value])!=null)return!!n[f.value]}}return!1};async function p(){if(!(!r.value||!u.value)){if(s.value)if((e==null?void 0:e[s.value])!=null)await e[s.value]();else{const n=l.value;(n==null?void 0:n[s.value])!=null&&await n[s.value]()}u.value=!1}}async function y(){if(!r.value||u.value)return;m()&&await p();const n=l.value;c.value&&(n==null?void 0:n[c.value])!=null&&(await n[c.value](),u.value=!0)}async function E(){await(u.value?p():y())}const b=()=>{const n=m();(!n||n&&d())&&(u.value=n)};return S(e,M,b,!1),S(()=>h(l),M,b,!1),i&&R(p),{isSupported:r,isFullscreen:u,enter:y,exit:p,toggle:E}}export{N as a,H as u};
