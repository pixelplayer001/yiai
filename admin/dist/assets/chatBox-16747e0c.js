
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{_ as we}from"./index-ffb2bbfd.js";import{d as ke,r as p,O as P,z as $,q as Te,h as n,P as qe,o as x,c as F,e as t,f as a,k as f,t as k,b as i,S as j,w as le,G as z,a as A,Q as ae,R as oe,E as O,V as ne,U as Ie,n as se}from"./index-6b0fe787.js";import{A as h}from"./chatgpt-97f50f25.js";import{_ as Ue}from"./index.vue_vue_type_script_setup_true_lang-26ba20a3.js";const De={class:"flex justify-end mr-5"},Pe={class:"flex justify-end mr-5"},$e=ke({__name:"chatBox",setup(ze){const T=p(!1),q=p(!1),B=p(),re=p(),g=p(0),C=p(0),s=P({status:!0,name:"",order:100,icon:""}),r=P({typeId:"",appId:"",status:!0,title:"",order:100,prompt:"",url:""}),ue=P({status:[{required:!0,message:"请选择开启状态",trigger:"change"}],name:[{required:!0,message:"请填写分类名称",trigger:"blur"}],icon:[{required:!0,message:"请填写分类图标",trigger:"blur"}],order:[{required:!0,message:"请填写排序id 越大越靠前",trigger:"blur"}]}),de=P({typeId:[{required:!0,message:"请选择分类",trigger:"change"}],appId:[{required:!1,message:"请选择APP",trigger:"change"}],status:[{required:!0,message:"请选择开启状态",trigger:"change"}],title:[{required:!0,message:"请填写标题名称",trigger:"blur"}],order:[{required:!0,message:"请填写排序id 越大越靠前",trigger:"blur"}],prompt:[{required:!1,message:"请填写快捷描述语",trigger:"blur"}],url:[{required:!1,message:"请填写跳转地址",trigger:"blur"}]});function ie(o){g.value=0,o==null||o.resetFields()}function pe(o){C.value=0,o==null||o.resetFields()}const y=p(!1),_=p(!1),V=p("chatBoxType"),me=$(()=>g.value?"更新分类":"新增分类"),ce=$(()=>C.value?"更新子项":"新增子项"),J=$(()=>g.value?"确认更新":"确认新增"),N=p([]),L=p([]),Q=p([]);async function I(){try{T.value=!0;const o=await h.queryChatBoxTypes();T.value=!1,N.value=o.data}catch{T.value=!1}}async function S(){try{q.value=!0;const o=await h.queryChatBoxs();q.value=!1,L.value=o.data}catch{q.value=!1}}async function fe(o){const{id:e}=o;await h.delChatBoxType({id:e}),O({type:"success",message:"操作完成！"}),I()}async function ge(o){const{id:e}=o;await h.delChatBox({id:e}),O({type:"success",message:"操作完成！"}),S()}function ye(o){g.value=o.id;const{status:e,name:u,icon:w,order:v}=o;ne(()=>{Object.assign(s,{status:e,name:u,icon:w,order:v})}),y.value=!0}function _e(o){C.value=o.id;const{title:e,order:u,status:w,typeId:v,appId:m,prompt:U,url:D}=o;ne(()=>{Object.assign(r,{title:e,order:u,status:w,typeId:v,appId:m,prompt:U,url:D})}),_.value=!0}function ve(o){o==="chatBoxType"?I():S()}async function be(o){o==null||o.validate(async e=>{if(e){const u=JSON.parse(JSON.stringify(s));delete u.id,g.value&&(u.id=g.value),await h.setChatBoxType(u),O({type:"success",message:"操作成功！"}),g.value=0,y.value=!1,I()}})}async function xe(o){o==null||o.validate(async e=>{if(e){const u=JSON.parse(JSON.stringify(r));delete u.id,C.value&&(u.id=C.value),await h.setChatBox(u),O({type:"success",message:"操作成功！"}),C.value=0,_.value=!1,S()}})}const Ce=$(()=>V.value==="chatBoxType"?"添加提示分类":"添加提示子项");function he(){V.value==="chatBoxType"?y.value=!0:_.value=!0}async function Be(){var e;const o=await Ie.queryApp({status:1,page:1,size:999});Q.value=(e=o==null?void 0:o.data)==null?void 0:e.rows}return Te(()=>{I(),Be()}),(o,e)=>{const u=n("el-alert"),w=n("Plus"),v=n("el-icon"),m=n("el-button"),U=we,D=n("el-tag"),d=n("el-table-column"),M=n("el-popconfirm"),G=n("el-table"),H=n("el-tab-pane"),Ve=n("el-tabs"),K=n("el-switch"),W=n("QuestionFilled"),X=n("el-tooltip"),c=n("el-form-item"),b=n("el-input"),Y=n("el-form"),Z=n("el-dialog"),E=n("el-option"),ee=n("el-select"),te=qe("loading");return x(),F("div",null,[t(U,{class:"header"},{default:a(()=>[t(u,{"show-icon":"",title:"九宫格预设说明",description:"此处设置用于对话窗口为空的时候默认的九宫格配置，分为分类以及分类下的应用或提示词、建议三个分类三个子项即可、更多请查看ui显示。设置 跳转地址|应用|预设问题 三选一即可 如果都设置 优先级参考顺序 只会生效一个。",type:"success"}),t(m,{type:"success",class:"ml-3",size:"large",onClick:he},{default:a(()=>[f(k(Ce.value)+" ",1),t(v,{class:"ml-3"},{default:a(()=>[t(w)]),_:1})]),_:1})]),_:1}),t(U,{style:{width:"100%"}},{default:a(()=>[t(Ve,{type:"border-card",modelValue:i(V),"onUpdate:modelValue":e[0]||(e[0]=l=>j(V)?V.value=l:null),onTabChange:ve},{default:a(()=>[t(H,{name:"chatBoxType",label:"分类管理"},{default:a(()=>[le((x(),z(G,{border:"",data:i(N),style:{width:"100%"},size:"large"},{default:a(()=>[t(d,{prop:"status",align:"center",label:"分类状态"},{default:a(l=>[t(D,{type:l.row.status?"success":"danger"},{default:a(()=>[f(k(l.row.status?"开启中":"已关闭"),1)]),_:2},1032,["type"])]),_:1}),t(d,{prop:"name",label:"分类名称"}),t(d,{prop:"order",label:"排序ID"}),t(d,{prop:"icon",label:"分类图标"},{default:a(l=>[t(Ue,{style:{"font-size":"24px"},icon:l.row.icon},null,8,["icon"])]),_:1}),t(d,{fixed:"right",label:"操作",align:"center",width:"180"},{default:a(l=>[t(m,{link:"",type:"primary",size:"small",onClick:R=>ye(l.row)},{default:a(()=>e[20]||(e[20]=[f(" 变更 ")])),_:2},1032,["onClick"]),t(M,{title:"确认删除此提示词么?",width:"180","icon-color":"red",onConfirm:R=>fe(l.row)},{reference:a(()=>[t(m,{link:"",type:"danger",size:"small"},{default:a(()=>e[21]||(e[21]=[f(" 删除分类 ")])),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])),[[te,i(T)]])]),_:1}),t(H,{name:"chatBox",label:"子类管理"},{default:a(()=>[le((x(),z(G,{border:"",data:i(L),style:{width:"100%"},size:"large"},{default:a(()=>[t(d,{prop:"typeInfo.name",label:"所属分类",width:"120",align:"center"}),t(d,{prop:"status",label:"子项状态",width:"120",align:"center"},{default:a(l=>[t(D,{type:l.row.status?"success":"danger"},{default:a(()=>[f(k(l.row.status?"开启中":"已关闭"),1)]),_:2},1032,["type"])]),_:1}),t(d,{prop:"title",label:"标题名称",width:"180",align:"center"}),t(d,{prop:"order",label:"排序ID",width:"90",align:"center"}),t(d,{prop:"prompt",label:"快捷预设句"}),t(d,{prop:"url",label:"快捷跳转地址"}),t(d,{prop:"appInfo.name",label:"应用名称",width:"180",align:"center"}),t(d,{fixed:"right",label:"操作",align:"center",width:"180"},{default:a(l=>[t(m,{link:"",type:"primary",size:"small",onClick:R=>_e(l.row)},{default:a(()=>e[22]||(e[22]=[f(" 变更 ")])),_:2},1032,["onClick"]),t(M,{title:"确认删除此提示词么?",width:"180","icon-color":"red",onConfirm:R=>ge(l.row)},{reference:a(()=>[t(m,{link:"",type:"danger",size:"small"},{default:a(()=>e[23]||(e[23]=[f(" 删除分类 ")])),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])),[[te,i(q)]])]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(Z,{modelValue:i(y),"onUpdate:modelValue":e[7]||(e[7]=l=>j(y)?y.value=l:null),"close-on-click-modal":!1,title:me.value,width:"770",onClose:e[8]||(e[8]=l=>ie(i(B)))},{footer:a(()=>[A("span",De,[t(m,{onClick:e[5]||(e[5]=l=>y.value=!1)},{default:a(()=>e[25]||(e[25]=[f("取消")])),_:1}),t(m,{type:"primary",onClick:e[6]||(e[6]=l=>be(i(B)))},{default:a(()=>[f(k(J.value),1)]),_:1})])]),default:a(()=>[t(Y,{ref_key:"formPackageChatBoxTypeRef",ref:B,"label-position":"right","label-width":"120px",model:s,rules:ue},{default:a(()=>[t(c,{label:"分类启用状态",prop:"status"},{default:a(()=>[t(K,{modelValue:s.status,"onUpdate:modelValue":e[1]||(e[1]=l=>s.status=l)},null,8,["modelValue"]),t(X,{class:"box-item",effect:"dark",placement:"right"},{content:a(()=>e[24]||(e[24]=[A("div",{style:{width:"250px"}}," 关闭当前分类、用户端将不再展示！ ",-1)])),default:a(()=>[t(v,{class:"ml-3 cursor-pointer"},{default:a(()=>[t(W)]),_:1})]),_:1})]),_:1}),t(c,{label:"排序Order",prop:"order"},{default:a(()=>[t(b,{modelValue:s.order,"onUpdate:modelValue":e[2]||(e[2]=l=>s.order=l),placeholder:"排序id越大越靠前"},null,8,["modelValue"])]),_:1}),t(c,{label:"分类名称",prop:"name"},{default:a(()=>[t(b,{modelValue:s.name,"onUpdate:modelValue":e[3]||(e[3]=l=>s.name=l),placeholder:"请填写提示词名称（用户看到的名称）"},null,8,["modelValue"])]),_:1}),t(c,{label:"分类图标",prop:"proxyUrl"},{default:a(()=>[t(b,{modelValue:s.icon,"onUpdate:modelValue":e[4]||(e[4]=l=>s.icon=l),placeholder:"请填写分类图标！"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"]),t(Z,{modelValue:i(_),"onUpdate:modelValue":e[18]||(e[18]=l=>j(_)?_.value=l:null),"close-on-click-modal":!1,title:ce.value,width:"770",onClose:e[19]||(e[19]=l=>pe(i(re)))},{footer:a(()=>[A("span",Pe,[t(m,{onClick:e[16]||(e[16]=l=>_.value=!1)},{default:a(()=>e[27]||(e[27]=[f("取消")])),_:1}),t(m,{type:"primary",onClick:e[17]||(e[17]=l=>xe(i(B)))},{default:a(()=>[f(k(J.value),1)]),_:1})])]),default:a(()=>[t(Y,{ref_key:"formPackageChatBoxTypeRef",ref:B,"label-position":"right","label-width":"120px",model:r,rules:de},{default:a(()=>[t(c,{label:"启用状态",prop:"status"},{default:a(()=>[t(K,{modelValue:s.status,"onUpdate:modelValue":e[9]||(e[9]=l=>s.status=l)},null,8,["modelValue"]),t(X,{class:"box-item",effect:"dark",placement:"right"},{content:a(()=>e[26]||(e[26]=[A("div",{style:{width:"250px"}}," 关闭当前子项、用户端将不再展示！ ",-1)])),default:a(()=>[t(v,{class:"ml-3 cursor-pointer"},{default:a(()=>[t(W)]),_:1})]),_:1})]),_:1}),t(c,{label:"选择分类",prop:"typeId"},{default:a(()=>[t(ee,{modelValue:r.typeId,"onUpdate:modelValue":e[10]||(e[10]=l=>r.typeId=l),placeholder:"请选择分类状态",clearable:"",style:{width:"100%"}},{default:a(()=>[(x(!0),F(ae,null,oe(i(N),l=>(x(),z(E,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(c,{label:"选择应用",prop:"appId"},{default:a(()=>[t(ee,{modelValue:r.appId,"onUpdate:modelValue":e[11]||(e[11]=l=>r.appId=l),placeholder:"请选择跳转应用",clearable:"",style:{width:"100%"}},{default:a(()=>[(x(!0),F(ae,null,oe(i(Q),l=>(x(),z(E,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(c,{label:"标题名称",prop:"title"},{default:a(()=>[t(b,{modelValue:r.title,"onUpdate:modelValue":e[12]||(e[12]=l=>r.title=l),placeholder:"请填写子项标题名称"},null,8,["modelValue"])]),_:1}),t(c,{label:"排序Order",prop:"order"},{default:a(()=>[t(b,{modelValue:s.order,"onUpdate:modelValue":e[13]||(e[13]=l=>s.order=l),placeholder:"排序id越大越靠前"},null,8,["modelValue"])]),_:1}),t(c,{label:"跳转地址",prop:"prompt"},{default:a(()=>[t(b,{modelValue:r.url,"onUpdate:modelValue":e[14]||(e[14]=l=>r.url=l),placeholder:"请填写跳转地址！"},null,8,["modelValue"])]),_:1}),t(c,{label:"预设问题",prop:"prompt"},{default:a(()=>[t(b,{type:"textarea",rows:5,modelValue:r.prompt,"onUpdate:modelValue":e[15]||(e[15]=l=>r.prompt=l),placeholder:"请填写预设问题、如果设置了应用、那么点击优先跳转应用、如果未设置、点击则会直接在对话中发当前填写预设内容"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}});typeof se=="function"&&se($e);export{$e as default};
