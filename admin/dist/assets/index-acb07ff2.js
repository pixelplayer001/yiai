
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{d as Q,i as te,s as se,ab as le,y as ae,r as m,ac as ne,z as oe,A,q as ue,J as I,B as h,ad as J,h as M,o as b,c as C,a as c,l as z,e as n,f as u,b as p,S as re,j as B,k,t as x,H as O,Q as q,R as F,D as G,_ as ie,G as ce,m as fe}from"./index-6b0fe787.js";const de={class:"container"},pe={key:0,class:"tips"},ve={class:"tip"},he={class:"tip"},_e={class:"tip"},ge={class:"tip"},ye=["onClick","onMouseover"],me={class:"info"},be={class:"title"},ke={class:"breadcrumb"},Se={class:"path"},we=Q({name:"Search"}),Re=Q({...we,setup(Ce){const W=te(),_=se(),X=le(),Y=ae(),g=m(!1),f=m(""),L=m([]),r=m(-1),$=m(),S=m(),w=m([]);function Z(s){return w.value.push(s)}ne(()=>{w.value=[]});const R=oe(()=>{let s=[];return s=L.value.filter(e=>{let a=!1;return e.title&&(typeof e.title=="function"?e.title().includes(f.value)&&(a=!0):e.title.includes(f.value)&&(a=!0)),e.path.includes(f.value)&&(a=!0),e.breadcrumb.some(l=>{let t=!1;return l&&(typeof l=="function"?l().includes(f.value)&&(t=!0):l.includes(f.value)&&(t=!0)),t})&&(a=!0),a}),s});A(()=>g.value,s=>{s?(document.body.classList.add("hidden"),S.value.scrollTop=0,h("up",E),h("down",H),h("enter",V),setTimeout(()=>{$.value.focus()},500)):(document.body.classList.remove("hidden"),h.unbind("up",E),h.unbind("down",H),h.unbind("enter",V),setTimeout(()=>{f.value="",r.value=-1},500))}),A(()=>R.value,()=>{r.value=-1,w.value=[],D()}),ue(()=>{I.on("global-search-toggle",()=>{g.value=!g.value}),h("alt+s",s=>{_.settings.navSearch.enable&&_.settings.navSearch.enableHotkeys&&(s.preventDefault(),g.value=!0)}),h("esc",s=>{_.settings.navSearch.enable&&_.settings.navSearch.enableHotkeys&&(s.preventDefault(),g.value=!1)}),_.settings.app.routeBaseOn!=="filesystem"?X.routes.forEach(s=>{s.children&&N(s.children)}):Y.menus.forEach(s=>{U(s.children)})});function P(s){var a;let e=!0;return(a=s.children)!=null&&a.every(l=>{var t;return((t=l.meta)==null?void 0:t.sidebar)===!1})&&(e=!1),e}function N(s,e,a,l){s.forEach(t=>{var i,o,v,d,y,j,K;if(((i=t.meta)==null?void 0:i.sidebar)!==!1){const T=J(l)||[];t.children&&P(t)?(T.push((o=t.meta)==null?void 0:o.title),N(t.children,e?[e,t.path].join("/"):t.path,((v=t.meta)==null?void 0:v.icon)??a,T)):(T.push((d=t.meta)==null?void 0:d.title),L.value.push({path:e?[e,t.path].join("/"):t.path,icon:((y=t.meta)==null?void 0:y.icon)??a,title:(j=t.meta)==null?void 0:j.title,link:(K=t.meta)==null?void 0:K.link,breadcrumb:T}))}})}function U(s,e,a){s.forEach(l=>{var i,o,v,d,y;const t=J(a)||[];l.children&&l.children.length>0?(t.push((i=l.meta)==null?void 0:i.title),U(l.children,((o=l.meta)==null?void 0:o.icon)??e,t)):(t.push((v=l.meta)==null?void 0:v.title),L.value.push({icon:((d=l.meta)==null?void 0:d.icon)??e,title:(y=l.meta)==null?void 0:y.title,path:l.path,breadcrumb:t}))})}function E(){R.value.length&&(r.value-=1,r.value<0&&(r.value=R.value.length-1),D())}function H(){R.value.length&&(r.value+=1,r.value>R.value.length-1&&(r.value=0),D())}function V(){r.value!==-1&&w.value[r.value].click()}function D(){let s=0;if(r.value!==-1){s=S.value.scrollTop;const e=w.value[r.value].offsetTop,a=w.value[r.value].clientHeight,l=S.value.scrollTop,t=S.value.clientHeight;e+a>l+t?s=e+a-t:e<=l&&(s=e)}S.value.scrollTo({top:s})}function ee(s,e){e?window.open(e,"_blank"):W.push(s)}return(s,e)=>{const a=ie,l=M("el-icon"),t=M("el-input"),i=M("el-tag");return b(),C("div",{id:"search",class:G({searching:p(g)}),onClick:e[3]||(e[3]=o=>p(g)&&p(I).emit("global-search-toggle"))},[c("div",de,[c("div",{class:"search-box",onClick:e[2]||(e[2]=z(()=>{},["stop"]))},[n(t,{ref_key:"searchInputRef",ref:$,modelValue:p(f),"onUpdate:modelValue":e[0]||(e[0]=o=>re(f)?f.value=o:null),placeholder:"搜索页面，支持标题、URL模糊查询",clearable:"",onKeydown:[e[1]||(e[1]=B(o=>p(I).emit("global-search-toggle"),["esc"])),B(z(E,["prevent"]),["up"]),B(z(H,["prevent"]),["down"]),B(z(V,["prevent"]),["enter"])]},{prefix:u(()=>[n(l,null,{default:u(()=>[n(a,{name:"ep:search"})]),_:1})]),_:1},8,["modelValue","onKeydown"]),p(_).mode==="pc"?(b(),C("div",pe,[c("div",ve,[n(i,{type:"info",size:"large"},{default:u(()=>[k(x(p(_).os==="mac"?"⌥":"Alt")+" + S ",1)]),_:1}),n(i,{type:"info",size:"large"},{default:u(()=>e[4]||(e[4]=[k(" 唤醒搜索面板 ")])),_:1})]),c("div",he,[n(i,{type:"info",size:"large"},{default:u(()=>[n(l,null,{default:u(()=>[n(a,{name:"search-up"})]),_:1})]),_:1}),n(i,{type:"info",size:"large"},{default:u(()=>[n(l,null,{default:u(()=>[n(a,{name:"search-down"})]),_:1})]),_:1}),n(i,{type:"info",size:"large"},{default:u(()=>e[5]||(e[5]=[k(" 切换搜索结果 ")])),_:1})]),c("div",_e,[n(i,{type:"info",size:"large"},{default:u(()=>[n(l,null,{default:u(()=>[n(a,{name:"search-enter"})]),_:1})]),_:1}),n(i,{type:"info",size:"large"},{default:u(()=>e[6]||(e[6]=[k(" 访问页面 ")])),_:1})]),c("div",ge,[n(i,{type:"info",size:"large"},{default:u(()=>e[7]||(e[7]=[k(" ESC ")])),_:1}),n(i,{type:"info",size:"large"},{default:u(()=>e[8]||(e[8]=[k(" 退出 ")])),_:1})])])):O("",!0)]),c("div",{ref_key:"searchResultRef",ref:S,class:"result"},[(b(!0),C(q,null,F(p(R),(o,v)=>(b(),C("a",{key:o.path,ref_for:!0,ref:Z,class:G(["item",{actived:v===p(r)}]),onClick:d=>ee(o.path,o.link),onMouseover:d=>r.value=v},[n(l,{class:"icon"},{default:u(()=>[o.icon?(b(),ce(a,{key:0,name:o.icon},null,8,["name"])):O("",!0)]),_:2},1024),c("div",me,[c("div",be,x(o.title??"[ 无标题 ]"),1),c("div",ke,[(b(!0),C(q,null,F(o.breadcrumb,(d,y)=>(b(),C("span",{key:y},[k(x(d??"[ 无标题 ]")+" ",1),n(l,null,{default:u(()=>[n(a,{name:"ep:arrow-right"})]),_:1})]))),128))]),c("div",Se,x(o.path),1)])],42,ye))),128))],512)])],2)}}});const ze=fe(Re,[["__scopeId","data-v-2f10934e"]]);export{ze as default};
